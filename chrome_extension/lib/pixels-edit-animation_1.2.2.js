/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pixelsEditAnimation=t():e.pixelsEditAnimation=t()}(this,(()=>(()=>{var e={5766:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,o=s(e),a=o[0],l=o[1],c=new r(function(e,t,i){return 3*(t+i)/4-i}(0,a,l)),d=0,u=l>0?a-4:a;for(i=0;i<u;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===l&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,c[d++]=255&t),1===l&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),o.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=o[a],n[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,n){for(var r,o,a=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},2699:e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,o),n(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}b(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&b(e,"error",t,{once:!0})}(e,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,i,n){var r,o,a,c;if(s(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),a=o[t]),void 0===a)a=o[t]=i,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=l(e))>0&&a.length>r&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,c=d,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function f(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):p(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function b(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){n.once&&e.removeEventListener(t,r),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,d=p(l,c);for(i=0;i<c;++i)n(d[i],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,n,r,o,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8690:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(9641));t.default=class{get patterns(){return this._patterns}get animations(){return this._animations}get audioClips(){return this._audioClips}get profiles(){return this._profiles}get defaultProfile(){return this._defaultProfile}constructor(e){var t,i,n,o,a;this._patterns=null!==(t=null==e?void 0:e.patterns)&&void 0!==t?t:[],this._animations=null!==(i=null==e?void 0:e.animations)&&void 0!==i?i:[],this._audioClips=null!==(n=null==e?void 0:e.audioClips)&&void 0!==n?n:[],this._profiles=null!==(o=null==e?void 0:e.profiles)&&void 0!==o?o:[],this._defaultProfile=null!==(a=null==e?void 0:e.defaultProfile)&&void 0!==a?a:new r.default}findPattern(e){return this._patterns.find((t=>t.name===e))}findAnimation(e){return this._animations.find((t=>t.name===e))}findAudioClip(e){return this._audioClips.find((t=>t.name===e))}findProfile(e){return this._profiles.find((t=>t.name===e))}}},6647:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDataSetForProfile=t.createDataSetForAnimations=t.createDataSetForAnimation=void 0;const n=i(6627);function r(e,t){const i=e.animations.length;for(const i of t)for(const t of i.collectAnimations())e.animations.includes(t)||e.animations.push(t);const n=e.animations.length;for(let t=i;t<n;++t){const i=e.animations[t],{rgb:n,grayscale:r}=i.collectPatterns();if(r)for(const t of r)e.patterns.includes(t)||e.patterns.push(t);if(n)for(const t of n)e.rgbPatterns.includes(t)||e.rgbPatterns.push(t)}}t.createDataSetForAnimation=function(e){const t=new n.EditDataSet;return r(t,[e]),t},t.createDataSetForAnimations=function(e){const t=new n.EditDataSet;return r(t,e),t},t.createDataSetForProfile=function(e,t){const i=(null!=t?t:1)*e.brightness,o=new n.EditDataSet({profile:e,brightness:i});return r(o,o.profile.collectAnimations()),o}},7236:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorModeValues=void 0;const n=i(1371);t.ColorModeValues={rgb:(0,n.enumValue)(0),face:(0,n.enumValue)(),random:(0,n.enumValue)()}},4926:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{replaceAnimation(e,t){}requiresAnimation(e){return!1}collectAnimations(){return[]}}},479:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7036)),l=i(8879);class c extends s.default{constructor(e){var t,i,n;super(),this.type="makeWebRequest",this.url=null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"",this.value=null!==(i=null==e?void 0:e.value)&&void 0!==i?i:"",this.format=null!==(n=null==e?void 0:e.format)&&void 0!==n?n:"parameters"}toAction(e,t,i){return(0,a.safeAssign)(new o.ActionMakeWebRequest,{type:o.ActionTypeValues.playAudioClip,actionId:i})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("userText"),(0,l.name)("URL"),l.observable],c.prototype,"url",void 0),n([(0,l.widget)("userText"),(0,l.name)("Value"),l.observable],c.prototype,"value",void 0),n([(0,l.name)("Format"),l.observable],c.prototype,"format",void 0)},9422:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4926)),l=i(8879);class c extends s.default{constructor(e){var t,i,n;super(),this.type="playAnimation",this.animation=null==e?void 0:e.animation,this.face=null!==(t=null==e?void 0:e.face)&&void 0!==t?t:o.AnimConstants.currentFaceIndex,this.loopCount=null!==(i=null==e?void 0:e.loopCount)&&void 0!==i?i:1,this.duration=null==e?void 0:e.duration,this.fade=null==e?void 0:e.fade,this.intensity=null==e?void 0:e.intensity,this.colors=null!==(n=null==e?void 0:e.colors)&&void 0!==n?n:[]}toAction(e,t,i){return(0,a.safeAssign)(new o.ActionPlayAnimation,{animIndex:this.animation?e.animations.indexOf(this.animation):o.AnimConstants.currentFaceIndex,faceIndex:this.face>0?this.face-1:this.face,loopCount:this.loopCount})}duplicate(){return new c(Object.assign(Object.assign({},this),{colors:this.colors.map((e=>e.duplicate()))}))}replaceAnimation(e,t){this.animation===e&&(this.animation=t)}requiresAnimation(e){return this.animation===e}collectAnimations(){return this.animation?this.animation.collectAnimations():[]}}t.default=c,n([(0,l.widget)("animation"),(0,l.name)("Animation"),l.observable],c.prototype,"animation",void 0),n([(0,l.widget)("playbackFace"),(0,l.name)("Play On Face"),l.observable],c.prototype,"face",void 0),n([(0,l.widget)("count"),(0,l.range)(1,10),(0,l.name)("Repeat Count"),l.observable],c.prototype,"loopCount",void 0),n([l.observable],c.prototype,"duration",void 0),n([l.observable],c.prototype,"fade",void 0),n([l.observable],c.prototype,"intensity",void 0),n([l.observable],c.prototype,"colors",void 0)},1068:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7036)),l=i(8879);class c extends s.default{constructor(e){var t,i;super(),this.type="playAudioClip",this.clip=null==e?void 0:e.clip,this.volume=null!==(t=null==e?void 0:e.volume)&&void 0!==t?t:100,this.loopCount=null!==(i=null==e?void 0:e.loopCount)&&void 0!==i?i:1}toAction(e,t,i){return(0,a.safeAssign)(new o.ActionPlayAudioClip,{actionId:i})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("audioClip"),(0,l.name)("Audio Clip"),l.observable],c.prototype,"clip",void 0),n([l.observable],c.prototype,"volume",void 0),n([l.observable],c.prototype,"loopCount",void 0)},7036:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(4926));class o extends r.default{}t.default=o},4039:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7036)),l=i(8879);class c extends s.default{constructor(e){var t,i,n;super(),this.type="speakText",this.text=null!==(t=null==e?void 0:e.text)&&void 0!==t?t:"",this.pitch=null!==(i=null==e?void 0:e.volume)&&void 0!==i?i:1,this.rate=null!==(n=null==e?void 0:e.volume)&&void 0!==n?n:1}toAction(e,t,i){return(0,a.safeAssign)(new o.ActionSpeakText,{type:o.ActionTypeValues.playAudioClip,actionId:i})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("userText"),(0,l.name)("Text"),l.observable],c.prototype,"text",void 0),n([l.observable],c.prototype,"pitch",void 0),n([l.observable],c.prototype,"rate",void 0)},4135:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=r(i(7713)),s=i(8879);class l extends a.default{constructor(e){var t,i,n,r;super(e),this.animFlags=null!==(t=null==e?void 0:e.animFlags)&&void 0!==t?t:o.AnimationFlagsValues.none,this.duration=null!==(i=null==e?void 0:e.duration)&&void 0!==i?i:1,this.category=null!==(n=null==e?void 0:e.category)&&void 0!==n?n:"system",this.dieType=null!==(r=null==e?void 0:e.dieType)&&void 0!==r?r:"unknown"}collectAnimations(){return[this]}collectPatterns(){return{}}collectGradients(){return[]}}t.default=l,n([(0,s.widget)("slider"),(0,s.range)(.1,30,.1),(0,s.unit)("s"),(0,s.name)("Duration"),s.observable],l.prototype,"duration",void 0),n([(0,s.widget)("bitField"),(0,s.name)("Animation Flags"),(0,s.values)(o.AnimationFlagsValues),s.observable],l.prototype,"animFlags",void 0),n([(0,s.values)(o.AnimationCategoryValues),s.observable],l.prototype,"category",void 0),n([(0,s.values)(o.PixelDieTypeValues),s.observable],l.prototype,"dieType",void 0)},8217:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(1355)),c=i(8879);class d extends s.default{constructor(e){var t,i,n,r,a;super(e),this.type="cycle",this.count=null!==(t=null==e?void 0:e.count)&&void 0!==t?t:1,this.cycles=null!==(i=null==e?void 0:e.cycles)&&void 0!==i?i:1,this.fade=null!==(n=null==e?void 0:e.fade)&&void 0!==n?n:0,this.intensity=null!==(r=null==e?void 0:e.intensity)&&void 0!==r?r:.5,this.faces=null!==(a=null==e?void 0:e.faces)&&void 0!==a?a:o.AnimConstants.faceMaskAll,this.gradient=null==e?void 0:e.gradient}toAnimation(e,t){const i=t.rgbTracks.length;return this.gradient&&t.rgbTracks.push(new l.default({gradient:this.gradient}).toTrack(e,t)),(0,a.safeAssign)(new o.AnimationCycle,{animFlags:this.animFlags,duration:1e3*this.duration,faceMask:this.faces,fade:255*this.fade,count:this.count,intensity:255*this.intensity,cyclesTimes10:10*this.cycles,gradientTrackOffset:i})}duplicate(e){var t;return new d(Object.assign(Object.assign({},this),{uuid:e,gradient:null===(t=this.gradient)||void 0===t?void 0:t.duplicate()}))}collectGradients(){return this.gradient?[this.gradient]:[]}}t.default=d,n([(0,c.widget)("count"),(0,c.range)(0,10),(0,c.name)("Repeat Count"),c.observable],d.prototype,"count",void 0),n([(0,c.widget)("slider"),(0,c.range)(1,10),(0,c.name)("Cycle Count"),c.observable],d.prototype,"cycles",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Fading Sharpness"),c.observable],d.prototype,"fade",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Intensity"),c.observable],d.prototype,"intensity",void 0),n([(0,c.widget)("faceMask"),(0,c.name)("Face Mask"),c.observable],d.prototype,"faces",void 0),n([(0,c.widget)("gradient"),(0,c.name)("Gradient"),c.observable],d.prototype,"gradient",void 0)},2004:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(1355)),c=i(8879);class d extends s.default{constructor(e){var t;super(e),this.type="gradient",this.faces=null!==(t=null==e?void 0:e.faces)&&void 0!==t?t:o.AnimConstants.faceMaskAll,this.gradient=null==e?void 0:e.gradient}toAnimation(e,t){const i=t.rgbTracks.length;return this.gradient&&t.rgbTracks.push(new l.default({gradient:this.gradient}).toTrack(e,t)),(0,a.safeAssign)(new o.AnimationGradient,{duration:1e3*this.duration,faceMask:this.faces,gradientTrackOffset:i})}duplicate(e){var t;return new d(Object.assign(Object.assign({},this),{uuid:e,gradient:null===(t=this.gradient)||void 0===t?void 0:t.duplicate()}))}collectGradients(){return this.gradient?[this.gradient]:[]}}t.default=d,n([(0,c.widget)("gradient"),(0,c.name)("Gradient"),c.observable],d.prototype,"gradient",void 0),n([(0,c.widget)("faceMask"),(0,c.name)("Face Mask"),c.observable],d.prototype,"faces",void 0)},7668:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(1355)),c=i(8879);class d extends s.default{constructor(e){var t;super(e),this.type="gradientPattern",this.pattern=null==e?void 0:e.pattern,this.gradient=null==e?void 0:e.gradient,this.overrideWithFace=null!==(t=null==e?void 0:e.overrideWithFace)&&void 0!==t&&t}toAnimation(e,t){var i,n;const r=t.rgbTracks.length;return this.gradient&&t.rgbTracks.push(new l.default({gradient:this.gradient}).toTrack(e,t)),(0,a.safeAssign)(new o.AnimationGradientPattern,{duration:1e3*this.duration,tracksOffset:this.pattern?e.getPatternTrackOffset(this.pattern):0,trackCount:null!==(n=null===(i=this.pattern)||void 0===i?void 0:i.gradients.length)&&void 0!==n?n:0,gradientTrackOffset:r,overrideWithFace:this.overrideWithFace})}duplicate(e){var t,i;return new d(Object.assign(Object.assign({},this),{uuid:e,pattern:null===(t=this.pattern)||void 0===t?void 0:t.duplicate(),gradient:null===(i=this.gradient)||void 0===i?void 0:i.duplicate()}))}collectPatterns(){return this.pattern?{grayscale:[this.pattern]}:{}}collectGradients(){return this.gradient?[this.gradient]:[]}}t.default=d,n([(0,c.widget)("grayscalePattern"),(0,c.name)("Grayscale Design"),c.observable],d.prototype,"pattern",void 0),n([(0,c.widget)("gradient"),(0,c.name)("RGB Gradient"),c.observable],d.prototype,"gradient",void 0),n([(0,c.widget)("toggle"),(0,c.name)("Override color based on face"),c.observable],d.prototype,"overrideWithFace",void 0)},5156:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=i(8879);class c extends s.default{constructor(e){super(e),this.type="keyframed",this.pattern=null==e?void 0:e.pattern}toAnimation(e,t){var i,n;return(0,a.safeAssign)(new o.AnimationKeyframed,{animFlags:this.animFlags?1:0,duration:1e3*this.duration,tracksOffset:e.getPatternRGBTrackOffset(this.pattern),trackCount:null!==(n=null===(i=this.pattern)||void 0===i?void 0:i.gradients.length)&&void 0!==n?n:0})}duplicate(e){var t;return new c(Object.assign(Object.assign({},this),{uuid:e,pattern:null===(t=this.pattern)||void 0===t?void 0:t.duplicate()}))}collectPatterns(){return this.pattern?{rgb:[this.pattern]}:{}}}t.default=c,n([(0,l.widget)("rgbPattern"),(0,l.name)("Color Design"),l.observable],c.prototype,"pattern",void 0)},5225:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(1355)),c=i(8879);class d extends s.default{constructor(e){var t,i,n,r,a,s;super(e),this.type="noise",this.gradient=null==e?void 0:e.gradient,this.blinkGradient=null==e?void 0:e.blinkGradient,this.blinkFrequency=null!==(t=null==e?void 0:e.blinkFrequency)&&void 0!==t?t:2,this.blinkFrequencyVar=null!==(i=null==e?void 0:e.blinkFrequencyVar)&&void 0!==i?i:0,this.blinkDuration=null!==(n=null==e?void 0:e.blinkDuration)&&void 0!==n?n:.1,this.fade=null!==(r=null==e?void 0:e.fade)&&void 0!==r?r:0,this.gradientColorType=null!==(a=null==e?void 0:e.gradientColorType)&&void 0!==a?a:o.NoiseColorOverrideTypeValues.none,this.gradientColorVar=null!==(s=null==e?void 0:e.gradientColorVar)&&void 0!==s?s:0}toAnimation(e,t){const i=t.rgbTracks.length;if(this.gradient){const i=new l.default({gradient:this.gradient});t.rgbTracks.push(i.toTrack(e,t))}const n=t.rgbTracks.length;if(this.blinkGradient){const i=new l.default({gradient:this.blinkGradient});t.rgbTracks.push(i.toTrack(e,t))}return(0,a.safeAssign)(new o.AnimationNoise,{duration:1e3*this.duration,gradientTrackOffset:i,blinkTrackOffset:n,blinkFrequencyTimes1000:1e3*this.blinkFrequency,blinkFrequencyVarTimes1000:1e3*this.blinkFrequencyVar,blinkDuration:255*this.blinkDuration,fade:255*this.fade,gradientColorType:this.gradientColorType,gradientColorVar:1e3*this.gradientColorVar})}duplicate(e){var t,i;return new d(Object.assign(Object.assign({},this),{uuid:e,gradient:null===(t=this.gradient)||void 0===t?void 0:t.duplicate(),blinkGradient:null===(i=this.blinkGradient)||void 0===i?void 0:i.duplicate()}))}collectGradients(){const e=[];return this.gradient&&e.push(this.gradient),this.blinkGradient&&e.push(this.blinkGradient),e}}t.default=d,n([(0,c.widget)("gradient"),(0,c.name)("Overall Gradient"),c.observable],d.prototype,"gradient",void 0),n([(0,c.widget)("gradient"),(0,c.name)("Individual Gradient"),c.observable],d.prototype,"blinkGradient",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,60),(0,c.name)("Blink Frequency (Hz)"),c.observable],d.prototype,"blinkFrequency",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,60),(0,c.name)("Blink Frequency Variance (Hz)"),c.observable],d.prototype,"blinkFrequencyVar",void 0),n([(0,c.widget)("slider"),(0,c.range)(.001,.1),(0,c.name)("Blink Duration"),c.observable],d.prototype,"blinkDuration",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Fading Sharpness"),c.observable],d.prototype,"fade",void 0),n([(0,c.widget)("toggle"),(0,c.name)("Override color based on face"),(0,c.values)(o.NoiseColorOverrideTypeValues),c.observable],d.prototype,"gradientColorType",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Override color variance"),c.observable],d.prototype,"gradientColorVar",void 0)},4495:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(1355)),c=i(8879);class d extends s.default{constructor(e){var t,i,n,r,a,s,l;super(e),this.type="normals",this.gradient=null==e?void 0:e.gradient,this.axisGradient=null==e?void 0:e.axisGradient,this.axisScrollSpeed=null!==(t=null==e?void 0:e.axisScrollSpeed)&&void 0!==t?t:0,this.axisScale=null!==(i=null==e?void 0:e.axisScale)&&void 0!==i?i:1,this.axisOffset=null!==(n=null==e?void 0:e.axisOffset)&&void 0!==n?n:0,this.angleGradient=null==e?void 0:e.angleGradient,this.angleScrollSpeed=null!==(r=null==e?void 0:e.angleScrollSpeed)&&void 0!==r?r:0,this.fade=null!==(a=null==e?void 0:e.fade)&&void 0!==a?a:0,this.gradientColorType=null!==(s=null==e?void 0:e.gradientColorType)&&void 0!==s?s:o.NormalsColorOverrideTypeValues.none,this.gradientColorVar=null!==(l=null==e?void 0:e.gradientColorVar)&&void 0!==l?l:0}toAnimation(e,t){const i=t.rgbTracks.length;this.gradient&&t.rgbTracks.push(new l.default({gradient:this.gradient}).toTrack(e,t));const n=t.rgbTracks.length;this.axisGradient&&t.rgbTracks.push(new l.default({gradient:this.axisGradient}).toTrack(e,t));const r=t.rgbTracks.length;return this.angleGradient&&t.rgbTracks.push(new l.default({gradient:this.angleGradient}).toTrack(e,t)),(0,a.safeAssign)(new o.AnimationNormals,{animFlags:this.animFlags,duration:1e3*this.duration,gradientTrackOffset:i,axisGradientTrackOffset:n,angleGradientTrackOffset:r,axisScaleTimes1000:1e3*this.axisScale,axisOffsetTimes1000:1e3*this.axisOffset,axisScrollSpeedTimes1000:1e3*this.axisScrollSpeed,angleScrollSpeedTimes1000:1e3*this.angleScrollSpeed,fade:255*this.fade,mainGradientColorType:this.gradientColorType,mainGradientColorVar:1e3*this.gradientColorVar})}duplicate(e){var t,i,n;return new d(Object.assign(Object.assign({},this),{uuid:e,gradient:null===(t=this.gradient)||void 0===t?void 0:t.duplicate(),axisGradient:null===(i=this.axisGradient)||void 0===i?void 0:i.duplicate(),angleGradient:null===(n=this.angleGradient)||void 0===n?void 0:n.duplicate()}))}collectGradients(){const e=[];return this.gradient&&e.push(this.gradient),this.axisGradient&&e.push(this.axisGradient),this.angleGradient&&e.push(this.angleGradient),e}}t.default=d,n([(0,c.widget)("gradient"),(0,c.name)("Gradient Over Time"),c.observable],d.prototype,"gradient",void 0),n([(0,c.widget)("gradient"),(0,c.name)("Gradient Along Axis"),c.observable],d.prototype,"axisGradient",void 0),n([(0,c.widget)("slider"),(0,c.range)(-10,10),(0,c.name)("Scroll Speed Along Axis"),c.observable],d.prototype,"axisScrollSpeed",void 0),n([(0,c.widget)("slider"),(0,c.range)(-10,10),(0,c.name)("Axis Scale"),c.observable],d.prototype,"axisScale",void 0),n([(0,c.widget)("slider"),(0,c.range)(-10,10),(0,c.name)("Axis Offset"),c.observable],d.prototype,"axisOffset",void 0),n([(0,c.widget)("gradient"),(0,c.name)("Gradient Along Angle"),c.observable],d.prototype,"angleGradient",void 0),n([(0,c.widget)("slider"),(0,c.range)(-10,10),(0,c.name)("Scroll Speed Along Angle"),c.observable],d.prototype,"angleScrollSpeed",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Fading Sharpness"),c.observable],d.prototype,"fade",void 0),n([(0,c.widget)("toggle"),(0,c.name)("Override color based on face"),(0,c.values)(o.NormalsColorOverrideTypeValues),c.observable],d.prototype,"gradientColorType",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Override color variance"),c.observable],d.prototype,"gradientColorVar",void 0)},3383:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=i(8879);class c extends s.default{constructor(e){var t,i,n,r,a;super(e),this.type="rainbow",this.faces=null!==(t=null==e?void 0:e.faces)&&void 0!==t?t:o.AnimConstants.faceMaskAll,this.count=null!==(i=null==e?void 0:e.count)&&void 0!==i?i:1,this.fade=null!==(n=null==e?void 0:e.fade)&&void 0!==n?n:0,this.intensity=null!==(r=null==e?void 0:e.intensity)&&void 0!==r?r:.5,this.cycles=null!==(a=null==e?void 0:e.cycles)&&void 0!==a?a:1}toAnimation(e,t){return(0,a.safeAssign)(new o.AnimationRainbow,{animFlags:this.animFlags,duration:1e3*this.duration,faceMask:this.faces,fade:255*this.fade,count:this.count,intensity:255*this.intensity,cyclesTimes10:10*this.cycles})}duplicate(e){return new c(Object.assign(Object.assign({},this),{uuid:e}))}}t.default=c,n([(0,l.widget)("count"),(0,l.range)(0,10),(0,l.name)("Repeat Count"),l.observable],c.prototype,"count",void 0),n([(0,l.widget)("slider"),(0,l.range)(1,10),(0,l.name)("Cycle Count"),l.observable],c.prototype,"cycles",void 0),n([(0,l.widget)("slider"),(0,l.range)(0,1),(0,l.name)("Fading Sharpness"),l.observable],c.prototype,"fade",void 0),n([(0,l.widget)("slider"),(0,l.range)(0,1),(0,l.name)("Intensity"),l.observable],c.prototype,"intensity",void 0),n([(0,l.widget)("faceMask"),(0,l.name)("Face Mask"),l.observable],c.prototype,"faces",void 0)},1217:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=i(8879);class c extends s.default{constructor(e){var t;super(e),this.type="sequence",this.animations=null!==(t=null==e?void 0:e.animations)&&void 0!==t?t:[]}toAnimation(e,t){const i=new o.AnimationSequence;return i.animationCount=this.animations.length,i.animationCount>0&&(i.animation0Offset=e.animations.indexOf(this.animations[0].animation),i.animation0Delay=1e3*this.animations[0].delay),i.animationCount>1&&(i.animation1Offset=e.animations.indexOf(this.animations[1].animation),i.animation1Delay=1e3*this.animations[1].delay),i.animationCount>2&&(i.animation2Offset=e.animations.indexOf(this.animations[2].animation),i.animation2Delay=1e3*this.animations[2].delay),i.animationCount>3&&(i.animation3Offset=e.animations.indexOf(this.animations[3].animation),i.animation3Delay=1e3*this.animations[3].delay),(0,a.safeAssign)(i,{animFlags:this.animFlags,duration:1e3*this.duration}),i}duplicate(e){return new c(Object.assign(Object.assign({},this),{uuid:e,animations:this.animations.map((e=>e.duplicate()))}))}collectAnimations(){return[this,...this.animations.map((e=>e.animation))]}}t.default=c,n([l.observable],c.prototype,"animations",void 0)},8929:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=i(8879);class o{constructor(e,t){this.animation=e,this.delay=null!=t?t:0}duplicate(){return new o(this.animation,this.delay)}}t.default=o,n([r.observable],o.prototype,"animation",void 0),n([r.observable],o.prototype,"delay",void 0)},5601:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(4135)),l=r(i(8621)),c=i(8879);class d extends s.default{constructor(e){var t,i,n,r;super(e),this.type="simple";const a=null!==(t=null==e?void 0:e.color)&&void 0!==t?t:o.Color.blue;this.faces=null!==(i=null==e?void 0:e.faces)&&void 0!==i?i:o.AnimConstants.faceMaskAll,this.color=a instanceof l.default?a:new l.default(a),this.count=null!==(n=null==e?void 0:e.count)&&void 0!==n?n:1,this.fade=null!==(r=null==e?void 0:e.fade)&&void 0!==r?r:0}toAnimation(e,t){return(0,a.safeAssign)(new o.AnimationSimple,{duration:1e3*this.duration,faceMask:this.faces,colorIndex:this.color.toColorIndex(t.palette),fade:255*this.fade,count:this.count})}duplicate(e){return new d(Object.assign(Object.assign({},this),{uuid:e}))}}t.default=d,n([(0,c.widget)("color"),(0,c.name)("Color"),c.observable],d.prototype,"color",void 0),n([(0,c.widget)("count"),(0,c.range)(1,10),(0,c.name)("Repeat Count"),c.observable],d.prototype,"count",void 0),n([(0,c.widget)("slider"),(0,c.range)(0,1),(0,c.name)("Fading Sharpness"),c.observable],d.prototype,"fade",void 0),n([(0,c.widget)("faceMask"),(0,c.name)("Face Mask"),c.observable],d.prototype,"faces",void 0)},6169:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(7713)),a=i(8879);class s extends o.default{constructor(e){var t;super(e),this.localId=null!==(t=null==e?void 0:e.localId)&&void 0!==t?t:0}duplicate(e){return new s(Object.assign(Object.assign({},this),{uuid:e}))}}t.default=s,n([a.observable],s.prototype,"localId",void 0)},8621:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9749),o=i(1371),a=i(8879);class s{constructor(e){"string"==typeof e?this.mode=e:(this.mode="rgb",this.color=null!=e?e:r.Color.black.duplicate())}toColorIndex(e){var t;switch(this.mode){case"rgb":return s.toColorIndex(e,null!==(t=this.color)&&void 0!==t?t:r.Color.black);case"face":return r.AnimConstants.paletteColorFromFace;case"random":return r.AnimConstants.paletteColorFromRandom;default:(0,o.assertNever)(this.mode,`Unsupported EditColor type: ${this.mode}`)}}static toColorIndex(e,t){const i=r.GammaUtils.gamma(t);let n=e.findIndex((e=>i.equals(e)));return n<0&&(n=e.length,e.push(i)),n}duplicate(){return"rgb"===this.mode?new s(this.color):new s(this.mode)}}t.default=s,n([a.observable],s.prototype,"mode",void 0),n([a.observable],s.prototype,"color",void 0)},1856:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1371);t.default=class{get flagName(){}getFlagName(e,t){if(!e)return;const i=(0,n.getValueKeyName)(e,t);if(i)return i;let r=1;for(e|=0;!(r&e)&&r<=e;)r<<=1;return r<=e?(0,n.getValueKeyName)(r,t):void 0}}},9939:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{get flagName(){return this.getFlagName(this.flags,o.BatteryStateFlagsValues)}constructor(e){var t,i;super(),this.type="battery",this.flags=null!==(t=null==e?void 0:e.flags)&&void 0!==t?t:0,this.recheckAfter=null!==(i=null==e?void 0:e.recheckAfter)&&void 0!==i?i:1}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionBatteryState,{flags:this.flags,repeatPeriodMs:Math.round(1e3*this.recheckAfter)})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("bitField"),(0,l.name)("Battery State"),(0,l.values)(o.BatteryStateFlagsValues),l.observable],c.prototype,"flags",void 0),n([(0,l.widget)("slider"),(0,l.name)("Recheck After"),(0,l.range)(.1,60,.1),(0,l.unit)("s"),l.observable],c.prototype,"recheckAfter",void 0)},4230:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{get flagName(){return this.getFlagName(this.flags,o.ConnectionStateFlagsValues)}constructor(e){var t;super(),this.type="connection",this.flags=null!==(t=null==e?void 0:e.flags)&&void 0!==t?t:0}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionConnectionState,{flags:this.flags})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("bitField"),(0,l.name)("Connection Event"),(0,l.values)(o.ConnectionStateFlagsValues),l.observable],c.prototype,"flags",void 0)},7122:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9749),o=n(i(1856));class a extends o.default{constructor(){super(...arguments),this.type="crooked"}toCondition(e,t){return new r.ConditionCrooked}duplicate(){return new a}}t.default=a},9201:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{get flagName(){return this.getFlagName(this.flags,o.FaceCompareFlagsValues)}constructor(e){var t,i;super(),this.type="faceCompare",this.flags=null!==(t=null==e?void 0:e.flags)&&void 0!==t?t:0,this.face=null!==(i=null==e?void 0:e.face)&&void 0!==i?i:1}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionFaceCompare,{faceIndex:this.face>0?this.face-1:this.face,flags:this.flags})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("bitField"),(0,l.name)("Comparison"),(0,l.values)(o.FaceCompareFlagsValues),l.observable],c.prototype,"flags",void 0),n([(0,l.widget)("face"),(0,l.range)(1,20),(0,l.name)("Than"),l.observable],c.prototype,"face",void 0)},840:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9749),o=n(i(1856));class a extends o.default{constructor(){super(...arguments),this.type="handling"}toCondition(e,t){return new r.ConditionHandling}duplicate(){return new a}}t.default=a},220:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{get flagName(){return this.getFlagName(this.flags,o.HelloGoodbyeFlagsValues)}constructor(e){var t;super(),this.type="helloGoodbye",this.flags=null!==(t=null==e?void 0:e.flags)&&void 0!==t?t:0}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionHelloGoodbye,{flags:this.flags})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("bitField"),(0,l.name)("Hello / Goodbye"),(0,l.values)(o.HelloGoodbyeFlagsValues),l.observable],c.prototype,"flags",void 0)},224:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{constructor(e){var t;super(),this.type="idle",this.period=null!==(t=null==e?void 0:e.period)&&void 0!==t?t:10}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionIdle,{repeatPeriodMs:Math.round(1e3*this.period)})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("slider"),(0,l.range)(.5,30,.5),(0,l.unit)("s"),l.observable],c.prototype,"period",void 0)},9690:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{constructor(e){var t;super(),this.type="rolled",this.faces=null!==(t=null==e?void 0:e.faces)&&void 0!==t?t:[]}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionRolled,{faceMask:c.toFaceMask(this.faces)})}duplicate(){return new c({faces:[...this.faces]})}static toFaceMask(e){let t=0;for(const i of e)t|=1<<i-1;return t}static fromFaceMask(e){const t=[];let i=1;for(;e;)1&e&&t.push(i),e>>=1,++i;return t}}t.default=c,n([l.observable],c.prototype,"faces",void 0)},174:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(1856)),l=i(8879);class c extends s.default{constructor(e){var t;super(),this.type="rolling",this.recheckAfter=null!==(t=null==e?void 0:e.recheckAfter)&&void 0!==t?t:.5}toCondition(e,t){return(0,a.safeAssign)(new o.ConditionRolling,{repeatPeriodMs:Math.round(1e3*this.recheckAfter)})}duplicate(){return new c(this)}}t.default=c,n([(0,l.widget)("slider"),(0,l.range)(.1,5,.1),(0,l.unit)("s"),l.observable],c.prototype,"recheckAfter",void 0)},9886:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9749),o=n(i(9641));t.default=class{constructor(e){var t,i,n,r,a;this.patterns=null!==(t=null==e?void 0:e.patterns)&&void 0!==t?t:[],this.rgbPatterns=null!==(i=null==e?void 0:e.rgbPatterns)&&void 0!==i?i:[],this.animations=null!==(n=null==e?void 0:e.animations)&&void 0!==n?n:[],this.profile=null!==(r=null==e?void 0:e.profile)&&void 0!==r?r:new o.default,this.brightness=null!==(a=null==e?void 0:e.brightness)&&void 0!==a?a:1}getPatternTrackOffset(e){let t=0;for(let i=0;i<this.patterns.length;++i){if(this.patterns[i]===e)return t;t+=e.gradients.length}return-1}getPatternRGBTrackOffset(e){let t=0;if(e)for(let i=0;i<this.rgbPatterns.length;++i){if(this.rgbPatterns[i]===e)return t;t+=e.gradients.length}return-1}toDataSet(){const e=new r.DataSet;for(const t of this.patterns)if(t){const i=t.toTracks(this,e.animationBits);e.animationBits.tracks.push(...i)}for(const t of this.rgbPatterns)if(t){const i=t.toRgbTracks(this,e.animationBits);e.animationBits.rgbTracks.push(...i)}for(const t of this.animations)if(t){const i=t.toAnimation(this,e.animationBits);e.animations.push(i)}return e.brightness=Math.round(255*Math.min(1,Math.max(0,this.brightness))),e.profile=this.profile.toProfile(this,e),e}}},4977:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7713)),l=i(8879);class c extends s.default{get duration(){return this.gradients.length?Math.max(...this.gradients.map((e=>e.duration))):1}constructor(e){var t;super(e),this.gradients=null!==(t=null==e?void 0:e.gradients)&&void 0!==t?t:[]}toRgbTracks(e,t){return this.gradients.map(((i,n)=>{const r=t.rgbKeyframes.length;return t.rgbKeyframes.push(...i.keyframes.map((i=>i.toRgbKeyframe(e,t)))),(0,a.safeAssign)(new o.RgbTrack,{keyframesOffset:r,keyFrameCount:i.keyframes.length,ledMask:1<<n})}))}toTracks(e,t){return this.gradients.map(((i,n)=>{const r=t.keyframes.length;return t.keyframes.push(...i.keyframes.map((i=>i.toKeyframe(e,t)))),(0,a.safeAssign)(new o.Track,{keyframesOffset:r,keyFrameCount:i.keyframes.length,ledMask:1<<n})}))}duplicate(e){return new c(Object.assign(Object.assign({},this),{uuid:e,gradients:this.gradients.map((e=>e.duplicate()))}))}}t.default=c,n([l.observable],c.prototype,"gradients",void 0)},9641:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7036)),l=r(i(7713)),c=i(8879);class d extends l.default{constructor(e){var t,i,n,r,o,a,s;super(e),this.description=null!==(t=null==e?void 0:e.description)&&void 0!==t?t:"",this.rules=null!==(i=null==e?void 0:e.rules)&&void 0!==i?i:[],this.dieType=null!==(n=null==e?void 0:e.dieType)&&void 0!==n?n:"d20",this.colorway=null!==(r=null==e?void 0:e.colorway)&&void 0!==r?r:"onyxBlack",this.brightness=null!==(o=null==e?void 0:e.brightness)&&void 0!==o?o:1,this.creationDate=null!==(a=null==e?void 0:e.creationDate)&&void 0!==a?a:new Date,this.lastChanged=null!==(s=null==e?void 0:e.lastChanged)&&void 0!==s?s:new Date,this.lastUsed=null==e?void 0:e.lastUsed}getRemoteAction(e){var t;const i=e>>8,n=null===(t=this.rules[i])||void 0===t?void 0:t.actions[255&e];return n instanceof s.default?n:void 0}toProfile(e,t){const i=t.rules.length;this.rules.forEach(((i,n)=>t.rules.push(i.toRule(e,t,n))));const n=this.rules.length;return(0,a.safeAssign)(new o.Profile,{rulesOffset:i,rulesCount:n})}duplicate(e){const t=new Date;return new d(Object.assign(Object.assign({},this),{uuid:e,rules:this.rules.map((e=>e.duplicate())),creationDate:t,lastChanged:t,lastUsed:void 0}))}collectAnimations(){const e=[];for(const t of this.rules)for(const i of t.actions)for(const t of i.collectAnimations())e.includes(t)||e.push(t);return e}hasActionOfType(e){return this.rules.some((t=>t.actions.some((t=>t.type===e))))}}t.default=d,n([c.observable],d.prototype,"description",void 0),n([c.observable],d.prototype,"rules",void 0),n([c.observable],d.prototype,"dieType",void 0),n([c.observable],d.prototype,"colorway",void 0),n([c.observable],d.prototype,"brightness",void 0),n([c.observable],d.prototype,"creationDate",void 0),n([c.observable],d.prototype,"lastChanged",void 0),n([c.observable],d.prototype,"lastUsed",void 0)},7249:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(709)),a=r(i(7713)),s=i(8879);class l extends a.default{get empty(){return!this.keyframes.length}get duration(){return this.keyframes.length?Math.max(...this.keyframes.map((e=>e.time))):0}get firstTime(){return this.keyframes.length?this.keyframes[0].time:0}get lastTime(){return this.keyframes.length?this.keyframes[this.keyframes.length-1].time:0}constructor(e){var t;super(e),this.keyframes=null!==(t=null==e?void 0:e.keyframes)&&void 0!==t?t:[]}duplicate(e){return new l({uuid:e,keyframes:this.keyframes.map((e=>e.duplicate()))})}static createFromKeyFrames(e){const t=e.sort(((e,t)=>e.time-t.time)).map((e=>new o.default(e)));return(!t.length||t[0].time>0)&&t.unshift(new o.default({time:0})),(!t.length||e[e.length-1].time<1)&&t.push(new o.default({time:1})),new l({keyframes:t})}}t.default=l,n([s.observable],l.prototype,"keyframes",void 0)},709:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=r(i(8621)),s=i(8879);class l{constructor(e){var t,i;this.time=null!==(t=null==e?void 0:e.time)&&void 0!==t?t:0,this.color=null!==(i=null==e?void 0:e.color)&&void 0!==i?i:o.Color.black.duplicate()}toRgbKeyframe(e,t){const i=new o.RgbKeyframe,n=a.default.toColorIndex(t.palette,this.color);return i.setTimeAndColorIndex(this.time,n),i}toKeyframe(e,t){const i=new o.SimpleKeyframe;return i.setTimeAndIntensity(this.time,255*this.color.desaturate()),i}duplicate(){return new l(Object.assign(Object.assign({},this),{color:this.color.duplicate()}))}}t.default=l,n([s.observable],l.prototype,"time",void 0),n([s.observable],l.prototype,"color",void 0)},1355:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(9749),a=i(1371),s=r(i(7249)),l=i(8879);class c{get empty(){return this.gradient.empty}get duration(){return this.gradient.duration}get firstTime(){return this.gradient.firstTime}get lastTime(){return this.gradient.lastTime}constructor(e){var t,i;this.gradient=null!==(t=null==e?void 0:e.gradient)&&void 0!==t?t:new s.default,this.ledIndices=null!==(i=null==e?void 0:e.ledIndices)&&void 0!==i?i:[]}toTrack(e,t){const i=t.rgbKeyframes.length;for(const i of this.gradient.keyframes)t.rgbKeyframes.push(i.toRgbKeyframe(e,t));return(0,a.safeAssign)(new o.RgbTrack,{keyframesOffset:i,keyFrameCount:this.gradient.keyframes.length,ledMask:this.ledIndices.reduce(((e,t)=>e|1<<t),0)})}}t.default=c,n([l.observable],c.prototype,"ledIndices",void 0),n([l.observable],c.prototype,"gradient",void 0)},335:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9749),o=i(1371),a=i(8879);class s{constructor(e,t){this.uuid=Math.random().toString(),this.condition=e,this.actions=t?Array.isArray(t)?t:[t]:[]}toRule(e,t,i){const n=t.conditions.length;this.condition&&t.conditions.push(this.condition.toCondition(e,t));const a=t.actions.length;let s=i<<8;for(const i of this.actions){const n=i.toAction(e,t,s);++s,t.actions.push(n)}return(0,o.safeAssign)(new r.Rule,{condition:n,actionOffset:a,actionCount:this.actions.length})}duplicate(){var e;return new s(null===(e=this.condition)||void 0===e?void 0:e.duplicate(),this.actions.map((e=>e.duplicate())))}replaceAnimation(e,t){for(const i of this.actions)i.replaceAnimation(e,t)}requiresAnimation(e){return!!this.actions.find((t=>t.requiresAnimation(e)))}}t.default=s,n([a.observable],s.prototype,"condition",void 0),n([a.observable],s.prototype,"actions",void 0)},7713:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=i(8879);class o{get uuid(){return this._uuid}constructor(e){var t,i;this.name=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",this._uuid=null!==(i=null==e?void 0:e.uuid)&&void 0!==i?i:""}}t.default=o,n([(0,r.widget)("string"),(0,r.name)("Name"),r.observable],o.prototype,"name",void 0)},8879:(e,t)=>{"use strict";function i(e,t){var i;return null!==(i=Reflect.getMetadata(e,t))&&void 0!==i?i:[]}function n(e,t,n){Reflect.defineMetadata(e,i(e,t).concat([n]),t)}function r(e,t){return function(i,r){const o=Object.assign({propertyKey:r},t);n(e,i,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPropsWithObservable=t.observable=t.getPropsWithSkipEnum=t.skipEnum=t.getPropsWithDisplayOrder=t.displayOrder=t.getPropsWithWidget=t.widget=t.getPropsWithValues=t.values=t.getPropsWithUnit=t.unit=t.getPropsWithRange=t.range=t.getPropsWithName=t.name=void 0;const o=Symbol.for("PixelsEditAnimationName");t.name=function(e){return r(o,{name:e})},t.getPropsWithName=function(e){return i(o,e)};const a=Symbol.for("PixelsEditAnimationRange");t.range=function(e,t,i){return r(a,{min:e,max:t,step:i})},t.getPropsWithRange=function(e){return i(a,e)};const s=Symbol.for("PixelsEditAnimationUnit");t.unit=function(e){return r(s,{unit:e})},t.getPropsWithUnit=function(e){return i(s,e)};const l=Symbol.for("PixelsEditAnimationValues");t.values=function(e){return r(l,{values:e})},t.getPropsWithValues=function(e){return i(l,e)};const c=Symbol.for("PixelsEditAnimationWidget");t.widget=function(e){return r(c,{type:e})},t.getPropsWithWidget=function(e){return i(c,e)};const d=Symbol.for("PixelsEditAnimationDisplayOrder");t.displayOrder=function(e){return r(d,{index:e})},t.getPropsWithDisplayOrder=function(e){return i(d,e)};const u=Symbol.for("PixelsEditAnimationSkipEnum");t.skipEnum=function(e,t){n(u,e,{propertyKey:t})},t.getPropsWithSkipEnum=function(e){return i(u,e)};const f=Symbol.for("PixelsObservable");t.observable=function(e,t){n(f,e,{propertyKey:t})},t.getPropsWithObservable=function(e){return i(f,e)}},6627:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decorators=t.EditRule=t.EditRgbTrack=t.EditRgbKeyframe=t.EditRgbGradient=t.EditProfile=t.EditPattern=t.EditDataSet=t.EditConditionRolled=t.EditConditionRolling=t.EditConditionIdle=t.EditConditionHelloGoodbye=t.EditConditionHandling=t.EditConditionFaceCompare=t.EditConditionCrooked=t.EditConditionConnectionState=t.EditConditionBatteryState=t.EditCondition=t.EditColor=t.EditAudioClip=t.EditAnimationSequenceItem=t.EditAnimationSequence=t.EditAnimationNormals=t.EditAnimationSimple=t.EditAnimationRainbow=t.EditAnimationNoise=t.EditAnimationKeyframed=t.EditAnimationGradientPattern=t.EditAnimationGradient=t.EditAnimationCycle=t.EditAnimation=t.EditActionSpeakText=t.EditActionRunOnDevice=t.EditActionPlayAudioClip=t.EditActionPlayAnimation=t.EditActionMakeWebRequest=t.EditAction=t.Editable=void 0;const l=o(i(8879));t.decorators=l,a(i(7236),t);var c=i(7713);Object.defineProperty(t,"Editable",{enumerable:!0,get:function(){return s(c).default}});var d=i(4926);Object.defineProperty(t,"EditAction",{enumerable:!0,get:function(){return s(d).default}});var u=i(479);Object.defineProperty(t,"EditActionMakeWebRequest",{enumerable:!0,get:function(){return s(u).default}});var f=i(9422);Object.defineProperty(t,"EditActionPlayAnimation",{enumerable:!0,get:function(){return s(f).default}});var m=i(1068);Object.defineProperty(t,"EditActionPlayAudioClip",{enumerable:!0,get:function(){return s(m).default}});var p=i(7036);Object.defineProperty(t,"EditActionRunOnDevice",{enumerable:!0,get:function(){return s(p).default}});var b=i(4039);Object.defineProperty(t,"EditActionSpeakText",{enumerable:!0,get:function(){return s(b).default}});var h=i(4135);Object.defineProperty(t,"EditAnimation",{enumerable:!0,get:function(){return s(h).default}});var g=i(8217);Object.defineProperty(t,"EditAnimationCycle",{enumerable:!0,get:function(){return s(g).default}});var y=i(2004);Object.defineProperty(t,"EditAnimationGradient",{enumerable:!0,get:function(){return s(y).default}});var v=i(7668);Object.defineProperty(t,"EditAnimationGradientPattern",{enumerable:!0,get:function(){return s(v).default}});var w=i(5156);Object.defineProperty(t,"EditAnimationKeyframed",{enumerable:!0,get:function(){return s(w).default}});var C=i(5225);Object.defineProperty(t,"EditAnimationNoise",{enumerable:!0,get:function(){return s(C).default}});var k=i(3383);Object.defineProperty(t,"EditAnimationRainbow",{enumerable:!0,get:function(){return s(k).default}});var O=i(5601);Object.defineProperty(t,"EditAnimationSimple",{enumerable:!0,get:function(){return s(O).default}});var T=i(4495);Object.defineProperty(t,"EditAnimationNormals",{enumerable:!0,get:function(){return s(T).default}});var _=i(1217);Object.defineProperty(t,"EditAnimationSequence",{enumerable:!0,get:function(){return s(_).default}});var A=i(8929);Object.defineProperty(t,"EditAnimationSequenceItem",{enumerable:!0,get:function(){return s(A).default}});var R=i(6169);Object.defineProperty(t,"EditAudioClip",{enumerable:!0,get:function(){return s(R).default}});var P=i(8621);Object.defineProperty(t,"EditColor",{enumerable:!0,get:function(){return s(P).default}});var x=i(1856);Object.defineProperty(t,"EditCondition",{enumerable:!0,get:function(){return s(x).default}});var j=i(9939);Object.defineProperty(t,"EditConditionBatteryState",{enumerable:!0,get:function(){return s(j).default}});var F=i(4230);Object.defineProperty(t,"EditConditionConnectionState",{enumerable:!0,get:function(){return s(F).default}});var E=i(7122);Object.defineProperty(t,"EditConditionCrooked",{enumerable:!0,get:function(){return s(E).default}});var S=i(9201);Object.defineProperty(t,"EditConditionFaceCompare",{enumerable:!0,get:function(){return s(S).default}});var D=i(840);Object.defineProperty(t,"EditConditionHandling",{enumerable:!0,get:function(){return s(D).default}});var M=i(220);Object.defineProperty(t,"EditConditionHelloGoodbye",{enumerable:!0,get:function(){return s(M).default}});var G=i(224);Object.defineProperty(t,"EditConditionIdle",{enumerable:!0,get:function(){return s(G).default}});var z=i(174);Object.defineProperty(t,"EditConditionRolling",{enumerable:!0,get:function(){return s(z).default}});var V=i(9690);Object.defineProperty(t,"EditConditionRolled",{enumerable:!0,get:function(){return s(V).default}});var W=i(9886);Object.defineProperty(t,"EditDataSet",{enumerable:!0,get:function(){return s(W).default}});var I=i(4977);Object.defineProperty(t,"EditPattern",{enumerable:!0,get:function(){return s(I).default}});var U=i(9641);Object.defineProperty(t,"EditProfile",{enumerable:!0,get:function(){return s(U).default}});var B=i(7249);Object.defineProperty(t,"EditRgbGradient",{enumerable:!0,get:function(){return s(B).default}});var N=i(709);Object.defineProperty(t,"EditRgbKeyframe",{enumerable:!0,get:function(){return s(N).default}});var L=i(1355);Object.defineProperty(t,"EditRgbTrack",{enumerable:!0,get:function(){return s(L).default}});var K=i(335);Object.defineProperty(t,"EditRule",{enumerable:!0,get:function(){return s(K).default}})},6849:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractKeyframes=void 0;const n=i(9749),r=i(6627);t.extractKeyframes=function(e,t=Math.sqrt(.2)){const i=[],o=(t,i)=>{const r=e[t],o=e[i];let a=0;for(let s=t;s<=i;++s){const l=(s-t)/(i-t);a+=n.ColorUtils.sqrDistance(e[s],n.ColorUtils.lerp(r,o,l))}return a};i.push(new r.EditRgbKeyframe({time:0,color:e[0]}));const a=t*t;let s=0,l=1;for(;l<e.length;){for(;l<e.length&&o(s,l)<a;)++l;l>s+1&&--l,i.push(new r.EditRgbKeyframe({time:(c=l,2*c*.001),color:e[l]})),s=l,++l}var c;return i}},5049:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditWidgetsData=void 0;const n=i(1371),r=i(6627);t.getEditWidgetsData=function(e,t){const i=null==t?void 0:t.exclude,o=null==t?void 0:t.onUpdate,a=Object.entries(e),s=r.decorators.getPropsWithWidget(e);return(i&&i.length>0?s.filter((e=>i.indexOf(e.propertyKey)<0)):s).map((({type:t,propertyKey:i})=>{var s,l,c,d;const u=i,f=a.find((e=>e[0]===u));(0,n.assert)(f,`getEditWidgetsData: missing property ${i}`);const m=f[1],p=()=>e[u],b=t=>{const i=e[u];t!==i&&(e[u]=t,null==o||o(u,t,i))},h={propertyKey:i,displayName:null!==(l=null===(s=r.decorators.getPropsWithName(e).find((e=>e.propertyKey===i)))||void 0===s?void 0:s.name)&&void 0!==l?l:i};switch(t){case"toggle":return(0,n.assert)("boolean"==typeof m,`Property is not a boolean: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"string":return(0,n.assert)("string"==typeof m,`Property is not a string: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"count":case"slider":case"face":case"playbackFace":case"bitField":{(0,n.assert)("number"==typeof m,`Property is not a number: ${i}`);const o=r.decorators.getPropsWithRange(e).find((e=>e.propertyKey===i)),s=null===(c=r.decorators.getPropsWithUnit(e).find((e=>e.propertyKey===i)))||void 0===c?void 0:c.unit,l=Object.assign(Object.assign(Object.assign({},o),h),{unit:s,getValue:p,update:b});if("bitField"===t){const o=null===(d=r.decorators.getPropsWithValues(e).find((e=>e.propertyKey===i)))||void 0===d?void 0:d.values;return(0,n.assert)(o,`Missing values decorator on bitField property ${a[0]}`),Object.assign(Object.assign({},l),{type:t,values:o})}return Object.assign(Object.assign({},l),{type:t})}case"faceMask":{(0,n.assert)("number"==typeof m,`Property is not a number: ${i}`);const o=r.decorators.getPropsWithRange(e).find((e=>e.propertyKey===i));return Object.assign(Object.assign(Object.assign({},o),h),{type:t,getValue:p,update:b})}case"color":return(0,n.assert)(m instanceof r.EditColor,`Property is not an EditColor: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"gradient":return(0,n.assert)(void 0===m||m instanceof r.EditRgbGradient,`Property is not an EditRgbGradient: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"grayscalePattern":case"rgbPattern":return(0,n.assert)(void 0===m||m instanceof r.EditPattern,`Property is not an EditPattern: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"animation":return(0,n.assert)(void 0===m||m instanceof r.EditAnimation,`Property is not an EditAnimation: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"audioClip":return(0,n.assert)(void 0===m||m instanceof r.EditAudioClip,`Property is not an EditAudioClip: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});case"userText":return(0,n.assert)(void 0===m||"string"==typeof m,`Property is not a string: ${i}`),Object.assign(Object.assign({},h),{type:t,getValue:p,update:b});default:(0,n.assertNever)(t,`Unsupported widget type ${t}`)}}))}},3368:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppDataSet=t.Serializable=t.Json=void 0;const l=o(i(5770));t.Json=l;const c=o(i(3089));t.Serializable=c,a(i(9749),t);var d=i(8690);Object.defineProperty(t,"AppDataSet",{enumerable:!0,get:function(){return s(d).default}}),a(i(6647),t),a(i(6627),t),a(i(6849),t),a(i(5049),t),a(i(5749),t),a(i(8547),t)},5770:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypeValues=t.ConditionTypeValues=t.AnimationTypeValues=void 0;const n=i(1371);t.AnimationTypeValues={none:(0,n.enumValue)(0),simple:(0,n.enumValue)(),rainbow:(0,n.enumValue)(),keyframed:(0,n.enumValue)(),gradientPattern:(0,n.enumValue)(),gradient:(0,n.enumValue)()},t.ConditionTypeValues={none:(0,n.enumValue)(0),helloGoodbye:(0,n.enumValue)(),handling:(0,n.enumValue)(),rolling:(0,n.enumValue)(),faceCompare:(0,n.enumValue)(),crooked:(0,n.enumValue)(),connectionState:(0,n.enumValue)(),batteryState:(0,n.enumValue)(),idle:(0,n.enumValue)()},t.ActionTypeValues={none:(0,n.enumValue)(0),playAnimation:(0,n.enumValue)(),playAudioClip:(0,n.enumValue)()}},8851:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrebuildAnimationsExt=t.PrebuildAnimations=void 0;const n=i(9749),r=i(6627),o=n.AnimationFlagsValues.useLedIndices,a=n.AnimationFlagsValues.traveling|o,s=r.EditAnimationSimple,l=r.EditAnimationRainbow,c=r.EditAnimationCycle,d=r.EditAnimationNormals,u=r.EditAnimationNoise,f=r.EditAnimationSequence,m=r.EditAnimationSequenceItem,p=r.EditRgbKeyframe,b=n.NoiseColorOverrideTypeValues,h=n.NormalsColorOverrideTypeValues;t.PrebuildAnimations={rainbow:new l({uuid:"6c1b35a7-1dfd-43b3-84d4-f4b5074aa279",name:"Rainbow",category:"colorful",duration:5,animFlags:a,count:4,fade:.1,intensity:1,cycles:1}),rainbowAurora:new l({uuid:"45cb423b-443d-49f7-a2cd-2795ee7e44af",name:"Rainbow Aurora",category:"colorful",duration:5,animFlags:a,count:4,fade:.1,intensity:.2,cycles:1}),rainbowFast:new l({uuid:"f5299da4-ab0c-482d-ba10-ac13e6ac2bb3",name:"Rainbow Fast",category:"flashy",duration:3,animFlags:a,count:9,fade:.1,intensity:1,cycles:3}),rainbowAllFaces:new l({uuid:"1aa50313-d186-43a9-b93d-68da5efa7cc2",name:"Rainbow All Faces",category:"colorful",duration:5,count:4,intensity:1,fade:.1}),rainbowAllFacesAurora:new l({uuid:"24435508-a485-4c4e-b676-f7882029dbda",name:"Rainbow All Faces Aurora",category:"colorful",duration:5,count:4,intensity:.2,fade:.1}),rainbowAllFacesFast:new l({uuid:"18a95b8a-ad0e-4f47-80b3-953e8c06d4d7",name:"Rainbow All Faces Fast",category:"flashy",duration:3,count:9,intensity:1,fade:.1}),fixedRainbow:new l({uuid:"391a31f9-38d5-4ceb-abaf-4e8e40d5e8e0",name:"Fixed Rainbow",category:"colorful",duration:5,animFlags:a,count:0,fade:.1,cycles:2}),fixedRainbowD4:new l({uuid:"6d91261e-ab23-47a9-bd7b-a9a7f98a4ea0",name:"Fixed Rainbow D4",category:"colorful",dieType:"d4",duration:10,faces:(0,n.getFaceMask)([1,4,5,6],"d6"),animFlags:a,count:0,fade:.05,cycles:3.67,intensity:.1}),cycleFire:new c({uuid:"0d44ed15-4f78-4833-9986-cc569a9e6325",name:"Cycle Fire",category:"flashy",duration:3,animFlags:o,count:5,fade:.5,intensity:1,cycles:1.5,gradient:new r.EditRgbGradient({uuid:"16b37bdc-741d-4766-9e33-51c3bf4c2e46",keyframes:[new p({time:0,color:new n.Color(1,.5,0)}),new p({time:.1,color:new n.Color(1,.8,0)}),new p({time:.2,color:n.Color.black}),new p({time:.3,color:new n.Color(1,.8,.7)}),new p({time:.5,color:new n.Color(1,.8,0)}),new p({time:.8,color:new n.Color(1,.5,0)})]})}),cycleWater:new c({uuid:"64b0edf8-fd2a-4cbd-895f-a037daaaa8d7",name:"Cycle Water",category:"flashy",duration:3,animFlags:o,count:6,fade:.5,intensity:1,cycles:1,gradient:new r.EditRgbGradient({uuid:"471c4265-d651-4adf-92d7-19d28c4e0a5d",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:new n.Color(.3,.3,1)}),new p({time:.3,color:new n.Color(.7,.7,1)}),new p({time:.5,color:new n.Color(.5,.5,1)}),new p({time:.8,color:n.Color.black})]})}),cycleMagic:new c({uuid:"7d1d627f-df35-408d-a3f3-a13c2f7546b9",name:"Cycle Magic",category:"flashy",duration:3,animFlags:o,count:5,fade:.5,intensity:1,cycles:5,gradient:new r.EditRgbGradient({uuid:"823c1e94-d3f0-4f3e-81d1-27a43578cf01",keyframes:[new p({time:0,color:n.Color.brightBlue}),new p({time:.4,color:n.Color.fromString("#e5a8f5")}),new p({time:.5,color:n.Color.fromString("#5e3097")}),new p({time:.7,color:n.Color.fromString("#9f63a9")}),new p({time:1,color:n.Color.brightBlue})]})}),redBlueWorm:new c({uuid:"e778287e-4649-4eb0-bba3-5454550686e6",name:"Red Blue Worm",category:"animated",duration:5,animFlags:o,count:6,fade:.5,intensity:1,cycles:.8,gradient:new r.EditRgbGradient({uuid:"01089264-ddab-43dc-836d-71797d2159bb",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.05,color:n.Color.brightRed}),new p({time:.1,color:new n.Color(.3,.3,1)}),new p({time:.8,color:n.Color.black})]})}),greenBlueWorm:new c({uuid:"336daf1b-3497-4838-a73b-fd6d80093cab",name:"Green Blue Worm",category:"animated",duration:5,animFlags:o,count:6,fade:.5,intensity:1,cycles:.8,gradient:new r.EditRgbGradient({uuid:"d234ae71-2970-4c93-92b5-fe9ad1417031",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.05,color:n.Color.brightGreen}),new p({time:.1,color:new n.Color(.3,.3,1)}),new p({time:.8,color:n.Color.black})]})}),pinkWorm:new c({uuid:"24dd6ece-614e-4855-8446-fca6cdd5f960",name:"Pink Worm",category:"animated",duration:5,animFlags:o,count:6,fade:.5,intensity:1,cycles:.8,gradient:new r.EditRgbGradient({uuid:"f25a7250-2a9b-440f-ae31-ccc728423ade",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.05,color:n.Color.brightWhite}),new p({time:.15,color:new n.Color(1,.5,.5)}),new p({time:.8,color:n.Color.black})]})}),waterWorm:new c({uuid:"6b3d50eb-f357-47ee-91f6-4ee5ff154a27",name:"Water Worm",category:"animated",duration:2,animFlags:o,count:2,fade:.5,intensity:1,cycles:.8,gradient:new r.EditRgbGradient({uuid:"879cf3fa-528f-4c7c-a538-2ecdc8c7a64a",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.05,color:n.Color.fromString("#0945ee")}),new p({time:.15,color:n.Color.fromString("#a2cffc")}),new p({time:.25,color:n.Color.fromString("#09aaed")}),new p({time:.8,color:n.Color.black})]})}),waterfall:new d({uuid:"ab516f76-fe89-48a6-8b11-35f997d31197",name:"Waterfall",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"f66670ba-4003-40fb-b200-35fb8b26d1c3",keyframes:[new p({time:0,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"2c8546e0-b117-4130-aefa-31bfa357c2c5",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScale:2,axisOffset:-.5,axisScrollSpeed:2,angleGradient:new r.EditRgbGradient({uuid:"7cfd3bf8-0277-4cd6-8ce1-2bf772675595",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.1,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.1}),waterfallTopHalf:new d({uuid:"ebfc1dd5-ec82-45ac-a653-db2fbb96e5c1",name:"Waterfall Top Half",category:"animated",duration:.5,gradient:new r.EditRgbGradient({uuid:"a605f556-2021-4e6a-ac46-f727c757d190",keyframes:[new p({time:0,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"baa08d00-3e00-4ba8-8746-c971b158e52a",keyframes:[new p({time:.2,color:n.Color.black}),new p({time:1,color:n.Color.brightWhite})]}),axisScale:1,axisOffset:0,axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"f683f7ea-9efb-4fc8-8b22-953293fdd192",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.5,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.1}),waterfallRedGreen:new d({uuid:"3ac00114-1867-4b8f-97d5-86783521c48b",name:"Waterfall Red Green",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"b6357964-3c51-4c6e-8192-754ba1154526",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightRed}),new p({time:.5,color:n.Color.brightYellow}),new p({time:.9,color:n.Color.brightGreen}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"2879fd24-a914-4011-aecf-24118df9e91d",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScale:2,axisOffset:-.5,axisScrollSpeed:2,angleGradient:new r.EditRgbGradient({uuid:"520100f1-a78e-41be-afa7-4d61f38bad1e",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.1,gradientColorType:h.faceToGradient,gradientColorVar:.2}),waterfallRainbow:new d({uuid:"971ddd9f-a37d-4649-b03a-909fae9a966a",name:"Waterfall Rainbow",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"63ce8f0d-7db4-4880-ad10-34d103a3d7e7",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"97cf792e-43ba-455c-8a13-e4ea40c661c6",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.2,color:n.Color.brightYellow}),new p({time:.4,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.8,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightMagenta})]}),axisScale:2,axisOffset:-.5,axisScrollSpeed:2,angleGradient:new r.EditRgbGradient({uuid:"77cd6382-8aa1-4f16-992a-ff89408cc492",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.5}),spinning:new d({uuid:"e655e6e1-32c3-407b-a154-15ceef54c9f3",name:"Spinning",category:"animated",duration:3,gradient:new r.EditRgbGradient({uuid:"739e3d1a-388d-437b-9af6-8f9524e41ce5",keyframes:[new p({time:0,color:n.Color.brightWhite})]}),gradientColorType:h.faceToRainbowWheel,gradientColorVar:.1,axisGradient:new r.EditRgbGradient({uuid:"97d98e28-c0ad-43b6-be04-77438c33892f",keyframes:[new p({time:0,color:n.Color.brightWhite})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"40491707-2e5d-4fd9-8f95-a8462415d41a",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:.3,color:n.Color.white}),new p({time:.5,color:n.Color.black}),new p({time:.7,color:n.Color.white}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:8,fade:.5}),spinningRainbow:new d({uuid:"c7a041f3-f9e1-448c-94d3-a7f019ced0c4",name:"Spinning Rainbow",category:"animated",duration:5,gradient:new r.EditRgbGradient({uuid:"52d758f7-2152-4b9a-bce4-5754fc6b2192",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"784e8a01-8784-4e7c-b3b8-b98fc0b91c45",keyframes:[new p({time:0,color:n.Color.white}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.white})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"c89728f7-4ddf-4d05-818d-e57e200f9741",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.333,color:n.Color.brightGreen}),new p({time:.666,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightRed})]}),angleScrollSpeed:10}),spinningRainbowAurora:new d({uuid:"d0e73d74-333e-4634-b30e-e078b376d789",name:"Spinning Rainbow Aurora",category:"animated",duration:5,gradient:new r.EditRgbGradient({uuid:"89de8ff5-8d6f-4739-8d7f-3098b8da8fa4",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.white}),new p({time:.9,color:n.Color.white}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"a4777dcc-5dad-485a-b2aa-c8ac7936b4a4",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"6fafcb4e-4d53-458a-8435-261830ca19a9",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.333,color:n.Color.brightGreen}),new p({time:.666,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightRed})]}),angleScrollSpeed:10}),whiteRose:new d({uuid:"c43226ad-2b96-451c-9e12-896cb14b3920",name:"White Rose",category:"uniform",duration:5,gradient:new r.EditRgbGradient({uuid:"ba0b68a3-cb80-4e2e-8efd-d16d71897614",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"4d6d3afe-0412-48b2-8be6-c690ce401524",keyframes:[new p({time:0,color:new n.Color(1,0,.2)}),new p({time:.5,color:new n.Color(1,.5,.5)}),new p({time:1,color:n.Color.brightWhite})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"eb60e4b9-b479-4e65-a4f0-b0843a5aaccb",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0}),fireViolet:new d({uuid:"b39f9e2d-1709-4a8a-9014-7e86e6940b49",name:"Fire Violet",category:"animated",duration:5,gradient:new r.EditRgbGradient({uuid:"7337d9f5-bc77-4fdc-a427-36cf242ba037",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"9b87c453-9a8e-488c-bee7-a2b4e1e15280",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.3,color:new n.Color(.5,.2,1)}),new p({time:.5,color:new n.Color(1,.5,0)}),new p({time:.8,color:new n.Color(1,.8,.5)}),new p({time:.92,color:new n.Color(1,.8,.5)}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"34f4875a-86b8-47ca-a5b1-bcb4e33f00ff",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),angleScrollSpeed:0}),quickGreen:new d({uuid:"f1defafe-5e44-4da2-9f71-bc37a8f55331",name:"Quick Green",category:"uniform",duration:1,gradient:new r.EditRgbGradient({uuid:"d7e59ec1-f788-443c-8ebe-cb14a2f020f2",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"34bf5368-5092-421b-80bf-1757e9013ee3",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.3,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.9,color:n.Color.blue}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:-2,axisOffset:0,angleGradient:new r.EditRgbGradient({uuid:"2968e33a-110d-4b5a-a0c1-bbb884e6d397",keyframes:[new p({time:.5,color:n.Color.brightWhite})]}),angleScrollSpeed:10,fade:.5}),quickRed:new d({uuid:"a09df89c-af86-4f62-87a4-a77930ccbc2a",name:"Quick Red",category:"uniform",duration:1,gradient:new r.EditRgbGradient({uuid:"bf2268f1-2249-4bb4-a997-c1fde932ef26",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"23dcedbe-a58e-4f40-9640-b84e600bca57",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.3,color:n.Color.brightRed}),new p({time:.6,color:n.Color.brightPurple}),new p({time:.9,color:n.Color.brightBlue}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:-2,axisOffset:0,angleGradient:new r.EditRgbGradient({uuid:"5471e3f9-fade-47fd-ab1a-883110c957cc",keyframes:[new p({time:.5,color:n.Color.brightWhite})]}),angleScrollSpeed:10,fade:.5}),reverseQuickRed:new d({uuid:"f255a082-13ca-48ab-bed0-38292d797f25",name:"Reverse Quick Red",category:"uniform",duration:1,gradient:new r.EditRgbGradient({uuid:"e3510dd7-a139-4adf-8778-8528d8adceaf",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"373e27b9-fc88-40b8-9e8c-b261009aa8d2",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightBlue}),new p({time:.4,color:n.Color.brightPurple}),new p({time:.7,color:n.Color.brightRed}),new p({time:1,color:n.Color.brightRed})]}),axisScrollSpeed:2,axisOffset:-1,angleGradient:new r.EditRgbGradient({uuid:"1ff81af9-234c-471c-a3fe-acc11e54011b",keyframes:[new p({time:.5,color:n.Color.brightWhite})]}),angleScrollSpeed:10,fade:.5}),reverseQuickGreen:new d({uuid:"769c3fbd-d7fb-4a3d-9eda-1731e6565fa4",name:"Reverse Quick Green",category:"uniform",duration:1,gradient:new r.EditRgbGradient({uuid:"fc298ee4-fdb8-4c43-93d6-e4d5a7c9898a",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"a59b63cd-5059-4f6a-aa0d-383a96b24a0e",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightBlue}),new p({time:.4,color:n.Color.brightCyan}),new p({time:.7,color:n.Color.brightGreen}),new p({time:1,color:n.Color.brightGreen})]}),axisScrollSpeed:2,axisOffset:-1,angleGradient:new r.EditRgbGradient({uuid:"0172e98f-3cf2-4775-aca9-3e36a0f1ae55",keyframes:[new p({time:.5,color:n.Color.brightWhite})]}),angleScrollSpeed:10,fade:.5}),redGreenAlarm:new d({uuid:"0488c178-ecbb-4929-a633-e5b5ec27e39c",name:"Red Green Alarm",category:"uniform",duration:2,gradient:new r.EditRgbGradient({uuid:"79aa20f2-9e6c-4071-a063-3d66cd7e8075",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.4,color:n.Color.brightRed}),new p({time:.6,color:n.Color.brightGreen}),new p({time:1,color:n.Color.brightGreen})]}),axisGradient:new r.EditRgbGradient({uuid:"dc454941-8abf-4daf-b0fe-d36d66657e1f",keyframes:[new p({time:0,color:n.Color.brightWhite})]}),axisScale:1,axisOffset:0,axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"5455cca8-fac9-48eb-98a8-9ce5d29a73b0",keyframes:[new p({time:0,color:n.Color.white}),new p({time:.2,color:n.Color.brightWhite}),new p({time:.4,color:n.Color.white}),new p({time:.5,color:n.Color.white}),new p({time:.7,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.white})]}),angleScrollSpeed:5,fade:.2,gradientColorType:h.faceToGradient}),rainbowAlarm:new d({uuid:"0477be62-73c9-4591-a2fe-d8db52f2712a",name:"Rainbow Alarm",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"5db313d4-9c68-40be-97bf-c6c9f2c760bd",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),axisGradient:new r.EditRgbGradient({uuid:"772cca69-27ad-4278-80ef-c879e7f0f621",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.2,color:n.Color.brightYellow}),new p({time:.4,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.8,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightMagenta})]}),axisScale:2,axisOffset:-.5,axisScrollSpeed:2,angleGradient:new r.EditRgbGradient({uuid:"c6c4950f-1f70-4f55-808d-621b00aceb31",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.5,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),angleScrollSpeed:5,fade:.1}),spiralUp:new d({uuid:"b28682d0-fffd-4a07-b723-dbb127309c23",name:"Spiral Up",category:"animated",duration:1.5,gradient:new r.EditRgbGradient({uuid:"f6bb8290-bf81-49ca-adf8-7d5908e9c4d0",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),axisGradient:new r.EditRgbGradient({uuid:"7348af43-b94e-42ad-88fc-b55e0f05391c",keyframes:[new p({time:.2,color:n.Color.black}),new p({time:.45,color:n.Color.brightWhite}),new p({time:.55,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),axisScale:1,axisOffset:1.1,axisScrollSpeed:-2.2,angleGradient:new r.EditRgbGradient({uuid:"ba6204bd-4abf-497f-bc96-f8e5d95e1052",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),angleScrollSpeed:6,fade:.2,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.2}),spiralDown:new d({uuid:"17c75b18-b186-4a4e-ade0-bf94f658d6db",name:"Spiral Down",category:"animated",duration:1.5,gradient:new r.EditRgbGradient({uuid:"31b4efd6-345e-4c8b-bc20-848ec9495584",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),axisGradient:new r.EditRgbGradient({uuid:"c2b28262-7374-467c-903a-f2dc7c31e078",keyframes:[new p({time:.2,color:n.Color.black}),new p({time:.45,color:n.Color.brightWhite}),new p({time:.55,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),axisScale:1,axisOffset:-1.2,axisScrollSpeed:2.2,angleGradient:new r.EditRgbGradient({uuid:"06abbbb4-5c54-4609-bf6a-f5beb559c21a",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),angleScrollSpeed:6,fade:.2,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.2}),rainbowUp:new d({uuid:"261b9bc7-9017-4950-b18d-1e95958664c1",name:"Rainbow Up",category:"animated",duration:3,gradient:new r.EditRgbGradient({uuid:"7df591a7-b3a0-4a63-8e99-79402c896af3",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),axisGradient:new r.EditRgbGradient({uuid:"82ec56ec-402b-4d6d-bdb0-dbed8848944c",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.2,color:n.Color.brightYellow}),new p({time:.4,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.8,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightMagenta})]}),axisScale:1,axisOffset:.8,axisScrollSpeed:-2.2,angleGradient:new r.EditRgbGradient({uuid:"00248f71-9418-41e2-b31e-78816450814b",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),angleScrollSpeed:6,fade:.2,gradientColorType:h.none,gradientColorVar:.1}),rainbowDown:new d({uuid:"de34bb09-b533-4bc9-b68a-ac65a773124f",name:"Rainbow Down",category:"animated",duration:3,gradient:new r.EditRgbGradient({uuid:"3ccd1b51-f05c-4547-985f-f0154f42a1c2",keyframes:[new p({time:0,color:n.Color.brightWhite}),new p({time:1,color:n.Color.brightWhite})]}),axisGradient:new r.EditRgbGradient({uuid:"27d212ed-6d58-461f-96e7-d4c8c423b629",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.2,color:n.Color.brightYellow}),new p({time:.4,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.8,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightMagenta})]}),axisScale:1,axisOffset:-.8,axisScrollSpeed:2.2,angleGradient:new r.EditRgbGradient({uuid:"0ad8b80f-0e82-4767-a584-14459588e07d",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.black})]}),angleScrollSpeed:6,fade:.2,gradientColorType:h.none,gradientColorVar:.1}),noise:new u({uuid:"61785d78-a642-461f-8dc1-1f0fb2dddd29",name:"Noise",category:"flashy",duration:2,gradient:new r.EditRgbGradient({uuid:"7aa5f0c4-f558-4adc-ad55-b1b765f9a727",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.333,color:n.Color.brightGreen}),new p({time:.666,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightRed})]}),blinkGradient:new r.EditRgbGradient({uuid:"fbf33718-46a5-40ba-a421-bfa9dade3ace",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.mediumWhite}),new p({time:1,color:n.Color.faintWhite})]}),blinkFrequency:50,blinkFrequencyVar:0,blinkDuration:2,fade:.5,gradientColorType:b.faceToRainbowWheel,gradientColorVar:.02}),noiseRainbow:new u({uuid:"fb06e79f-d01d-4597-a104-76169eca1200",name:"Noise Rainbow",category:"flashy",duration:2,gradient:new r.EditRgbGradient({uuid:"625907aa-f086-481e-a88a-e09b1737dcd4",keyframes:[new p({time:0,color:n.Color.brightBlue}),new p({time:.333,color:n.Color.brightRed}),new p({time:.666,color:n.Color.brightGreen}),new p({time:1,color:n.Color.brightBlue})]}),blinkGradient:new r.EditRgbGradient({uuid:"ce4dd255-87b9-4365-a839-8d61217336c2",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.mediumWhite}),new p({time:1,color:n.Color.faintWhite})]}),blinkFrequency:40,blinkFrequencyVar:0,blinkDuration:2,fade:.1}),rainbowNoise:new u({uuid:"ee66f25b-b7fb-45a7-9a17-59db258327e5",name:"Rainbow Noise",category:"flashy",duration:5,gradient:new r.EditRgbGradient({uuid:"ba250e94-a36e-4246-afe4-ede300490d4a",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.2,color:n.Color.brightYellow}),new p({time:.4,color:n.Color.brightGreen}),new p({time:.6,color:n.Color.brightCyan}),new p({time:.8,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightMagenta})]}),blinkGradient:new r.EditRgbGradient({uuid:"8e331458-611a-4fc8-8683-2a224f3386b2",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.white}),new p({time:.2,color:n.Color.mediumWhite}),new p({time:1,color:n.Color.faintWhite})]}),blinkFrequency:50,blinkFrequencyVar:0,blinkDuration:2,fade:.1,gradientColorType:b.randomFromGradient,gradientColorVar:0}),shortNoise:new u({uuid:"5575de5a-2059-48c1-a08a-99ecc19b775c",name:"Short Noise",category:"flashy",duration:1,gradient:new r.EditRgbGradient({uuid:"7069439d-c69d-48e1-87cd-9566071c995f",keyframes:[new p({time:0,color:n.Color.brightRed}),new p({time:.333,color:n.Color.brightGreen}),new p({time:.666,color:n.Color.brightBlue}),new p({time:1,color:n.Color.brightRed})]}),blinkGradient:new r.EditRgbGradient({uuid:"92047fd6-a292-4a3c-b2f2-0ea77a166a9b",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.mediumWhite}),new p({time:1,color:n.Color.faintWhite})]}),blinkFrequency:20,blinkFrequencyVar:0,blinkDuration:1,fade:.1,gradientColorType:b.faceToRainbowWheel,gradientColorVar:.1}),blueFlash:new s({uuid:"5cc7bcb8-1d89-4a1f-b3a0-ad7661c0564e",name:"Blue Flash",category:"uniform",duration:1,color:n.Color.blue,fade:.5}),fountain:new d({uuid:"c30e296b-422a-4713-9bb4-85c2fcee56d8",name:"Fountain",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"596470ab-df75-4b56-8780-d39213962a5b",keyframes:[new p({time:0,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"3f48cf69-16b0-417b-b653-a1086f466030",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.white}),new p({time:.3,color:n.Color.brightWhite}),new p({time:.4,color:n.Color.black}),new p({time:.5,color:n.Color.white}),new p({time:.6,color:n.Color.black}),new p({time:.7,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.white}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScale:2,axisOffset:1,axisScrollSpeed:-2,angleGradient:new r.EditRgbGradient({uuid:"1d5a79df-e9f4-46bf-9642-f40a0f0de0bb",keyframes:[new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.5,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.1}),rainbowFountain:new d({uuid:"42613ce9-12fb-4973-8e38-cc0765d980f1",name:"Rainbow Fountain",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"5f73c7eb-087c-4cb9-af94-f64af552aeb8",keyframes:[new p({time:0,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"162a30e8-1fe4-4316-90e3-ea89c9404c21",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.white}),new p({time:.3,color:n.Color.brightWhite}),new p({time:.4,color:n.Color.white}),new p({time:.5,color:n.Color.black}),new p({time:.6,color:n.Color.white}),new p({time:.7,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.white}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScale:2,axisOffset:1,axisScrollSpeed:-2,angleGradient:new r.EditRgbGradient({uuid:"3aaf600e-6520-4eeb-a429-eade7f8a1f6f",keyframes:[new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite})]}),angleScrollSpeed:0,fade:.5,gradientColorType:h.faceToRainbowWheel,gradientColorVar:.5}),whiteFlash:new s({uuid:"066b1705-99be-4c0a-af64-313f47ccefa3",name:"White Flash",category:"uniform",duration:.3,color:n.Color.brightWhite,count:1,fade:.5}),coloredFlash:new s({uuid:"4e1dd558-2266-4c4d-9a26-05aacee66801",name:"Colored Flash",category:"uniform",duration:.5,color:new r.EditColor("face"),count:1,fade:.5}),alternatingWhite1_d20:new s({uuid:"1e891121-49ef-4ffd-b4a5-f8093c11a0d4",name:"Alternate White 1",category:"uniform",duration:3,color:n.Color.brightWhite,count:5,fade:1,faces:(0,n.getFaceMask)([2,14,8,1,3,17,5,15,9,11],"d20"),dieType:"d20"}),alternatingWhite2_d20:new s({uuid:"8de9d84a-2185-42e2-b130-7d3d662ac5c8",name:"Alternate White 2",category:"uniform",duration:3,color:n.Color.brightWhite,count:5,fade:.5,faces:(0,n.getFaceMask)([4,6,7,10,12,13,16,18,19,20],"d20"),dieType:"d20"}),fireBaseLayer:new d({uuid:"483b590a-f011-47f1-b569-a922833b34a4",name:"Fire Base Layer",category:"animated",duration:4.5,gradient:new r.EditRgbGradient({uuid:"66fdddde-6c6a-4f67-873b-3c48086803a3",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.7,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"26ba6f64-eec7-440d-ab79-b846666bc852",keyframes:[new p({time:0,color:n.Color.fromString("#fce7b3")}),new p({time:.1,color:n.Color.fromString("#fad068")}),new p({time:.3,color:n.Color.fromString("#f1a204")}),new p({time:.5,color:n.Color.fromString("#fd6d01")}),new p({time:.8,color:n.Color.fromString("#fd0001")}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"48f7a5a8-33de-4b03-998b-c5fa5500feec",keyframes:[new p({time:0,color:n.Color.white}),new p({time:.2,color:n.Color.brightWhite}),new p({time:.4,color:n.Color.white}),new p({time:.5,color:n.Color.white}),new p({time:.7,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.white})]}),angleScrollSpeed:5}),fireNoiseLayer:new u({uuid:"14f1e54a-cf90-4ac8-a1f8-082940838185",name:"Fire Noise Layer",category:"flashy",duration:5.5,gradient:new r.EditRgbGradient({uuid:"0e27bd1b-b978-4c2a-96dc-087c4a104c00",keyframes:[new p({time:.1,color:n.Color.fromString("#fad068")}),new p({time:.3,color:n.Color.fromString("#f1a204")}),new p({time:.7,color:n.Color.fromString("#fd6d01")})]}),blinkGradient:new r.EditRgbGradient({uuid:"cb24615e-a1bf-4594-8cf8-b138a2957b15",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.9,color:n.Color.white}),new p({time:1,color:n.Color.black})]}),blinkFrequency:10,blinkFrequencyVar:1,blinkDuration:2,fade:1}),whiteNoise:new u({uuid:"b4b43aea-42c9-477b-ae1e-0aa0ec52cbc3",name:"White Noise",category:"flashy",duration:1.5,gradient:new r.EditRgbGradient({uuid:"ae91c67f-199c-4819-8050-3d5d30fb9ce7",keyframes:[new p({time:0,color:n.Color.brightWhite})]}),blinkGradient:new r.EditRgbGradient({uuid:"f8a1b8dc-6f01-4e59-992a-ca9fed13f045",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.mediumWhite}),new p({time:1,color:n.Color.faintWhite})]}),blinkFrequency:50,blinkFrequencyVar:0,blinkDuration:1,fade:.5}),spinningMagic:new d({uuid:"67d2a675-4331-4c8d-89b4-e2af001e2212",name:"Spinning Magic",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"7d58de45-5468-4ded-a5a2-1dd742eca7a0",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"cecfa111-17c9-42ad-8f6e-733e15d7c037",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.5,color:n.Color.brightWhite}),new p({time:.6,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"91964753-6cee-48e4-bfe2-476e74521fb1",keyframes:[new p({time:0,color:n.Color.fromString("#5e3097")}),new p({time:.4,color:n.Color.black}),new p({time:.5,color:n.Color.fromString("#e5a8f5")}),new p({time:.6,color:n.Color.black}),new p({time:1,color:n.Color.fromString("#5e3097")})]}),angleScrollSpeed:3}),counterSpinningMagic:new d({uuid:"befad69b-6b16-4a43-8ffe-243c7e0014d0",name:"Counter Spinning Magic",category:"animated",duration:2,gradient:new r.EditRgbGradient({uuid:"5274a481-1d8d-473d-9d2f-bba5ffd62130",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"e666c7b7-3096-4f42-aacd-a9b00ea1a59f",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.4,color:n.Color.brightWhite}),new p({time:.5,color:n.Color.brightWhite}),new p({time:.6,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisScrollSpeed:0,angleGradient:new r.EditRgbGradient({uuid:"08517c9a-d86c-4f80-9696-e1d381a7faef",keyframes:[new p({time:0,color:n.Color.fromString("#5e3097")}),new p({time:.45,color:n.Color.black}),new p({time:.5,color:n.Color.fromString("#9f63a9")}),new p({time:.55,color:n.Color.black}),new p({time:1,color:n.Color.fromString("#5e3097")})]}),angleScrollSpeed:5.1415}),waterBaseLayer:new d({uuid:"c6b97f93-97af-4719-a16d-85d9e9c1b71f",name:"Water Base Layer",category:"animated",duration:4.5,gradient:new r.EditRgbGradient({uuid:"0a0cfff0-928d-4137-a67a-9f5709152890",keyframes:[new p({time:0,color:n.Color.black}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.7,color:n.Color.brightWhite}),new p({time:1,color:n.Color.black})]}),axisGradient:new r.EditRgbGradient({uuid:"b1f4f033-c785-4e54-8c7c-256dee06f52d",keyframes:[new p({time:0,color:n.Color.white}),new p({time:.1,color:n.Color.brightWhite}),new p({time:.2,color:n.Color.white}),new p({time:.3,color:n.Color.brightWhite}),new p({time:.4,color:n.Color.white}),new p({time:.5,color:n.Color.brightWhite}),new p({time:.6,color:n.Color.white}),new p({time:.7,color:n.Color.brightWhite}),new p({time:.8,color:n.Color.white}),new p({time:.9,color:n.Color.brightWhite}),new p({time:1,color:n.Color.white})]}),axisScrollSpeed:2,axisOffset:-1,axisScale:1,angleGradient:new r.EditRgbGradient({uuid:"c4aed08c-1c79-48e8-b759-f030f278f679",keyframes:[new p({time:0,color:n.Color.fromString("#09aaed")}),new p({time:.1,color:n.Color.fromString("#0945ee")}),new p({time:.3,color:n.Color.fromString("#09aaed")}),new p({time:.5,color:n.Color.fromString("#a2cffc")}),new p({time:.8,color:n.Color.fromString("#0945ee")}),new p({time:1,color:n.Color.fromString("#09aaed")})]}),angleScrollSpeed:-1})},t.PrebuildAnimationsExt={rainbowFountainX3:new f({uuid:"c9b03465-706a-436d-8ba8-760ee5dee678",name:"Rainbow Fountain X3",category:"animated",duration:7,animations:[new m(t.PrebuildAnimations.rainbowFountain,0),new m(t.PrebuildAnimations.rainbowFountain,1.4),new m(t.PrebuildAnimations.rainbowFountain,2.8)]}),spiralUpDown:new f({uuid:"a8e9267a-fccf-4e6d-8fb1-3d9dddc32c5b",name:"Spiral Up and Down",category:"animated",duration:7,animations:[new m(t.PrebuildAnimations.spiralUp,0),new m(t.PrebuildAnimations.spiralDown,.7)]}),spiralUpDownRainbow:new f({uuid:"5e768705-fbf0-4f20-81b3-035f259d86ed",name:"Spiral Up and Down Rainbow",category:"animated",duration:7,animations:[new m(t.PrebuildAnimations.rainbowUp,0),new m(t.PrebuildAnimations.rainbowDown,1.2)]}),alternatingWhite_d20:new f({uuid:"12bd0c13-d2c3-4837-87e5-2f7931e42d17",name:"Alternating White",category:"animated",duration:7,dieType:"d20",animations:[new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.whiteFlash),{uuid:"aa25f26b-f9cd-4ee5-9072-f09da1032a10",name:"Red Flash",color:new n.Color(1,.6,0)})),0),new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.alternatingWhite1_d20),{uuid:"67953296-8061-46e9-9c49-96342bd7c295",name:"Alternate Red 1",color:new n.Color(1,.6,0)})),.15),new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.alternatingWhite2_d20),{uuid:"0b887a00-2654-4f60-aa4a-673629e4b875",name:"Alternate Red 2",color:new n.Color(1,0,0)})),.15+t.PrebuildAnimations.alternatingWhite1_d20.duration/(2*t.PrebuildAnimations.alternatingWhite1_d20.count))]}),noiseRainbowX2:new f({uuid:"38c8e25b-aef0-4adb-bf0f-0f2c49ab84da",name:"Noise Rainbow X2",category:"flashy",duration:7,animations:[new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.whiteFlash),{uuid:"56d23423-6941-4e61-baac-f336e371896d",name:"Green Flash",color:n.Color.brightGreen,duration:1})),0),new m(t.PrebuildAnimations.noiseRainbow,0),new m(t.PrebuildAnimations.noiseRainbow,2)]}),fire:new f({uuid:"25eaa157-d59c-41ab-8770-251e06643028",name:"Fire",category:"animated",duration:7,animations:[new m(t.PrebuildAnimations.fireBaseLayer,0),new m(t.PrebuildAnimations.fireNoiseLayer,0)]}),overlappingQuickReds:new f({uuid:"2e0a5f5b-edb9-45e3-9c62-58db4d06d073",name:"Overlapping Quick Reds",category:"animated",duration:2.5,animations:[new m(t.PrebuildAnimations.reverseQuickRed,0),new m(new u(Object.assign(Object.assign({},t.PrebuildAnimations.whiteNoise),{uuid:"5a229f05-25d9-4bd1-98e9-080f01fe5002",name:"Red Noise",gradient:new r.EditRgbGradient({uuid:"281f771a-4595-4d92-853c-1ca1c56178ec",keyframes:[new p({time:0,color:n.Color.brightRed})]})})),.5)]}),overlappingQuickGreens:new f({uuid:"b9843f94-0d51-4833-9ddb-c4b3d111b043",name:"Overlapping Quick Greens",category:"animated",duration:2.5,animations:[new m(t.PrebuildAnimations.reverseQuickGreen,0),new m(t.PrebuildAnimations.reverseQuickGreen,.8),new m(t.PrebuildAnimations.reverseQuickGreen,1.6)]}),roseToCurrentFace:new f({uuid:"41f5a334-16b8-4167-a69f-bbbefccf4e42",name:"Rose to Current Face",category:"animated",duration:2.5,animations:[new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.whiteFlash),{uuid:"fd8befb3-aa06-412f-8114-7e14cd06cd47",name:"Long White Flash",duration:1.4,fade:1})),0),new m(t.PrebuildAnimations.whiteRose,.5)]}),doubleSpinningMagic:new f({uuid:"b19d3448-2ec6-430f-80a6-22ea02de97b9",name:"Double Spinning Magic",category:"animated",duration:2.5,animations:[new m(t.PrebuildAnimations.spinningMagic,0)]}),waterSplash:new f({uuid:"c570147c-bb62-450f-b3f7-60ed78a3e3ea",name:"Water Splash",category:"animated",duration:2.5,animations:[new m(t.PrebuildAnimations.waterWorm,0),new m(new s(Object.assign(Object.assign({},t.PrebuildAnimations.whiteFlash),{uuid:"83313332-6d9c-48b7-a2e6-190751183d85",name:"Long Blue Flash",duration:2,color:n.Color.fromString("#a2cffc")})),1)]})}},959:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDefaultAdvancedRules=t.addDefaultRollingRules=t.DefaultRulesAnimations=void 0;const n=i(9749),r=i(6627),o=r.EditAnimationSimple,a=r.EditAnimationRainbow,s={unknown:"5beea06a-7c51-4c46-9bf2-61fbe4ba5f13",d20:"c6025f51-0158-4479-b43c-cdcdc435126a",d12:"de08a8f6-398f-47dc-b52e-59d1f84c6283",d10:"e3c735f4-7e73-491c-8c41-44e515422afb",d00:"d41a05ca-725a-4057-bb6d-7a51c49d0373",d8:"fb0822a0-5459-47ec-a806-dd2886edbd19",d6:"d519c8ac-db86-4bc9-8d4d-fed090967e48",d4:"0e531bd1-3d2d-4100-9102-13c223d552fa",d6pipped:"a782440a-94e9-40e8-b8ea-1b764bb58f39",d6fudge:"71dd5254-9a32-40f8-874c-74762ae4531a"},l={unknown:"57269ea4-479e-4d13-80c4-2e6f26800730",d20:"2978a685-7ad2-47bb-9303-eefd4d07b179",d12:"8ed52163-57ef-4783-aded-1ab2a29ea4b0",d10:"5ed9db02-6506-440f-9028-1a05806ddb82",d00:"2b70075b-f69c-4ba5-a099-7be31077409b",d8:"6281b9d5-8a3b-47e7-96ae-38333f3d9fdc",d6:"30eb97fe-606f-468b-bc5b-bcd2b3a201f9",d4:"82d10019-10c2-49e7-bd8d-d0bcbb5f9b0b",d6pipped:"43463c71-f962-4f7d-92af-94249a8d6d87",d6fudge:"bf85fd4c-976f-4e76-ac8f-dffe1796fa85"},c={unknown:"3649fb32-b9bc-45bb-ad7b-e18f45559a90",d20:"2068b1ff-f68e-4c20-9302-6f922af646e1",d12:"9e16d056-1eeb-49e6-a3e3-7a0879ef6a38",d10:"a04dbefd-e0f2-4a4e-9975-9b098ef0240a",d00:"f0d657ed-8eee-4044-ae4e-9e1c3ba40ff5",d8:"6131a957-e211-4db6-8189-9a69fe8524ae",d6:"cba30d1d-f7f8-46de-a2d4-457b9630b367",d4:"f57c7553-cd9c-46ac-9904-e3ae92b8f4f7",d6pipped:"1542147c-74bf-4e94-b39d-2ffd96babb5c",d6fudge:"40f6174b-f727-4a7a-8973-631d60ac80c9"},d={unknown:"604ab883-d51f-4d12-a51f-5cd18d5f8407",d20:"82c272a9-07bd-4e63-a61f-5d50bd6da83c",d12:"2e383de7-2524-4d5e-9b7e-c9f02bfcc637",d10:"b6d994e2-84a2-45f2-a1a9-5b780e1788bc",d00:"65dc972a-8412-4081-9bf3-b97e528845dd",d8:"b2612c86-bd2f-4136-933b-138e31243e25",d6:"6b5be284-4d4d-4104-9e2c-c643f79c85a1",d4:"2d6a4470-4693-4aae-bc90-c57e3e8a18a3",d6pipped:"b9966abb-e031-4d44-aee8-c4f52ce58512",d6fudge:"fbf1fc13-f707-4265-a696-35c92105690a"};function u(e){return new o({name:"Face Up",uuid:s[e],category:"uniform",dieType:e,duration:.1,count:1,fade:.5,color:new r.EditColor("face"),faces:(0,n.getFaceMask)(n.DiceUtils.getTopFace(e),e)})}function f(e){return new o({name:"Charging",uuid:c[e],dieType:e,duration:3,count:1,color:n.Color.red,fade:.5,faces:(0,n.getFaceMask)(n.DiceUtils.getTopFace(e),e)})}function m(e){return new o({name:"Fully Charged",uuid:l[e],dieType:e,duration:3,count:1,color:n.Color.green,fade:.5,faces:(0,n.getFaceMask)(n.DiceUtils.getTopFace(e),e)})}function p(e){return new o({name:"Charging Error",uuid:d[e],dieType:e,duration:1,count:1,color:n.Color.yellow,fade:.5,faces:(0,n.getFaceMask)(n.DiceUtils.getTopFace(e),e)})}t.DefaultRulesAnimations={hello:new a({name:"Rolling Rainbow",uuid:"1ab1bf75-dcf7-4302-979b-764323ce5037",category:"colorful",animFlags:n.AnimationFlagsValues.traveling|n.AnimationFlagsValues.useLedIndices,duration:2,faces:n.AnimConstants.faceMaskAll,count:2,fade:200/255,intensity:128/255,cycles:1}),rolling:{unknown:u("unknown"),d20:u("d20"),d12:u("d12"),d10:u("d10"),d00:u("d00"),d8:u("d8"),d6:u("d6"),d4:u("d4"),d6pipped:u("d6pipped"),d6fudge:u("d6fudge")},rolled:new o({name:"Face Colored Blink",uuid:"39ea1031-aa66-429e-b9e1-25c6f6994b17",category:"uniform",count:1,duration:3,fade:.5,color:new r.EditColor("face"),faces:n.AnimConstants.faceMaskAll}),connection:new o({name:"Connection",uuid:"1bcf17ca-0f7e-4c87-80eb-e8a0c09541b7",count:2,duration:1,fade:.5,color:n.Color.blue,faces:n.AnimConstants.faceMaskAll}),lowBattery:new o({name:"Low Battery",uuid:"f042e65f-2fc2-4789-8e3e-9b580333bde6",count:3,duration:1.5,color:n.Color.red,faces:n.AnimConstants.faceMaskAll}),charging:{unknown:f("unknown"),d20:f("d20"),d12:f("d12"),d10:f("d10"),d00:f("d00"),d8:f("d8"),d6:f("d6"),d4:f("d4"),d6pipped:f("d6pipped"),d6fudge:f("d6fudge")},charged:{unknown:m("unknown"),d20:m("d20"),d12:m("d12"),d10:m("d10"),d00:m("d00"),d8:m("d8"),d6:m("d6"),d4:m("d4"),d6pipped:m("d6pipped"),d6fudge:m("d6fudge")},badCharging:new o({name:"Bad Charging",uuid:"ede414a7-f6bd-4c24-a7fd-6fd88c83519f",count:10,duration:2,color:n.Color.red,fade:.5,faces:n.AnimConstants.faceMaskAll}),chargingError:{unknown:p("unknown"),d20:p("d20"),d12:p("d12"),d10:p("d10"),d00:p("d00"),d8:p("d8"),d6:p("d6"),d4:p("d4"),d6pipped:p("d6pipped"),d6fudge:p("d6fudge")}},t.addDefaultRollingRules=function(e,i){e.rules.push(new r.EditRule(new r.EditConditionRolling({recheckAfter:.5}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.rolling[i],face:n.AnimConstants.currentFaceIndex,loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionRolled({faces:n.DiceUtils.getDieFaces(e.dieType)}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.rolled,face:n.AnimConstants.currentFaceIndex,loopCount:1})))},t.addDefaultAdvancedRules=function(e,i){const o=e=>n.DiceUtils.mapFaceForAnimation(e,i);e.rules.push(new r.EditRule(new r.EditConditionHelloGoodbye({flags:n.HelloGoodbyeFlagsValues.hello}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.hello,face:n.AnimConstants.currentFaceIndex,loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionConnectionState({flags:n.ConnectionStateFlagsValues.connected|n.ConnectionStateFlagsValues.disconnected}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.connection,face:n.AnimConstants.currentFaceIndex,loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionBatteryState({flags:n.BatteryStateFlagsValues.low,recheckAfter:30}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.lowBattery,face:n.AnimConstants.currentFaceIndex,loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionBatteryState({flags:n.BatteryStateFlagsValues.charging,recheckAfter:5}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.charging[i],face:o(n.DiceUtils.getTopFace(i)),loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionBatteryState({flags:n.BatteryStateFlagsValues.done,recheckAfter:5}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.charged[i],face:o(n.DiceUtils.getTopFace(i)),loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionBatteryState({flags:n.BatteryStateFlagsValues.badCharging}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.badCharging,face:o(n.DiceUtils.getTopFace(i)),loopCount:1}))),e.rules.push(new r.EditRule(new r.EditConditionBatteryState({flags:n.BatteryStateFlagsValues.error,recheckAfter:1.5}),new r.EditActionPlayAnimation({animation:t.DefaultRulesAnimations.chargingError[i],face:o(n.DiceUtils.getTopFace(i)),loopCount:1})))}},5749:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(959),t),r(i(8851),t),r(i(1508),t)},1508:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLibraryProfile=t.PrebuildProfilesNames=void 0;const n=i(9749),r=i(1371),o=i(8851),a=i(959),s=i(6627);t.PrebuildProfilesNames=["default","empty","speak","waterfall","fountain","spinning","spiral","noise","flashy","highLow","worm","rose","fire","magic","water"],t.createLibraryProfile=function(e,t,i){const l=new s.EditProfile({uuid:i,dieType:t});(0,a.addDefaultAdvancedRules)(l,t);const c=e=>"d4"===t?6:e,d=e=>n.DiceUtils.mapFaceForAnimation(e,t),u=e=>e.map(d),f=function(e,t=1){l.rules.push(new s.EditRule(new s.EditConditionRolling({recheckAfter:.2}),new s.EditActionPlayAnimation({animation:e,face:n.AnimConstants.currentFaceIndex,loopCount:t})))},m=function(e,i=1,r){l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>e!==n.DiceUtils.getTopFace(t))))}),new s.EditActionPlayAnimation({animation:e,face:n.AnimConstants.currentFaceIndex,loopCount:i,duration:r})))},p=function(e,i=1){l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:[d(n.DiceUtils.getTopFace(t))]}),new s.EditActionPlayAnimation({animation:e,face:n.AnimConstants.currentFaceIndex,loopCount:i})))};switch(e){case"default":l.name="Default",l.description="The default profile for all dice.",(0,a.addDefaultRollingRules)(l,t);break;case"empty":l.name="Empty",l.description="An empty profile to start fresh.";break;case"speak":l.name="Speak Numbers",l.description="This profile has your device say the rolled numbers out loud (when the app is open)",m(o.PrebuildAnimations.noise),p(o.PrebuildAnimations.noiseRainbow),l.rules.push(...n.DiceUtils.getDieFaces(t).map((e=>new s.EditRule(new s.EditConditionRolled({faces:[e]}),new s.EditActionSpeakText({text:e.toString()})))));break;case"waterfall":l.name="Waterfall",f(o.PrebuildAnimations.waterfallTopHalf),m(o.PrebuildAnimations.waterfall),p(o.PrebuildAnimations.waterfallRainbow,3);break;case"fountain":l.name="Fountain",f(o.PrebuildAnimations.waterfallTopHalf),m(o.PrebuildAnimations.fountain),p(o.PrebuildAnimationsExt.rainbowFountainX3,1);break;case"spinning":l.name="Spinning",f(o.PrebuildAnimations.waterfallTopHalf),m(o.PrebuildAnimations.spinning),p(o.PrebuildAnimations.spinningRainbow,1);break;case"spiral":l.name="Spiral",f(o.PrebuildAnimations.waterfallTopHalf),m(o.PrebuildAnimationsExt.spiralUpDown),p(o.PrebuildAnimationsExt.spiralUpDownRainbow,1);break;case"noise":l.name="Noise",f(o.PrebuildAnimations.shortNoise),m(o.PrebuildAnimations.noise),p(o.PrebuildAnimationsExt.noiseRainbowX2,1);break;case"flashy":l.name="Flashy",f(o.PrebuildAnimations.coloredFlash),m(o.PrebuildAnimations.coloredFlash,5,1),p(o.PrebuildAnimations.rainbowAllFacesFast,2);break;case"highLow":l.name="High Low",f(o.PrebuildAnimations.blueFlash),l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>n.DiceUtils.indexFromFace(e,t)<c(n.DiceUtils.getFaceCount(t))/2)))}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimationsExt.overlappingQuickReds,face:n.AnimConstants.currentFaceIndex}))),l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>n.DiceUtils.indexFromFace(e,t)>=c(n.DiceUtils.getFaceCount(t))/2)))}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimationsExt.overlappingQuickGreens,face:n.AnimConstants.currentFaceIndex})));break;case"worm":l.name="Worm",f(o.PrebuildAnimations.blueFlash),l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>n.DiceUtils.indexFromFace(e,t)<c(n.DiceUtils.getFaceCount(t))/3)))}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimations.redBlueWorm,face:n.AnimConstants.currentFaceIndex}))),l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>n.DiceUtils.indexFromFace(e,t)>=c(n.DiceUtils.getFaceCount(t))/3&&n.DiceUtils.indexFromFace(e,t)<2*c(n.DiceUtils.getFaceCount(t))/3)))}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimations.pinkWorm,face:n.AnimConstants.currentFaceIndex}))),l.rules.push(new s.EditRule(new s.EditConditionRolled({faces:u(n.DiceUtils.getDieFaces(t).filter((e=>n.DiceUtils.indexFromFace(e,t)>=2*c(n.DiceUtils.getFaceCount(t))/3&&e!==n.DiceUtils.getTopFace(t))))}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimations.greenBlueWorm,face:n.AnimConstants.currentFaceIndex}))),p(o.PrebuildAnimations.rainbowFast,1);break;case"rose":l.name="Rose",l.rules.push(new s.EditRule(new s.EditConditionRolling({recheckAfter:1}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimations.whiteRose,face:d(n.DiceUtils.getTopFace(t)),loopCount:1,duration:2}))),m(o.PrebuildAnimationsExt.roseToCurrentFace),p(o.PrebuildAnimationsExt.roseToCurrentFace);break;case"fire":l.name="Fire",l.rules.push(new s.EditRule(new s.EditConditionRolling({recheckAfter:1}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimationsExt.fire,face:n.AnimConstants.currentFaceIndex,loopCount:1}))),m(o.PrebuildAnimationsExt.fire),p(o.PrebuildAnimationsExt.fire);break;case"magic":l.name="Magic",l.rules.push(new s.EditRule(new s.EditConditionRolling({recheckAfter:1}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimationsExt.doubleSpinningMagic,face:n.AnimConstants.currentFaceIndex,loopCount:1}))),m(o.PrebuildAnimations.cycleMagic),p(o.PrebuildAnimations.cycleMagic);break;case"water":l.name="Water",l.rules.push(new s.EditRule(new s.EditConditionRolling({recheckAfter:1}),new s.EditActionPlayAnimation({animation:o.PrebuildAnimations.waterBaseLayer,face:d(n.DiceUtils.getTopFace(t)),loopCount:1}))),m(o.PrebuildAnimationsExt.waterSplash),p(o.PrebuildAnimationsExt.waterSplash);break;default:(0,r.assertNever)(e)}return l}},8547:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadAppDataSet=t.toAnimation=t.toProfile=t.toRules=t.toPattern=void 0;const r=i(9749),o=i(1371),a=n(i(8690)),s=i(7236),l=n(i(9422)),c=n(i(1068)),d=n(i(2004)),u=n(i(7668)),f=n(i(5156)),m=n(i(3383)),p=n(i(5601)),b=n(i(6169)),h=n(i(8621)),g=n(i(9939)),y=n(i(4230)),v=n(i(7122)),w=n(i(9201)),C=n(i(840)),k=n(i(220)),O=n(i(224)),T=n(i(174)),_=n(i(4977)),A=n(i(9641)),R=n(i(7249)),P=n(i(709)),x=n(i(335));function j(e){var t,i,n;return r.Color.fromBytes(null!==(t=null==e?void 0:e.r)&&void 0!==t?t:0,null!==(i=null==e?void 0:e.g)&&void 0!==i?i:0,null!==(n=null==e?void 0:e.b)&&void 0!==n?n:0)}function F(e){var t;return null!==(t=null==e?void 0:e.map((e=>new P.default({time:e.time,color:j(e.color)}))))&&void 0!==t?t:[]}function E(e){if(!e)return new h.default;switch(e.type){case s.ColorModeValues.rgb:return new h.default(j(null==e?void 0:e.rgbColor));case s.ColorModeValues.face:return new h.default("face");case s.ColorModeValues.random:return new h.default("random");default:throw Error(`Unsupported color type ${e.type}`)}}function S(e){return new _.default({name:e.name,gradients:(t=e.gradients,null!==(i=null==t?void 0:t.map((e=>new R.default({keyframes:F(e.keyframes)}))))&&void 0!==i?i:[])});var t,i}function D(e,t,i){var n;const a=null==i?void 0:i.filter((e=>!!e.condition&&!!e.actions));return null!==(n=null==a?void 0:a.map((i=>new x.default(function(e){if(!e.data)throw Error("No data for the condition");{const t=e.data;switch(e.type){case r.ConditionTypeValues.helloGoodbye:return(0,o.safeAssign)(new k.default,t);case r.ConditionTypeValues.handling:return new C.default;case r.ConditionTypeValues.rolling:return(0,o.safeAssign)(new T.default,t);case r.ConditionTypeValues.faceCompare:return(0,o.safeAssign)(new w.default,Object.assign(Object.assign({},t),{face:t.faceIndex&&t.faceIndex+1}));case r.ConditionTypeValues.crooked:return new v.default;case r.ConditionTypeValues.connection:return(0,o.safeAssign)(new y.default,t);case r.ConditionTypeValues.battery:return(0,o.safeAssign)(new g.default,t);case r.ConditionTypeValues.idle:return(0,o.safeAssign)(new O.default,t);default:throw Error(`Unsupported condition type ${e.type}`)}}}(i.condition),function(e,t,i){var n;const a=null==i?void 0:i.filter((e=>!!e.type&&!!e.data));return null!==(n=null==a?void 0:a.map((i=>{var n,a;const s=i.data;switch(i.type){case r.ActionTypeValues.playAnimation:return(0,o.safeAssign)(new l.default,{animation:e[null!==(n=s.animationIndex)&&void 0!==n?n:-1],face:s.faceIndex&&(s.faceIndex>0?s.faceIndex+1:s.faceIndex),loopCount:s.loopCount});case r.ActionTypeValues.playAudioClip:return(0,o.safeAssign)(new c.default,{clip:t[null!==(a=s.audioClipIndex)&&void 0!==a?a:-1]});default:throw Error(`Unsupported action type ${i.type}`)}})))&&void 0!==n?n:[]}(e,t,i.actions)))))&&void 0!==n?n:[]}function M(e,t,i){var n,r;return new A.default({name:null!==(n=e.name)&&void 0!==n?n:void 0,description:null!==(r=e.description)&&void 0!==r?r:void 0,rules:D(t,i,e.rules)})}function G(e,t){var i,n,o,a;const s=e.data;switch(e.type){case r.AnimationTypeValues.simple:return new p.default({name:s.name,duration:s.duration,faces:s.faces,color:E(s.color),count:s.count,fade:s.fade});case r.AnimationTypeValues.rainbow:return new m.default({name:s.name,duration:s.duration,animFlags:s.traveling?r.AnimationFlagsValues.traveling|r.AnimationFlagsValues.useLedIndices:0,faces:s.faces,count:s.count,fade:s.fade,cycles:1});case r.AnimationTypeValues.keyframed:return new f.default({name:s.name,duration:s.duration,pattern:t[null!==(i=s.patternIndex)&&void 0!==i?i:-1]});case r.AnimationTypeValues.gradientPattern:return new u.default({name:s.name,duration:s.duration,pattern:t[null!==(n=s.patternIndex)&&void 0!==n?n:-1],gradient:new R.default({keyframes:F(null===(o=s.gradient)||void 0===o?void 0:o.keyframes)}),overrideWithFace:s.overrideWithFace});case r.AnimationTypeValues.gradient:return new d.default({name:s.name,duration:s.duration,faces:s.faces,gradient:new R.default({keyframes:F(null===(a=s.gradient)||void 0===a?void 0:a.keyframes)})});default:throw Error(`Unsupported animation type ${e.type}`)}}t.toPattern=S,t.toRules=D,t.toProfile=M,t.toAnimation=G,t.loadAppDataSet=function(e){var t,i,n,r;const o=function(e){var t;return null!==(t=null==e?void 0:e.map(S))&&void 0!==t?t:[]}(e.patterns),s=null===(t=null==e?void 0:e.animations)||void 0===t?void 0:t.filter((e=>!!e.type&&!!e.data)),l=null!==(i=null==s?void 0:s.map((e=>G(e,o))))&&void 0!==i?i:[],c=function(e){var t;return null!==(t=null==e?void 0:e.map((e=>new b.default(e))))&&void 0!==t?t:[]}(e.audioClips);return new a.default({patterns:o,animations:l,audioClips:c,profiles:null!==(r=null===(n=null==e?void 0:e.behaviors)||void 0===n?void 0:n.map((e=>M(e,l,c))))&&void 0!==r?r:[],defaultProfile:(null==e?void 0:e.defaultBehavior)?M(e.defaultBehavior,l,c):void 0})}},3087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimationSetData=void 0,t.createAnimationSetData=function(){return{flashes:[],rainbow:[],gradient:[],pattern:[],gradientPattern:[],noise:[],normals:[],cycle:[],sequence:[]}}},9137:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6250:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromColor=t.toColor=void 0;const n=i(9749),r=i(1371),o=i(6627);t.toColor=function(e){return"face"===e||"random"===e?new o.EditColor(e):new o.EditColor(new n.Color(e))},t.fromColor=function(e){var t;const i=e.mode;switch(i){case"rgb":return n.ColorUtils.colorToString(null!==(t=e.color)&&void 0!==t?t:n.Color.black).toString();case"face":case"random":return i;default:(0,r.assertNever)(i,`Unsupported color mode: ${i}`)}}},7436:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromGradient=t.fromPattern=t.fromAnimation=t.fromProfile=t.fromFaceCompare=t.toGradient=t.toPattern=t.toAnimation=t.toProfile=void 0;const r=i(9749),o=i(1371),a=i(6250),s=i(7756),l=i(1545),c=i(6647),d=i(6627),u=n(i(479)),f=n(i(4039));function m(e,t){const i=e&r.FaceCompareFlagsValues.equal?1:0,n=r.FaceCompareFlagsValues.less|r.FaceCompareFlagsValues.equal,a=r.FaceCompareFlagsValues.greater|r.FaceCompareFlagsValues.equal;return!e||t<=0?[]:20===t&&(e&n)===n||1===t&&(e&a)===a?(0,o.range)(1,21):e&r.FaceCompareFlagsValues.less?(0,o.range)(1,t+i):e&r.FaceCompareFlagsValues.greater?(0,o.range)(t+1-i,21):[t]}t.toProfile=function(e,t,i,n=!1){const a=e=>{if(e){const i=t(e);if(!n&&!i)throw new Error(`toProfile(): No animation with uuid ${e}`);return i}},s=e=>{if(e){const t=i(e);if(!n&&!t)throw new Error(`toProfile(): No audio clip with uuid ${e}`);return t}},l=e.rules.map((t=>{let i;const n=t.condition.type,l=t.condition.index;switch(n){case"helloGoodbye":{const t=e.conditions.helloGoodbye[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionHelloGoodbye(Object.assign(Object.assign({},t),{flags:(0,o.combineFlags)((0,o.keysToValues)(t.flags,r.HelloGoodbyeFlagsValues))}))}break;case"handling":i=new d.EditConditionHandling;break;case"rolling":{const t=e.conditions.rolling[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionRolling(t)}break;case"rolled":{const t=e.conditions.rolled[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionRolled(Object.assign(Object.assign({},t),{faces:t.faces}))}break;case"crooked":i=new d.EditConditionCrooked;break;case"connection":{const t=e.conditions.connection[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionConnectionState(Object.assign(Object.assign({},t),{flags:(0,o.combineFlags)((0,o.keysToValues)(t.flags,r.ConnectionStateFlagsValues))}))}break;case"battery":{const t=e.conditions.battery[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionBatteryState(Object.assign(Object.assign({},t),{flags:(0,o.combineFlags)((0,o.keysToValues)(t.flags,r.BatteryStateFlagsValues))}))}break;case"idle":{const t=e.conditions.idle[l];(0,o.assert)(t,`No data for ${n} condition at index ${l}`),i=new d.EditConditionIdle(t)}break;default:(0,o.assertNever)(n,`Unsupported condition type: ${n}`)}const c=t.actions.map((t=>{const i=t.type;switch(i){case"playAnimation":{const n=e.actions.playAnimation[t.index];return(0,o.assert)(n,`No data for ${i} action at index ${t.index}`),new d.EditActionPlayAnimation(Object.assign(Object.assign({},n),{animation:a(n.animationUuid),colors:n.colors.map((e=>new r.Color(e)))}))}case"playAudioClip":{const n=e.actions.playAudioClip[t.index];return(0,o.assert)(n,`No data for ${i} action at index ${t.index}`),new d.EditActionPlayAudioClip(Object.assign(Object.assign({},n),{clip:s(n.clipUuid)}))}case"makeWebRequest":{const n=e.actions.makeWebRequest[t.index];return(0,o.assert)(n,`No data for ${i} action at index ${t.index}`),new u.default(n)}case"speakText":{const n=e.actions.speakText[t.index];return(0,o.assert)(n,`No data for ${i} action at index ${t.index}`),new f.default(n)}default:(0,o.assertNever)(i,`Unsupported action type: ${i}`)}}));return new d.EditRule(i,c)}));return new d.EditProfile(Object.assign(Object.assign({},e),{rules:l,creationDate:new Date(e.creationDate),lastChanged:new Date(e.lastChanged),lastUsed:e.lastUsed?new Date(e.lastUsed):void 0}))},t.toAnimation=function(e,t,i,n,s,l=!1){const c=e=>{if(e){const t=n(e);if(!l&&!t)throw new Error(`toAnimation(): No pattern with uuid ${e}`);return t}},u=e=>{if(e){const t=s(e);if(!l&&!t)throw new Error(`toAnimation(): No gradient with uuid ${e}`);return t}},f=(0,o.combineFlags)((0,o.keysToValues)(t.animFlags,r.AnimationFlagsValues));switch(e){case"flashes":{const e=t;return new d.EditAnimationSimple(Object.assign(Object.assign({},e),{animFlags:f,color:(0,a.toColor)(e.color)}))}case"rainbow":{const e=t;return new d.EditAnimationRainbow(Object.assign(Object.assign({},e),{animFlags:f}))}case"pattern":{const e=t;return new d.EditAnimationKeyframed(Object.assign(Object.assign({},e),{animFlags:f,pattern:c(e.patternUuid)}))}case"gradientPattern":{const e=t;return new d.EditAnimationGradientPattern(Object.assign(Object.assign({},e),{animFlags:f,pattern:c(e.patternUuid),gradient:u(e.gradientUuid)}))}case"gradient":{const e=t;return new d.EditAnimationGradient(Object.assign(Object.assign({},e),{animFlags:f,gradient:u(e.gradientUuid)}))}case"noise":{const e=t;return new d.EditAnimationNoise(Object.assign(Object.assign({},e),{animFlags:f,gradient:u(e.gradientUuid),blinkGradient:u(e.blinkGradientUuid),gradientColorType:r.NoiseColorOverrideTypeValues[e.gradientColorType]}))}case"normals":{const e=t;return new d.EditAnimationNormals(Object.assign(Object.assign({},e),{animFlags:f,gradient:u(e.gradientUuid),axisGradient:u(e.axisGradientUuid),angleGradient:u(e.angleGradientUuid),gradientColorType:r.NormalsColorOverrideTypeValues[e.gradientColorType]}))}case"cycle":{const e=t;return new d.EditAnimationCycle(Object.assign(Object.assign({},e),{animFlags:f,gradient:u(e.gradientUuid)}))}case"sequence":{const e=t;return new d.EditAnimationSequence(Object.assign(Object.assign({},e),{animFlags:f,animations:e.animations.map((e=>new d.EditAnimationSequenceItem((e=>{const t=i(e);if(!t)throw new Error(`toAnimation(): No animation with uuid ${e}`);return t})(e.uuid),e.delay)))}))}default:(0,o.assertNever)(e,`Unsupported animation type: ${e}`)}},t.toPattern=function(e){return new d.EditPattern(Object.assign(Object.assign({},e),{gradients:e.gradients.map((e=>new d.EditRgbGradient({keyframes:(0,s.toKeyframes)(e.keyframes)})))}))},t.toGradient=function(e){return new d.EditRgbGradient(Object.assign(Object.assign({},e),{keyframes:(0,s.toKeyframes)(e.keyframes)}))},t.fromFaceCompare=m,t.fromProfile=function(e){var t,i;const n=(0,l.createConditionSetData)(),a=(0,l.createActionSetData)(),s=e.rules.map((e=>{const t=e.condition.type;let i=0;switch(t){case"none":throw new Error(`Invalid condition type: ${t}`);case"handling":case"crooked":break;case"helloGoodbye":{i=n[t].length;const a=e.condition;n[t].push({flags:(0,o.valuesToKeys)((0,o.bitsToFlags)(a.flags),r.HelloGoodbyeFlagsValues)})}break;case"rolling":{i=n[t].length;const r=e.condition;n[t].push({recheckAfter:r.recheckAfter})}break;case"faceCompare":{i=n.rolled.length;const t=e.condition;n.rolled.push({faces:m(t.flags,t.face)})}break;case"rolled":{i=n[t].length;const r=e.condition;n[t].push({faces:[...r.faces]})}break;case"connection":{i=n[t].length;const a=e.condition;n[t].push({flags:(0,o.valuesToKeys)((0,o.bitsToFlags)(a.flags),r.ConnectionStateFlagsValues)})}break;case"battery":{i=n[t].length;const a=e.condition;n[t].push({flags:(0,o.valuesToKeys)((0,o.bitsToFlags)(a.flags),r.BatteryStateFlagsValues),recheckAfter:a.recheckAfter})}break;case"idle":{i=n[t].length;const r=e.condition;n[t].push({period:r.period})}break;default:(0,o.assertNever)(t,`Unsupported condition type: ${t}`)}return{condition:{type:"faceCompare"===t?"rolled":t,index:i},actions:e.actions.map((e=>{var t,i;const n=e.type;if("none"===n)throw new Error(`Invalid action type: ${n}`);switch(n){case"playAnimation":{const i=e;a[n].push({animationUuid:null===(t=i.animation)||void 0===t?void 0:t.uuid,face:i.face,loopCount:i.loopCount,duration:i.duration,fade:i.fade,intensity:i.intensity,colors:i.colors.map(r.ColorUtils.colorToString)})}break;case"playAudioClip":{const t=e;a[n].push({clipUuid:null===(i=t.clip)||void 0===i?void 0:i.uuid})}break;case"makeWebRequest":{const t=e;a[n].push({url:t.url,value:t.value,format:t.format})}break;case"speakText":{const t=e;a[n].push({text:t.text,pitch:t.pitch,rate:t.rate})}break;default:(0,o.assertNever)(n,`Unsupported action type: ${n}`)}return{type:n,index:a[n].length-1}}))}})),d=(0,c.createDataSetForProfile)(e).toDataSet(),u=r.DataSet.computeHash(d.toByteArray());return{uuid:e.uuid,name:e.name,description:e.description,dieType:e.dieType,colorway:e.colorway,brightness:e.brightness,hash:u,creationDate:e.creationDate.getTime(),lastChanged:e.lastChanged.getTime(),lastUsed:null!==(i=null===(t=e.lastUsed)||void 0===t?void 0:t.getTime())&&void 0!==i?i:0,conditions:n,actions:a,rules:s}},t.fromAnimation=function(e){var t,i,n,s,l,c,d,u,f,m;const p=e.type,b=(0,o.valuesToKeys)((0,o.bitsToFlags)(e.animFlags),r.AnimationFlagsValues);switch(p){case"none":throw new Error(`Invalid animation type: ${p}`);case"simple":{const t=e;return{type:"flashes",data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,faces:t.faces,color:(0,a.fromColor)(t.color),count:t.count,fade:t.fade}}}case"rainbow":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,faces:t.faces,count:t.count,fade:t.fade,intensity:t.intensity,cycles:t.cycles}}}case"keyframed":{const i=e;return{type:"pattern",data:{uuid:i.uuid,name:i.name,duration:i.duration,animFlags:b,category:i.category,dieType:i.dieType,patternUuid:null===(t=i.pattern)||void 0===t?void 0:t.uuid}}}case"gradientPattern":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,patternUuid:null===(i=t.pattern)||void 0===i?void 0:i.uuid,gradientUuid:null===(n=t.gradient)||void 0===n?void 0:n.uuid,overrideWithFace:t.overrideWithFace}}}case"gradient":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,faces:t.faces,gradientUuid:null===(s=t.gradient)||void 0===s?void 0:s.uuid}}}case"noise":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,gradientUuid:null===(l=t.gradient)||void 0===l?void 0:l.uuid,blinkGradientUuid:null===(c=t.blinkGradient)||void 0===c?void 0:c.uuid,blinkFrequency:t.blinkFrequency,blinkFrequencyVar:t.blinkFrequencyVar,blinkDuration:t.blinkDuration,fade:t.fade,gradientColorType:(0,o.valuesToKeys)([t.gradientColorType],r.NoiseColorOverrideTypeValues)[0],gradientColorVar:t.gradientColorVar}}}case"normals":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,gradientUuid:null===(d=t.gradient)||void 0===d?void 0:d.uuid,axisGradientUuid:null===(u=t.axisGradient)||void 0===u?void 0:u.uuid,axisScrollSpeed:t.axisScrollSpeed,axisScale:t.axisScale,axisOffset:t.axisOffset,angleGradientUuid:null===(f=t.angleGradient)||void 0===f?void 0:f.uuid,angleScrollSpeed:t.angleScrollSpeed,fade:t.fade,gradientColorType:(0,o.valuesToKeys)([t.gradientColorType],r.NormalsColorOverrideTypeValues)[0],gradientColorVar:t.gradientColorVar}}}case"cycle":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,count:t.count,cycles:t.cycles,fade:t.fade,intensity:t.intensity,faces:t.faces,gradientUuid:null===(m=t.gradient)||void 0===m?void 0:m.uuid}}}case"sequence":{const t=e;return{type:p,data:{uuid:t.uuid,name:t.name,duration:t.duration,animFlags:b,category:t.category,dieType:t.dieType,animations:t.animations.map((e=>({uuid:e.animation.uuid,delay:e.delay})))}}}case"name":throw Error(`Unsupported animation type: ${p}`);default:(0,o.assertNever)(p,`Unsupported animation type: ${p}`)}},t.fromPattern=function(e){const t=e.gradients.map((e=>({keyframes:(0,s.fromKeyframes)(e.keyframes)})));return{uuid:e.uuid,name:e.name,gradients:t}},t.fromGradient=function(e){const t=(0,s.fromKeyframes)(e.keyframes);return{uuid:e.uuid,keyframes:t}}},2381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3089:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(3087),t),r(i(9137),t),r(i(6250),t),r(i(7436),t),r(i(2381),t),r(i(7756),t),r(i(5517),t),r(i(1545),t),r(i(7645),t)},7756:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toKeyframes=t.fromKeyframes=void 0;const n=i(9749),r=i(5766),o=i(6627);t.fromKeyframes=function(e){var t;const i=new Uint8Array(8*(null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0)),n=new DataView(i.buffer);let o=0;return null==e||e.forEach((e=>{var t;n.setFloat32(o,null!==(t=e.time)&&void 0!==t?t:0),o+=4,n.setUint32(o,e.color.toColor32()),o+=4})),(0,r.fromByteArray)(i)},t.toKeyframes=function(e){const t=new DataView((0,r.toByteArray)(e).buffer),i=[];let a=0;const s=t.byteLength-8;for(;a<=s;){const e=t.getFloat32(a);a+=4;const r=new n.Color(t.getUint32(a));a+=4,i.push(new o.EditRgbKeyframe({time:e,color:r}))}return i}},5517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActionSetData=t.createConditionSetData=void 0,t.createConditionSetData=function(){return{helloGoodbye:[],rolling:[],rolled:[],connection:[],battery:[],idle:[]}},t.createActionSetData=function(){return{playAnimation:[],playAudioClip:[],makeWebRequest:[],speakText:[]}}},7645:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9749:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionMakeWebRequest:()=>ot,ActionPlayAnimation:()=>tt,ActionPlayAudioClip:()=>nt,ActionSpeakText:()=>st,ActionTypeValues:()=>Ze,AnimConstants:()=>f,AnimationBits:()=>K,AnimationCategoryValues:()=>c,AnimationCycle:()=>Q,AnimationFlagsValues:()=>l,AnimationGradient:()=>J,AnimationGradientPattern:()=>te,AnimationInstance:()=>$,AnimationInstanceGradient:()=>Y,AnimationInstanceGradientPattern:()=>Z,AnimationInstanceKeyframed:()=>ie,AnimationInstanceNoise:()=>ae,AnimationInstanceNormals:()=>Se,AnimationInstanceRainbow:()=>ce,AnimationInstanceSequence:()=>Ge,AnimationInstanceSimple:()=>fe,AnimationKeyframed:()=>re,AnimationNoise:()=>le,AnimationNormals:()=>Me,AnimationRainbow:()=>ue,AnimationSequence:()=>Ve,AnimationSimple:()=>pe,AnimationTypeValues:()=>s,BatteryStateFlagsValues:()=>dt,Color:()=>G,Color32Utils:()=>n,ColorUtils:()=>r,ConditionBatteryState:()=>ut,ConditionConnectionState:()=>pt,ConditionCrooked:()=>Ct,ConditionFaceCompare:()=>gt,ConditionHandling:()=>kt,ConditionHelloGoodbye:()=>wt,ConditionIdle:()=>Tt,ConditionRolled:()=>Pt,ConditionRolling:()=>At,ConditionTypeValues:()=>lt,ConnectionStateFlagsValues:()=>mt,DataSet:()=>Et,DiceUtils:()=>$e,FaceCompareFlagsValues:()=>ht,GammaUtils:()=>o,HelloGoodbyeFlagsValues:()=>vt,NoiseColorOverrideTypeValues:()=>d,NormalsColorOverrideTypeValues:()=>u,PixelColorwayValues:()=>qe,PixelDieTypeValues:()=>He,Profile:()=>Ye,RgbKeyframe:()=>We,RgbTrack:()=>Ue,Rule:()=>Je,SimpleKeyframe:()=>Be,Track:()=>Le,VirtualDie:()=>Ke,facesMaskToValues:()=>_e,getActionTypeDisplayName:()=>jt,getAnimationTypeDisplayName:()=>xt,getConditionTypeDisplayName:()=>Ft,getFaceCount:()=>ke,getFaceForLEDIndex:()=>we,getFaceMask:()=>Te,getLEDCount:()=>Oe,getTopFace:()=>Ce});var n={};i.r(n),i.d(n,{combineColors:()=>v,faceWheel:()=>T,getBlue:()=>g,getGreen:()=>h,getRed:()=>b,interpolateColors:()=>w,interpolateIntensity:()=>C,modulateColor:()=>k,mulColors:()=>y,rainbowWheel:()=>O,toColor32:()=>p});var r={};i.r(r),i.d(r,{colorBytesToString:()=>x,colorComponentToByte:()=>j,colorToString:()=>F,desaturate:()=>E,hsvToRgb:()=>_,lerp:()=>D,rgbToHsv:()=>A,shiftHue:()=>R,sqrDistance:()=>S});var o={};i.r(o),i.d(o,{gamma:()=>I,gamma32:()=>W,gamma8:()=>V,reverseGamma:()=>B,reverseGamma8:()=>U});var a=i(1371);const s={none:(0,a.enumValue)(0),simple:(0,a.enumValue)(),rainbow:(0,a.enumValue)(),keyframed:(0,a.enumValue)(),gradientPattern:(0,a.enumValue)(),gradient:(0,a.enumValue)(),noise:(0,a.enumValue)(),cycle:(0,a.enumValue)(),name:(0,a.enumValue)(),normals:(0,a.enumValue)(),sequence:(0,a.enumValue)()},l={none:0,traveling:(0,a.enumFlag)(0),useLedIndices:(0,a.enumFlag)()},c={system:(0,a.enumValue)(0),uniform:(0,a.enumValue)(),colorful:(0,a.enumValue)(),flashy:(0,a.enumValue)(),animated:(0,a.enumValue)()},d={none:(0,a.enumValue)(0),randomFromGradient:(0,a.enumValue)(),faceToGradient:(0,a.enumValue)(),faceToRainbowWheel:(0,a.enumValue)()},u={none:(0,a.enumValue)(0),faceToGradient:(0,a.enumValue)(),faceToRainbowWheel:(0,a.enumValue)()},f={maxLEDsCount:22,paletteColorFromFace:127,paletteColorFromRandom:126,faceMaskAll:4294967295,keyframeTimeResolutionMs:2,currentFaceIndex:-1};function m(e){const t=e%4;return e+(t?4-t:0)}function p(e,t=0,i=0){return"number"!=typeof e&&(t=255*e.g,i=255*e.b,e=255*e.r),e<<16|t<<8|255&i}function b(e){return e>>16&255}function h(e){return e>>8&255}function g(e){return 255&e}function y(e,t){return p(b(e)*b(t)/255,h(e)*h(t)/255,g(e)*g(t)/255)}function v(e,t){return p(Math.max(b(e),b(t)),Math.max(h(e),h(t)),Math.max(g(e),g(t)))}function w(e,t,i,n,r){const o=1024,a=(r-t)*o/(n-t);return p((b(e)*(o-a)+b(i)*a)/o,(h(e)*(o-a)+h(i)*a)/o,(g(e)*(o-a)+g(i)*a)/o)}function C(e,t,i,n,r){const o=1024,a=(r-t)*o/(n-t);return Math.floor((e*(o-a)+i*a)/o)}function k(e,t){return p(b(e)*t/255,h(e)*t/255,g(e)*t/255)}function O(e,t=255){return e<85?p(3*e*t/255,(255-3*e)*t/255,0):e<170?p((255-3*(e-=85))*t/255,0,3*e*t/255):p(0,3*(e-=170)*t/255,(255-3*e)*t/255)}function T(e,t){return O(256*e/t)}function _({h:e,s:t,v:i}){const n=Math.floor(6*e),r=6*e-n,o=i*(1-t),a=i*(1-r*t),s=i*(1-(1-r)*t);switch(n%6){case 0:return{r:i,g:s,b:o};case 1:return{r:a,g:i,b:o};case 2:return{r:o,g:i,b:s};case 3:return{r:o,g:a,b:i};case 4:return{r:s,g:o,b:i};case 5:return{r:i,g:o,b:a};default:return{r:0,g:0,b:0}}}function A({r:e,g:t,b:i}){const n=Math.max(e,t,i),r=n-Math.min(e,t,i);if(0===r)return{h:0,s:0,v:0};{let o=0;switch(n){case e:o=(t-i)/r+(t<i?6:0);break;case t:o=(i-e)/r+2;break;case i:o=(e-t)/r+4}return{h:o/6,s:r/n,v:n}}}function R({r:e,g:t,b:i},n){const r=A({r:e,g:t,b:i});return r.h=(r.h+n)%1,_(r)}function P(e){return e.toString(16).padStart(2,"0")}function x(e,t,i){return"#"+P(e)+P(t)+P(i)}function j(e){return Math.round(255*Math.min(1,Math.max(0,e)))}function F({r:e,g:t,b:i}){return x(j(e),j(t),j(i))}function E(e){return.5*(Math.min(e.r,Math.min(e.g,e.b))+Math.max(e.r,Math.max(e.g,e.b)))}function S(e,t){const i=e.r-t.r,n=e.g-t.g,r=e.b-t.b;return i*i+n*n+r*r}function D(e,t,i){return i=Math.min(1,Math.max(0,i)),{r:e.r+(t.r-e.r)*i,g:e.g+(t.g-e.g)*i,b:e.b+(t.b-e.b)*i}}class M{get rByte(){return j(this.r)}get gByte(){return j(this.g)}get bByte(){return j(this.b)}constructor(e,t,i){this.r=0,this.g=0,this.b=0,void 0!==e&&("string"==typeof e?this.setWithHex(e):"object"==typeof e?this.set(e.r,e.g,e.b):void 0===t?this.setWithValue(e):this.set(e,t,null!=i?i:0))}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b}assign(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}duplicate(){return new M(this.r,this.g,this.b)}desaturate(){return E(this)}serialize(e,t=0){return e.setUint8(t++,this.rByte),e.setUint8(t++,this.gByte),e.setUint8(t++,this.bByte),[e,t]}toString(){return F(this)}toColor32(){return p(this)}set(e,t,i){return this.r=e,this.g=t,this.b=i,this}setWithBytes(e,t,i){return this.r=e/255,this.g=t/255,this.b=i/255,this}setWithValue(e){return this.setWithBytes(b(e),h(e),g(e)),this}setWithHex(e){if(e.length){const t="#"===e[0]?1:0;if(e.length===3+t)this.set(parseInt(e[t],16)/255,parseInt(e[t+1],16)/255,parseInt(e[t+2],16)/255);else{if(e.length!==6+t)throw new Error(`Invalid hexadecimal color: ${e}`);this.setWithValue(parseInt(t?e.slice(t):e,16))}}return this}static fromBytes(e,t,i){return(new M).setWithBytes(e,t,i)}static fromString(e){return(new M).setWithHex(e)}static lerp(e,t,i){return new M(D(e,t,i))}}M.black=Object.freeze(new M(0,0,0)),M.brightRed=Object.freeze(new M(1,0,0)),M.brightGreen=Object.freeze(new M(0,1,0)),M.brightBlue=Object.freeze(new M(0,0,1)),M.brightWhite=Object.freeze(new M(1,1,1)),M.brightCyan=Object.freeze(new M(0,1,1)),M.brightMagenta=Object.freeze(new M(1,0,1)),M.brightYellow=Object.freeze(new M(1,1,0)),M.brightOrange=Object.freeze(new M(1,.647,0)),M.brightPurple=Object.freeze(new M(.5,0,1)),M.red=Object.freeze(new M(.7,0,0)),M.green=Object.freeze(new M(0,.7,0)),M.blue=Object.freeze(new M(0,0,.7)),M.white=Object.freeze(new M(.7,.7,.7)),M.cyan=Object.freeze(new M(0,.7,.7)),M.magenta=Object.freeze(new M(.7,0,.7)),M.yellow=Object.freeze(new M(.7,.6,.01)),M.orange=Object.freeze(new M(.7,.453,0)),M.mediumWhite=Object.freeze(new M(.5,.5,.5)),M.faintWhite=Object.freeze(new M(.1,.1,.1)),M.dimRed=Object.freeze(new M(.35,0,0)),M.dimGreen=Object.freeze(new M(0,.35,0)),M.dimBlue=Object.freeze(new M(0,0,.35)),M.dimWhite=Object.freeze(new M(.35,.35,.35)),M.dimCyan=Object.freeze(new M(0,.35,.35)),M.dimMagenta=Object.freeze(new M(.35,0,.35)),M.dimYellow=Object.freeze(new M(.35,.3,.005)),M.dimOrange=Object.freeze(new M(.35,.226,0));const G=M;function z(e){return e<0?0:e>255?255:Math.floor(e)}function V(e){return N[z(e)]}function W(e){return p(V(b(e)),V(h(e)),V(g(e)))}function I(e){const t=V(e.rByte),i=V(e.gByte),n=V(e.bByte);return G.fromBytes(t,i,n)}function U(e){return L[z(e)]}function B(e){const t=U(e.rByte),i=U(e.gByte),n=U(e.bByte);return G.fromBytes(t,i,n)}const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,5,5,5,5,6,6,6,6,6,7,7,7,8,8,8,8,9,9,9,10,10,10,11,11,12,12,12,13,13,14,14,14,15,15,16,16,17,17,18,18,19,19,20,20,21,22,22,23,23,24,25,25,26,27,27,28,29,29,30,31,32,32,33,34,35,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,61,62,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,87,88,90,91,93,94,96,97,99,101,102,104,105,107,109,111,112,114,116,118,119,121,123,125,127,129,131,132,134,136,138,140,142,144,147,149,151,153,155,157,159,162,164,166,168,171,173,175,178,180,182,185,187,190,192,195,197,200,202,205,207,210,213,215,218,221,223,226,229,232,235,237,240,243,246,249,252,255],L=[0,70,80,87,92,97,101,105,108,112,114,117,119,122,124,126,128,130,132,134,135,137,138,140,141,143,144,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,170,171,172,173,174,174,175,176,177,177,178,179,180,180,181,182,182,183,184,184,185,186,186,187,188,188,189,189,190,191,191,192,192,193,194,194,195,195,196,196,197,197,198,198,199,200,200,201,201,202,202,203,203,204,204,204,205,205,206,206,207,207,208,208,209,209,210,210,210,211,211,212,212,213,213,214,214,214,215,215,216,216,216,217,217,218,218,218,219,219,220,220,220,221,221,222,222,222,223,223,223,224,224,224,225,225,226,226,226,227,227,227,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236,237,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,241,242,242,242,243,243,243,243,244,244,244,245,245,245,245,246,246,246,247,247,247,247,248,248,248,248,249,249,249,249,250,250,250,251,251,251,251,252,252,252,252,253,253,253,253,254,254,254,254,255];class K{constructor(){this.palette=[],this.rgbKeyframes=[],this.rgbTracks=[],this.keyframes=[],this.tracks=[],this.animations=[]}getColor32(e,t){return p(this.getColor(e,t))}getColor(e,t){return e===f.paletteColorFromFace?new G(T(t.currentFace,t.ledCount)):e===f.paletteColorFromRandom?G.black:this.getArrayItem(this.palette,e,"color")}getPaletteSize(){return 3*this.palette.length}getRgbKeyframe(e){return this.getArrayItem(this.rgbKeyframes,e,"rgb keyframe")}getRgbKeyframeCount(){return this.rgbKeyframes.length}getKeyframe(e){return this.getArrayItem(this.keyframes,e,"keyframe")}getKeyframeCount(){return this.keyframes.length}getRgbTrack(e){return this.getArrayItem(this.rgbTracks,e,"rgb track")}getRgbTrackCount(){return this.rgbTracks.length}getTrack(e){return this.getArrayItem(this.tracks,e,"track")}getTrackCount(){return this.tracks.length}getAnimation(e){return this.getArrayItem(this.animations,e,"animation")}getAnimationCount(){return this.animations.length}computeDataSize(){return m(3*this.palette.length)+(0,a.byteSizeOf)(this.rgbKeyframes)+(0,a.byteSizeOf)(this.rgbTracks)+(0,a.byteSizeOf)(this.keyframes)+(0,a.byteSizeOf)(this.tracks)}serialize(e,t=0){for(const i of this.palette)[e,t]=i.serialize(e,t);return t=m(t),[e,t]=(0,a.serialize)(this.rgbKeyframes,{dataView:e,byteOffset:t}),[e,t]=(0,a.serialize)(this.rgbTracks,{dataView:e,byteOffset:t}),[e,t]=(0,a.serialize)(this.keyframes,{dataView:e,byteOffset:t}),[e,t]=(0,a.serialize)(this.tracks,{dataView:e,byteOffset:t}),[e,t]}getArrayItem(e,t,i){const n=e[t];if(void 0===n)throw t<0||t>=e.length?new Error(`Out of bound index for AnimationBits.${i}, got ${t} but array has ${e.length} item(s)`):new Error(`No item for AnimationBits.${i} at index ${t}`);return n}}class ${get startTime(){return this._startTime}get duration(){return this._animationPreset.duration}get animationPreset(){return this._animationPreset}get bits(){return this._animationBits}get die(){return this._virtualDie}constructor(e,t,i){this._startTime=0,this._animationPreset=e,this._animationBits=t,this._virtualDie=i}start(e){this._startTime=e}setIndices(e,t){const i=this._virtualDie.ledCount;let n=0;for(let r=0;r<i;++r)0!=(e&1<<r)&&(t[n]=r,n++);return n}setColor(e,t,i,n){const r=this._virtualDie.ledCount;let o=0;for(let a=0;a<r;++a)0!=(t&1<<a)&&(i[o]=a,n[o]=e,o++);return o}}class q extends ${get preset(){return this.animationPreset}updateLEDs(e,t,i){const n=this.preset,r=this.die.ledCount,o=e-this.startTime,a=n.duration*n.fade/510;let s=n.intensity;o<=a?s=o*n.intensity/a:o>=n.duration-a&&(s=(n.duration-o)*n.intensity/a);const l=this.bits.getRgbTrack(n.gradientTrackOffset),c=o*n.count*1e3/n.duration;let d=0;for(let e=0;e<r;++e)if(0!=(n.faceMask&1<<e)){t[d]=e;const o=(c+1e3*e*n.cyclesTimes10/(10*r))%1e3;i[d]=k(l.evaluateColor(o,this.bits,this.die),s),d++}return d}stop(e){const t=this.die.ledCount,i=this.preset;let n=0;for(let r=0;r<t;++r)0!=(i.faceMask&1<<r)&&(e[n]=r,n++);return n}}var H=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Q{constructor(){this.type=s.cycle,this.animFlags=0,this.duration=0,this.faceMask=0,this.count=0,this.fade=0,this.intensity=128,this.cyclesTimes10=10,this.gradientTrackOffset=0}createInstance(e,t){return new q(this,e,t)}}H([(0,a.serializable)(1)],Q.prototype,"type",void 0),H([(0,a.serializable)(1)],Q.prototype,"animFlags",void 0),H([(0,a.serializable)(2)],Q.prototype,"duration",void 0),H([(0,a.serializable)(4)],Q.prototype,"faceMask",void 0),H([(0,a.serializable)(1)],Q.prototype,"count",void 0),H([(0,a.serializable)(1)],Q.prototype,"fade",void 0),H([(0,a.serializable)(1)],Q.prototype,"intensity",void 0),H([(0,a.serializable)(1)],Q.prototype,"cyclesTimes10",void 0),H([(0,a.serializable)(2)],Q.prototype,"gradientTrackOffset",void 0);class Y extends ${get preset(){return this.animationPreset}updateLEDs(e,t,i){const n=this.preset,r=e-this.startTime,o=this.bits.getRgbTrack(n.gradientTrackOffset),a=1e3*r/n.duration,s=o.evaluateColor(a,this.bits,this.die);return this.setColor(s,n.faceMask,t,i)}stop(e){return this.setIndices(this.preset.faceMask,e)}}var X=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class J{constructor(){this.type=s.gradient,this.animFlags=0,this.duration=0,this.faceMask=0,this.gradientTrackOffset=0}createInstance(e,t){return new Y(this,e,t)}}X([(0,a.serializable)(1)],J.prototype,"type",void 0),X([(0,a.serializable)(1)],J.prototype,"animFlags",void 0),X([(0,a.serializable)(2)],J.prototype,"duration",void 0),X([(0,a.serializable)(4)],J.prototype,"faceMask",void 0),X([(0,a.serializable)(2,{padding:2})],J.prototype,"gradientTrackOffset",void 0);class Z extends ${constructor(){super(...arguments),this._rgb=0}get preset(){return this.animationPreset}start(e){super.start(e),this.preset.overrideWithFace&&(this._rgb=this.bits.getColor32(f.paletteColorFromFace,this.die))}updateLEDs(e,t,i){const n=this.preset,r=this.die.ledCount,o=1e3*(e-this.startTime)/n.duration,a=this.bits.getRgbTrack(n.gradientTrackOffset);let s=0;s=n.overrideWithFace?this._rgb:a.evaluateColor(o,this.bits,this.die);let l=0;const c=[],d=[];for(let e=0;e<n.trackCount;++e){const a=this.bits.getTrack(n.tracksOffset+e).evaluate(this.bits,s,o,r,c,d);for(let e=0;e<a;++e)t[l+e]=c[e],i[l+e]=d[e];l+=a}return l}stop(e){const t=this.preset;let i=0;const n=[];for(let r=0;r<t.trackCount;++r){const o=this.bits.getRgbTrack(t.tracksOffset+r).extractLEDIndices(n);for(let t=0;t<o;++t)e[i+t]=n[t];i+=o}return i}}var ee=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class te{constructor(){this.type=s.gradientPattern,this.animFlags=0,this.duration=0,this.tracksOffset=0,this.trackCount=0,this.gradientTrackOffset=0,this.overrideWithFace=!1}createInstance(e,t){return new Z(this,e,t)}}ee([(0,a.serializable)(1)],te.prototype,"type",void 0),ee([(0,a.serializable)(1)],te.prototype,"animFlags",void 0),ee([(0,a.serializable)(2)],te.prototype,"duration",void 0),ee([(0,a.serializable)(2)],te.prototype,"tracksOffset",void 0),ee([(0,a.serializable)(2)],te.prototype,"trackCount",void 0),ee([(0,a.serializable)(2)],te.prototype,"gradientTrackOffset",void 0),ee([(0,a.serializable)(1,{padding:1})],te.prototype,"overrideWithFace",void 0);class ie extends ${get preset(){return this.animationPreset}updateLEDs(e,t,i){const n=this.preset,r=1e3*(e-this.startTime)/n.duration;let o=0;const a=[],s=[];for(let e=0;e<n.trackCount;++e){const l=this.bits.getRgbTrack(n.tracksOffset+e).evaluate(r,this.bits,this.die,a,s);for(let e=0;e<l;++e)t[o+e]=a[e],i[o+e]=s[e];o+=l}return o}stop(e){const t=this.preset;let i=0;const n=[];for(let r=0;r<t.trackCount;++r){const o=this.bits.getRgbTrack(t.tracksOffset+r).extractLEDIndices(n);for(let t=0;t<o;++t)e[i+t]=n[t];i+=o}return i}}var ne=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class re{constructor(){this.type=s.keyframed,this.animFlags=0,this.duration=0,this.tracksOffset=0,this.trackCount=0}createInstance(e,t){return new ie(this,e,t)}}function oe(){return Math.floor(4294967295*Math.random())}ne([(0,a.serializable)(1)],re.prototype,"type",void 0),ne([(0,a.serializable)(1)],re.prototype,"animFlags",void 0),ne([(0,a.serializable)(2)],re.prototype,"duration",void 0),ne([(0,a.serializable)(2)],re.prototype,"tracksOffset",void 0),ne([(0,a.serializable)(2)],re.prototype,"trackCount",void 0);class ae extends ${constructor(){super(...arguments),this.nextBlinkTime=0,this.blinkStartTimes=[],this.blinkDurations=[],this.blinkColors=[],this.blinkInterValMinMs=0,this.blinkInterValDeltaMs=0,this.baseColorParam=0}get preset(){return this.animationPreset}start(e){super.start(e);const t=this.preset;this.blinkInterValMinMs=1e6/(t.blinkFrequencyTimes1000+t.blinkFrequencyVarTimes1000);const i=1e6/(t.blinkFrequencyTimes1000-t.blinkFrequencyVarTimes1000);this.blinkInterValDeltaMs=Math.max(i-this.blinkInterValMinMs,1);for(let e=0;e<f.maxLEDsCount;e++)this.blinkStartTimes[e]=0,this.blinkDurations[e]=0;this.nextBlinkTime=e+this.blinkInterValMinMs+oe()%this.blinkInterValDeltaMs,this.baseColorParam=function(e,t){switch(e){case d.faceToGradient:return 1e3*t.currentFace/t.faceCount;case d.faceToRainbowWheel:return 256*t.currentFace/t.faceCount;case d.randomFromGradient:case d.none:default:return 0}}(t.gradientColorType,this.die)}updateLEDs(e,t,i){const n=this.preset,r=this.die.ledCount,o=e-this.startTime,a=n.duration*n.fade/510,s=this.bits.getRgbTrack(n.gradientTrackOffset),l=this.bits.getRgbTrack(n.blinkTrackOffset);let c=255;if(o<=a?c=255*o/a:o>=n.duration-a&&(c=255*(n.duration-o)/a),e>=this.nextBlinkTime){let t=oe()%r;for(let e=0;0!==this.blinkDurations[t]&&e<5;++e)t=oe()%r;this.blinkDurations[t]=n.blinkDuration,this.blinkStartTimes[t]=e;let i=0;switch(n.gradientColorType){case d.randomFromGradient:i=s.evaluateColor(oe()%1e3,this.bits,this.die);break;case d.faceToGradient:{const e=Math.floor(oe()%Math.max(1,2*n.gradientColorVar))-n.gradientColorVar;let t=this.baseColorParam+e;t<0?t=0:t>1e3&&(t=1e3),i=s.evaluateColor(t,this.bits,this.die)}break;case d.faceToRainbowWheel:{const e=Math.floor(oe()%Math.max(1,2*n.gradientColorVar))-n.gradientColorVar;i=O(this.baseColorParam+255*e/1e3)}break;case d.none:default:{const e=1e3*o/n.duration;i=s.evaluateColor(e,this.bits,this.die)}}this.blinkColors[t]=i,this.nextBlinkTime=e+this.blinkInterValMinMs+oe()%this.blinkInterValDeltaMs}let u=0;for(let n=0;n<r;++n)if(this.blinkDurations[n]>0){const r=e-this.blinkStartTimes[n];if(r>this.blinkDurations[n])t[u]=n,i[u]=0,u++,this.blinkDurations[n]=0,this.blinkStartTimes[n]=0;else{const e=1e3*r/this.blinkDurations[n],o=l.evaluateColor(e,this.bits,this.die);t[u]=n,i[u]=k(y(this.blinkColors[n],o),c),u++}}return u}stop(e){return this.setIndices(f.faceMaskAll,e)}}var se=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class le{constructor(){this.type=s.noise,this.animFlags=0,this.duration=0,this.gradientTrackOffset=0,this.blinkTrackOffset=0,this.blinkFrequencyTimes1000=0,this.blinkFrequencyVarTimes1000=0,this.blinkDuration=0,this.fade=0,this.gradientColorType=d.none,this.gradientColorVar=0}createInstance(e,t){return new ae(this,e,t)}}se([(0,a.serializable)(1)],le.prototype,"type",void 0),se([(0,a.serializable)(1)],le.prototype,"animFlags",void 0),se([(0,a.serializable)(2)],le.prototype,"duration",void 0),se([(0,a.serializable)(2)],le.prototype,"gradientTrackOffset",void 0),se([(0,a.serializable)(2)],le.prototype,"blinkTrackOffset",void 0),se([(0,a.serializable)(2)],le.prototype,"blinkFrequencyTimes1000",void 0),se([(0,a.serializable)(2)],le.prototype,"blinkFrequencyVarTimes1000",void 0),se([(0,a.serializable)(2)],le.prototype,"blinkDuration",void 0),se([(0,a.serializable)(1)],le.prototype,"fade",void 0),se([(0,a.serializable)(1)],le.prototype,"gradientColorType",void 0),se([(0,a.serializable)(2)],le.prototype,"gradientColorVar",void 0);class ce extends ${get preset(){return this.animationPreset}updateLEDs(e,t,i){const n=this.preset,r=this.die.ledCount;let o=0;const a=n.duration*n.fade/510,s=e-this.startTime,c=s*n.count*255/n.duration%256;let d=n.intensity;s<=a?d=s*n.intensity/a:s>=n.duration-a&&(d=(n.duration-s)*n.intensity/a);let u=0;if(n.animFlags&l.traveling)for(let e=0;e<r;++e)0!=(n.faceMask&1<<e)&&(t[u]=e,i[u]=O((c+256*e*n.cyclesTimes10/(10*r))%256,d),u++);else o=O(c,d),u=this.setColor(o,n.faceMask,t,i);return u}stop(e){return this.setIndices(this.preset.faceMask,e)}}var de=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class ue{constructor(){this.type=s.rainbow,this.animFlags=0,this.duration=0,this.faceMask=0,this.count=0,this.fade=0,this.intensity=128,this.cyclesTimes10=10}createInstance(e,t){return new ce(this,e,t)}}de([(0,a.serializable)(1)],ue.prototype,"type",void 0),de([(0,a.serializable)(1)],ue.prototype,"animFlags",void 0),de([(0,a.serializable)(2)],ue.prototype,"duration",void 0),de([(0,a.serializable)(4)],ue.prototype,"faceMask",void 0),de([(0,a.serializable)(1)],ue.prototype,"count",void 0),de([(0,a.serializable)(1)],ue.prototype,"fade",void 0),de([(0,a.serializable)(1)],ue.prototype,"intensity",void 0),de([(0,a.serializable)(1)],ue.prototype,"cyclesTimes10",void 0);class fe extends ${constructor(){super(...arguments),this._rgb=0}get preset(){return this.animationPreset}start(e){super.start(e),this._rgb=this.bits.getColor32(this.preset.colorIndex,this.die)}updateLEDs(e,t,i){const n=this.preset;let r=0;const o=n.duration/n.count,a=o*n.fade/510,s=(o-2*a)/2,l=(e-this.startTime)%o;return r=l<=a?w(0,0,this._rgb,a,l):l<=a+s?this._rgb:l<=2*a+s?w(this._rgb,a+s,0,2*a+s,l):0,this.setColor(r,n.faceMask,t,i)}stop(e){return this.setIndices(this.preset.faceMask,e)}}var me=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class pe{constructor(){this.type=s.simple,this.animFlags=0,this.duration=0,this.faceMask=0,this.colorIndex=0,this.count=0,this.fade=0}createInstance(e,t){return new fe(this,e,t)}}function be(e=0,t=0,i=0){return{xTimes1000:1e3*e,yTimes1000:1e3*t,zTimes1000:1e3*i}}function he(e){const t=function(e){return Math.sqrt(1e3*function(e){return(e.xTimes1000*e.xTimes1000+e.yTimes1000*e.yTimes1000+e.zTimes1000*e.zTimes1000)/1e3}(e))}(e);e.xTimes1000=1e3*e.xTimes1000/t,e.yTimes1000=1e3*e.yTimes1000/t,e.zTimes1000=1e3*e.zTimes1000/t}function ge(e,t){return(e.xTimes1000*t.xTimes1000+e.yTimes1000*t.yTimes1000+e.zTimes1000*t.zTimes1000)/1e3}function ye(e,t){return{xTimes1000:(e.yTimes1000*t.zTimes1000-e.zTimes1000*t.yTimes1000)/1e3,yTimes1000:(e.zTimes1000*t.xTimes1000-e.xTimes1000*t.zTimes1000)/1e3,zTimes1000:(e.xTimes1000*t.yTimes1000-e.yTimes1000*t.xTimes1000)/1e3}}function ve(e,t){return{xTimes1000:e.xTimes1000-t.xTimes1000,yTimes1000:e.yTimes1000-t.yTimes1000,zTimes1000:e.zTimes1000-t.zTimes1000}}function we(e,t){return"d6pipped"===e?0===t?0:t<=4?3:t<=6?1:t<=9?2:t<=14?4:5:t}function Ce(e){switch(e){case"unknown":case"d10":case"d00":return 0;case"d20":return 19;case"d12":return 11;case"d8":return 7;default:return 5}}function ke(e){switch(e){case"unknown":return 0;case"d20":return 20;case"d12":return 12;case"d10":case"d00":return 10;case"d8":return 8;default:return 6}}function Oe(e){switch(e){case"unknown":return 0;case"d20":return 20;case"d12":return 12;case"d10":case"d00":return 10;case"d8":return 8;case"d6pipped":return 21;default:return 6}}function Te(e,t){if("number"==typeof e)switch(t){case"d4":switch(e){case 1:break;case 2:case 3:++e;break;default:e=6}break;case"d6pipped":return function(e){let t=0;for(let i=1;i<e;++i)t+=i;const i=Array(e);for(let n=t;n<t+e;++n)i[n-t]=(0,a.bitIndexToFlag)(n);return(0,a.combineFlags)(i)}(e);case"d10":case"unknown":++e;break;case"d00":e=1+Math.round(e/10)}if("number"==typeof e){const i=e;return(0,a.assert)(i>0&&i<=32,`getFaceMask: Face value is out of range [1, 32], got ${i} for type ${t}`),1<<i-1>>>0}return e.reduce(((e,i)=>Te(i,t)|e),0)}function _e(e){return(0,a.bitsToIndices)(e).map((e=>e+1))}me([(0,a.serializable)(1)],pe.prototype,"type",void 0),me([(0,a.serializable)(1)],pe.prototype,"animFlags",void 0),me([(0,a.serializable)(2)],pe.prototype,"duration",void 0),me([(0,a.serializable)(4)],pe.prototype,"faceMask",void 0),me([(0,a.serializable)(2)],pe.prototype,"colorIndex",void 0),me([(0,a.serializable)(1)],pe.prototype,"count",void 0),me([(0,a.serializable)(1)],pe.prototype,"fade",void 0);const Ae=[{xTimes1000:-335,yTimes1000:937,zTimes1000:-92},{xTimes1000:-352,yTimes1000:-930,zTimes1000:-98},{xTimes1000:716,yTimes1000:572,zTimes1000:-399},{xTimes1000:-253,yTimes1000:-357,zTimes1000:898},{xTimes1000:-995,yTimes1000:8,zTimes1000:93},{xTimes1000:804,yTimes1000:-9,zTimes1000:593},{xTimes1000:-396,yTimes1000:583,zTimes1000:-708},{xTimes1000:705,yTimes1000:-582,zTimes1000:-403},{xTimes1000:407,yTimes1000:571,zTimes1000:712},{xTimes1000:246,yTimes1000:-355,zTimes1000:-901},{xTimes1000:-246,yTimes1000:355,zTimes1000:901},{xTimes1000:-407,yTimes1000:-571,zTimes1000:-712},{xTimes1000:-705,yTimes1000:582,zTimes1000:403},{xTimes1000:396,yTimes1000:-583,zTimes1000:708},{xTimes1000:-804,yTimes1000:9,zTimes1000:-593},{xTimes1000:995,yTimes1000:-8,zTimes1000:-93},{xTimes1000:253,yTimes1000:357,zTimes1000:-898},{xTimes1000:-716,yTimes1000:-572,zTimes1000:399},{xTimes1000:352,yTimes1000:930,zTimes1000:98},{xTimes1000:335,yTimes1000:-937,zTimes1000:92}],Re=[{xTimes1000:-446,yTimes1000:850,zTimes1000:-276},{xTimes1000:-447,yTimes1000:525,zTimes1000:723},{xTimes1000:-447,yTimes1000:-850,zTimes1000:-276},{xTimes1000:-1e3,yTimes1000:0,zTimes1000:-0},{xTimes1000:447,yTimes1000:525,zTimes1000:-723},{xTimes1000:-447,yTimes1000:0,zTimes1000:-894},{xTimes1000:447,yTimes1000:-0,zTimes1000:894},{xTimes1000:-447,yTimes1000:-525,zTimes1000:723},{xTimes1000:1e3,yTimes1000:-0,zTimes1000:0},{xTimes1000:447,yTimes1000:850,zTimes1000:276},{xTimes1000:447,yTimes1000:-525,zTimes1000:-723},{xTimes1000:446,yTimes1000:-850,zTimes1000:276}],Pe=[{xTimes1000:-65,yTimes1000:996,zTimes1000:55},{xTimes1000:165,yTimes1000:-617,zTimes1000:768},{xTimes1000:489,yTimes1000:-8,zTimes1000:-871},{xTimes1000:-993,yTimes1000:17,zTimes1000:111},{xTimes1000:650,yTimes1000:603,zTimes1000:461},{xTimes1000:-650,yTimes1000:-603,zTimes1000:-461},{xTimes1000:993,yTimes1000:-17,zTimes1000:-111},{xTimes1000:-489,yTimes1000:8,zTimes1000:871},{xTimes1000:-165,yTimes1000:617,zTimes1000:-768},{xTimes1000:65,yTimes1000:-996,zTimes1000:-55}],xe=[{xTimes1000:-921,yTimes1000:-198,zTimes1000:-333},{xTimes1000:288,yTimes1000:897,zTimes1000:-333},{xTimes1000:-0,yTimes1000:0,zTimes1000:-1e3},{xTimes1000:-633,yTimes1000:698,zTimes1000:333},{xTimes1000:633,yTimes1000:-698,zTimes1000:-333},{xTimes1000:0,yTimes1000:-0,zTimes1000:1e3},{xTimes1000:-288,yTimes1000:-897,zTimes1000:333},{xTimes1000:921,yTimes1000:198,zTimes1000:333}],je=[{xTimes1000:-1e3,yTimes1000:0,zTimes1000:0},{xTimes1000:0,yTimes1000:1e3,zTimes1000:0},{xTimes1000:0,yTimes1000:0,zTimes1000:1e3},{xTimes1000:0,yTimes1000:0,zTimes1000:-1e3},{xTimes1000:0,yTimes1000:-1e3,zTimes1000:0},{xTimes1000:1e3,yTimes1000:0,zTimes1000:0}],Fe=[63,68,70,72,73,75,76,77,78,79,79,80,81,82,82,83,84,84,85,86,86,87,87,88,89,89,90,90,91,91,92,92,93,93,94,94,95,95,95,96,96,97,97,98,98,98,99,99,100,100,100,101,101,102,102,102,103,103,104,104,104,105,105,105,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,144,144,144,145,145,145,146,146,146,147,147,147,148,148,149,149,149,150,150,150,151,151,152,152,152,153,153,154,154,154,155,155,156,156,156,157,157,158,158,159,159,159,160,160,161,161,162,162,163,163,164,164,165,165,166,167,167,168,168,169,170,170,171,172,172,173,174,175,175,176,177,178,179,181,182,184,186,191];function Ee(e){return 64+Fe[255&e]}class Se extends ${constructor(){super(...arguments),this.normals=[],this.faceNormal=be(),this.backVector=be(),this.baseColorParam=0}get preset(){return this.animationPreset}start(e){super.start(e);const t=this.preset,i=this.die.faceCount;this.normals=function(e){switch(e){case"d20":return Ae;case"d12":return Re;case"d10":case"d00":return Pe;case"d8":return xe;default:return je}}(this.die.dieType);const n=this.die.topFace;this.faceNormal=this.normals[n];let r=1,o=this.normals[(n+r)%i];for(;Math.abs(ge(this.faceNormal,o))>800&&r<i;)r+=1,o=Object.assign({},this.normals[(n+r)%i]);const a=ye(this.faceNormal,o);switch(he(a),this.backVector=ye(a,this.faceNormal),t.mainGradientColorType){case u.faceToGradient:this.baseColorParam=1e3*this.die.currentFace/i;break;case u.faceToRainbowWheel:this.baseColorParam=256*this.die.currentFace/i;break;case u.none:default:this.baseColorParam=0}}updateLEDs(e,t,i){const n=this.preset,r=this.die.ledCount,o=e-this.startTime,a=n.duration*n.fade/510;let s=255;o<=a?s=255*o/a:o>=n.duration-a&&(s=255*(n.duration-o)/a);const l=o*n.axisScrollSpeedTimes1000/n.duration,c=o*n.angleScrollSpeedTimes1000/n.duration,d=1e3*o/n.duration,f=this.bits.getRgbTrack(n.gradientTrackOffset),m=this.bits.getRgbTrack(n.axisGradientTrackOffset),p=this.bits.getRgbTrack(n.angleGradientTrackOffset);for(let e=0;e<r;++e){const r=we(this.die.dieType,e),o=ge(this.faceNormal,this.normals[r]),a=1e3*(Ee((1275*o+1275e3)/1e4)-128)/128,g=1e3*a/n.axisScaleTimes1000+n.axisOffsetTimes1000+l,v=m.evaluateColor(g,this.bits,this.die),w=ve(this.normals[r],(h=o,{xTimes1000:(b=this.faceNormal).xTimes1000*h/1e3,yTimes1000:b.yTimes1000*h/1e3,zTimes1000:b.zTimes1000*h/1e3}));he(w);let C=Ee((1275*ge(this.backVector,w)+1275e3)/1e4);ge(ye(this.backVector,this.normals[r]),this.faceNormal)<0&&(C=255-C);const T=((1e3*(C-128)/128+1e3)/2+c)%1e3,_=p.evaluateColor(T,this.bits,this.die);let A=0;switch(n.mainGradientColorType){case u.faceToGradient:{const e=this.baseColorParam+a*n.mainGradientColorVar/1e3;A=f.evaluateColor(e,this.bits,this.die)}break;case u.faceToRainbowWheel:A=O((this.baseColorParam+a*n.mainGradientColorVar*256/1e6)%256);break;case u.none:default:A=f.evaluateColor(d,this.bits,this.die)}t[e]=e,i[e]=k(y(A,y(v,_)),s)}var b,h;return r}stop(e){return this.setIndices(f.faceMaskAll,e)}}var De=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Me{constructor(){this.type=s.normals,this.animFlags=0,this.duration=0,this.gradientTrackOffset=0,this.axisGradientTrackOffset=0,this.angleGradientTrackOffset=0,this.axisScaleTimes1000=0,this.axisOffsetTimes1000=0,this.axisScrollSpeedTimes1000=0,this.angleScrollSpeedTimes1000=0,this.fade=0,this.mainGradientColorType=u.none,this.mainGradientColorVar=0}createInstance(e,t){return new Se(this,e,t)}}De([(0,a.serializable)(1)],Me.prototype,"type",void 0),De([(0,a.serializable)(1)],Me.prototype,"animFlags",void 0),De([(0,a.serializable)(2)],Me.prototype,"duration",void 0),De([(0,a.serializable)(2)],Me.prototype,"gradientTrackOffset",void 0),De([(0,a.serializable)(2)],Me.prototype,"axisGradientTrackOffset",void 0),De([(0,a.serializable)(2)],Me.prototype,"angleGradientTrackOffset",void 0),De([(0,a.serializable)(2,{numberFormat:"signed"})],Me.prototype,"axisScaleTimes1000",void 0),De([(0,a.serializable)(2,{numberFormat:"signed"})],Me.prototype,"axisOffsetTimes1000",void 0),De([(0,a.serializable)(2,{numberFormat:"signed"})],Me.prototype,"axisScrollSpeedTimes1000",void 0),De([(0,a.serializable)(2,{numberFormat:"signed"})],Me.prototype,"angleScrollSpeedTimes1000",void 0),De([(0,a.serializable)(1)],Me.prototype,"fade",void 0),De([(0,a.serializable)(1)],Me.prototype,"mainGradientColorType",void 0),De([(0,a.serializable)(2)],Me.prototype,"mainGradientColorVar",void 0);class Ge extends ${constructor(){super(...arguments),this._lastMillis=-1,this._animInstances=[]}get preset(){return this.animationPreset}start(e){super.start(e),this._lastMillis=-1;const t=this.preset,i=[t.animation0Offset,t.animation1Offset,t.animation2Offset,t.animation3Offset],n=[t.animation0Delay,t.animation1Delay,t.animation2Delay,t.animation3Delay];this._animInstances.length=0;for(let e=0;e<t.animationCount;e++){const t=i[e],r=n[e];this._animInstances.push({anim:this.bits.getAnimation(t).createInstance(this.bits,this.die),delay:r,started:!1})}}updateLEDs(e,t,i){const n=this.preset,r=this._lastMillis-this.startTime,o=e-this.startTime;this._lastMillis=e;let a=0;const s=Array(f.maxLEDsCount),l=Array(f.maxLEDsCount);for(let c=0;c<n.animationCount;c++){const n=this._animInstances[c].delay;if(!this._animInstances[c].started&&n>r&&n<=o&&(this._animInstances[c].anim.start(e),this._animInstances[c].started=!0),this._animInstances[c].started){s.fill(0),l.fill(0);const n=this._animInstances[c].anim.updateLEDs(e,s,l);for(let e=0;e<n;e++){const n=t.indexOf(s[e]);n>=0&&n<a?i[n]=v(i[n],l[e]):(t[a]=s[e],i[a]=l[e],++a)}}}return a}stop(){return 0}}var ze=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Ve{constructor(){this.type=s.sequence,this.animFlags=0,this.duration=0,this.animation0Offset=0,this.animation0Delay=0,this.animation1Offset=0,this.animation1Delay=0,this.animation2Offset=0,this.animation2Delay=0,this.animation3Offset=0,this.animation3Delay=0,this.animationCount=0}createInstance(e,t){return new Ge(this,e,t)}}ze([(0,a.serializable)(1)],Ve.prototype,"type",void 0),ze([(0,a.serializable)(1)],Ve.prototype,"animFlags",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"duration",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation0Offset",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation0Delay",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation1Offset",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation1Delay",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation2Offset",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation2Delay",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation3Offset",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animation3Delay",void 0),ze([(0,a.serializable)(2)],Ve.prototype,"animationCount",void 0);class We{constructor(){this.timeAndColor=0}get time(){return 2*((65535&this.timeAndColor)>>7)}get colorIndex(){return 127&this.timeAndColor}getColor(e,t){return e.getColor32(this.colorIndex,t)}setTimeAndColorIndex(e,t){const i=Math.round(1e3*Math.max(0,e))/2&511;this.timeAndColor=i<<7|127&t}equals(e){return this.timeAndColor===e.timeAndColor}}!function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([(0,a.serializable)(2)],We.prototype,"timeAndColor",void 0);var Ie=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Ue{constructor(){this.keyframesOffset=0,this.keyFrameCount=0,this.ledMask=0}getDuration(e){return e.getRgbKeyframe(this.keyframesOffset+this.keyFrameCount-1).time}getKeyframe(e,t){return(0,a.assert)(t>=0&&t<this.keyFrameCount,`Invalid key frame index: ${t} (count: ${this.keyFrameCount})`),e.getRgbKeyframe(this.keyframesOffset+t)}evaluate(e,t,i,n,r){if(0===this.keyFrameCount)return 0;const o=this.evaluateColor(e,t,i);let a=0;for(let e=0;e<f.maxLEDsCount;++e)0!=(this.ledMask&1<<e)&&(n[a]=e,r[a]=o,a++);return a}evaluateColor(e,t,i){if(0===this.keyFrameCount)return 0;let n=0;for(;n<this.keyFrameCount&&this.getKeyframe(t,n).time<e;)n++;let r=0;if(0===n)r=this.getKeyframe(t,n).getColor(t,i);else if(n===this.keyFrameCount)r=this.getKeyframe(t,n-1).getColor(t,i);else{const o=this.getKeyframe(t,n),a=o.time,s=o.getColor(t,i),l=this.getKeyframe(t,n-1),c=l.time;r=w(l.getColor(t,i),c,s,a,e)}return r}extractLEDIndices(e){let t=0;for(let i=0;i<f.maxLEDsCount;++i)0!=(this.ledMask&1<<i)&&(e[t]=i,t++);return t}equals(e){return this.keyframesOffset===e.keyframesOffset&&this.keyFrameCount===e.keyFrameCount&&this.ledMask===e.ledMask}}Ie([(0,a.serializable)(2)],Ue.prototype,"keyframesOffset",void 0),Ie([(0,a.serializable)(1,{padding:1})],Ue.prototype,"keyFrameCount",void 0),Ie([(0,a.serializable)(4)],Ue.prototype,"ledMask",void 0);class Be{constructor(){this.timeAndIntensity=0}get time(){return 2*((65535&this.timeAndIntensity)>>7)}get intensity(){return 2*(127&this.timeAndIntensity)}setTimeAndIntensity(e,t){const i=Math.round(1e3*Math.max(0,e))/2&511,n=127&Math.floor(t/2);this.timeAndIntensity=i<<7|n}equals(e){return this.timeAndIntensity===e.timeAndIntensity}}!function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([(0,a.serializable)(2)],Be.prototype,"timeAndIntensity",void 0);var Ne=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Le{constructor(){this.keyframesOffset=0,this.keyFrameCount=0,this.ledMask=0}getDuration(e){return e.getRgbKeyframe(this.keyframesOffset+this.keyFrameCount-1).time}getKeyframe(e,t){return(0,a.assert)(t>=0&&t<this.keyFrameCount,`Invalid key frame index: ${t} (count: ${this.keyFrameCount})`),e.getKeyframe(this.keyframesOffset+t)}evaluate(e,t,i,n,r,o){if(0===this.keyFrameCount)return 0;const a=k(t,this.evaluateIntensity(e,i));let s=0;for(let e=0;e<n;++e)0!=(this.ledMask&1<<e)&&(r[s]=e,o[s]=a,s++);return s}evaluateIntensity(e,t){let i=0;for(;i<this.keyFrameCount&&this.getKeyframe(e,i).time<t;)i++;if(0===i)return this.getKeyframe(e,i).intensity;if(i===this.keyFrameCount)return this.getKeyframe(e,i-1).intensity;{const n=this.getKeyframe(e,i),r=n.time,o=n.intensity,a=this.getKeyframe(e,i-1),s=a.time;return C(a.intensity,s,o,r,t)}}extractLEDIndices(e){let t=0;for(let i=0;i<f.maxLEDsCount;++i)0!=(this.ledMask&1<<i)&&(e[t]=i,t++);return t}equals(e){return this.keyframesOffset===e.keyframesOffset&&this.keyFrameCount===e.keyFrameCount&&this.ledMask===e.ledMask}}Ne([(0,a.serializable)(2)],Le.prototype,"keyframesOffset",void 0),Ne([(0,a.serializable)(1,{padding:1})],Le.prototype,"keyFrameCount",void 0),Ne([(0,a.serializable)(4)],Le.prototype,"ledMask",void 0);class Ke{get currentFace(){return this.tryRoll(),this._currentFace}constructor(e="d20"){this._currentFace=0,this._lastRoll=0,this.dieType=e,this.ledCount=Oe(e),this.faceCount=ke(e),this.topFace=Ce(e),this.tryRoll()}tryRoll(){const e=Date.now();e-this._lastRoll>5e3&&(this._lastRoll=e,this._currentFace=Math.floor(Math.random()*this.faceCount))}}const $e={getLEDCount(e){switch(e){case"unknown":return 0;case"d4":case"d6":case"d6fudge":return 6;case"d6pipped":return 21;case"d8":return 8;case"d10":case"d00":return 10;case"d12":return 12;case"d20":return 20;default:(0,a.assertNever)(e)}},getFaceCount(e){switch(e){case"unknown":return 0;case"d4":return 4;case"d6":case"d6fudge":case"d6pipped":return 6;case"d8":return 8;case"d10":case"d00":return 10;case"d12":return 12;case"d20":return 20;default:(0,a.assertNever)(e)}},getTopFace:e=>"d00"===e||"d10"===e?0:$e.getFaceCount(e),estimateDieType(e){switch(e){case 4:return"d4";case 6:return"d6";case 8:return"d8";case 10:return"d10";case 12:return"d12";case 20:return"d20";case 21:return"d6pipped";default:return"unknown"}},faceFromIndex(e,t,i){switch(t){case"d4":return i?e+1:2===e?2:3===e?3:5===e?4:1;case"d10":case"unknown":return e;case"d00":return 10*e;default:return e+1}},indexFromFace(e,t,i){switch(t){case"d4":return i?e-1:2===e?2:3===e?3:4===e?5:0;case"d10":case"unknown":return e;case"d00":return Math.floor(e/10);default:return e-1}},getDieFaces(e){switch(e){case"unknown":return[];case"d4":return(0,a.range)(1,5);case"d6":case"d6pipped":case"d6fudge":return(0,a.range)(1,7);case"d8":return(0,a.range)(1,9);case"d10":return(0,a.range)(0,10);case"d00":return(0,a.range)(0,100,10);case"d12":return(0,a.range)(1,13);case"d20":return(0,a.range)(1,21);default:(0,a.assertNever)(e)}},mapFaceForAnimation:(e,t)=>1+$e.indexFromFace(e,t)},qe={unknown:(0,a.enumValue)(0),onyxBlack:(0,a.enumValue)(),hematiteGrey:(0,a.enumValue)(),midnightGalaxy:(0,a.enumValue)(),auroraSky:(0,a.enumValue)(),clear:(0,a.enumValue)(),custom:255},He={unknown:(0,a.enumValue)(0),d4:(0,a.enumValue)(),d6:(0,a.enumValue)(),d8:(0,a.enumValue)(),d10:(0,a.enumValue)(),d00:(0,a.enumValue)(),d12:(0,a.enumValue)(),d20:(0,a.enumValue)(),d6pipped:(0,a.enumValue)(),d6fudge:(0,a.enumValue)()};var Qe=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Ye{constructor(){this.rulesOffset=0,this.rulesCount=0}}Qe([(0,a.serializable)(2)],Ye.prototype,"rulesOffset",void 0),Qe([(0,a.serializable)(2)],Ye.prototype,"rulesCount",void 0);var Xe=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Je{constructor(){this.condition=0,this.actionOffset=0,this.actionCount=0,this.actionCountPadding=0}}Xe([(0,a.serializable)(2)],Je.prototype,"condition",void 0),Xe([(0,a.serializable)(2)],Je.prototype,"actionOffset",void 0),Xe([(0,a.serializable)(2)],Je.prototype,"actionCount",void 0),Xe([(0,a.serializable)(2)],Je.prototype,"actionCountPadding",void 0);const Ze={none:(0,a.enumValue)(0),playAnimation:(0,a.enumValue)(),playAudioClip:(0,a.enumValue)(),makeWebRequest:(0,a.enumValue)(),speakText:(0,a.enumValue)()};var et=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class tt{constructor(){this.type=Ze.playAnimation,this.animIndex=0,this.faceIndex=0,this.loopCount=0}}et([(0,a.serializable)(1)],tt.prototype,"type",void 0),et([(0,a.serializable)(1)],tt.prototype,"animIndex",void 0),et([(0,a.serializable)(1,{numberFormat:"signed"})],tt.prototype,"faceIndex",void 0),et([(0,a.serializable)(1)],tt.prototype,"loopCount",void 0);var it=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class nt{constructor(){this.type=Ze.playAudioClip,this._unused=0,this.actionId=0}}it([(0,a.serializable)(1)],nt.prototype,"type",void 0),it([(0,a.serializable)(1)],nt.prototype,"_unused",void 0),it([(0,a.serializable)(2)],nt.prototype,"actionId",void 0);var rt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class ot{constructor(){this.type=Ze.makeWebRequest,this._unused=0,this.actionId=0}}rt([(0,a.serializable)(1)],ot.prototype,"type",void 0),rt([(0,a.serializable)(1)],ot.prototype,"_unused",void 0),rt([(0,a.serializable)(2)],ot.prototype,"actionId",void 0);var at=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class st{constructor(){this.type=Ze.speakText,this._unused=0,this.actionId=0}}at([(0,a.serializable)(1)],st.prototype,"type",void 0),at([(0,a.serializable)(1)],st.prototype,"_unused",void 0),at([(0,a.serializable)(2)],st.prototype,"actionId",void 0);const lt={none:(0,a.enumValue)(0),helloGoodbye:(0,a.enumValue)(),handling:(0,a.enumValue)(),rolling:(0,a.enumValue)(),faceCompare:(0,a.enumValue)(),crooked:(0,a.enumValue)(),connection:(0,a.enumValue)(),battery:(0,a.enumValue)(),idle:(0,a.enumValue)(),rolled:(0,a.enumValue)()};var ct=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const dt={ok:(0,a.enumFlag)(0),low:(0,a.enumFlag)(),charging:(0,a.enumFlag)(),done:(0,a.enumFlag)(),badCharging:(0,a.enumFlag)(),error:(0,a.enumFlag)()};class ut{constructor(){this.type=lt.battery,this.flags=0,this.repeatPeriodMs=0}}ct([(0,a.serializable)(1)],ut.prototype,"type",void 0),ct([(0,a.serializable)(1)],ut.prototype,"flags",void 0),ct([(0,a.serializable)(2)],ut.prototype,"repeatPeriodMs",void 0);var ft=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const mt={connected:(0,a.enumFlag)(0),disconnected:(0,a.enumFlag)()};class pt{constructor(){this.type=lt.connection,this.flags=0}}ft([(0,a.serializable)(1)],pt.prototype,"type",void 0),ft([(0,a.serializable)(1,{padding:2})],pt.prototype,"flags",void 0);var bt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const ht={less:(0,a.enumFlag)(0),equal:(0,a.enumFlag)(),greater:(0,a.enumFlag)()};class gt{constructor(){this.type=lt.faceCompare,this.faceIndex=0,this.flags=0}}bt([(0,a.serializable)(1)],gt.prototype,"type",void 0),bt([(0,a.serializable)(1)],gt.prototype,"faceIndex",void 0),bt([(0,a.serializable)(1,{padding:1})],gt.prototype,"flags",void 0);var yt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};const vt={hello:(0,a.enumFlag)(0),goodbye:(0,a.enumFlag)()};class wt{constructor(){this.type=lt.helloGoodbye,this.flags=0}}yt([(0,a.serializable)(1)],wt.prototype,"type",void 0),yt([(0,a.serializable)(1,{padding:2})],wt.prototype,"flags",void 0);class Ct{constructor(){this.type=lt.crooked}}!function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([(0,a.serializable)(1,{padding:3})],Ct.prototype,"type",void 0);class kt{constructor(){this.type=lt.handling}}!function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([(0,a.serializable)(1,{padding:3})],kt.prototype,"type",void 0);var Ot=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Tt{constructor(){this.type=lt.idle,this.repeatPeriodMs=0}}Ot([(0,a.serializable)(1,{padding:1})],Tt.prototype,"type",void 0),Ot([(0,a.serializable)(2)],Tt.prototype,"repeatPeriodMs",void 0);var _t=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class At{constructor(){this.type=lt.rolling,this.repeatPeriodMs=0}}_t([(0,a.serializable)(1,{padding:1})],At.prototype,"type",void 0),_t([(0,a.serializable)(2)],At.prototype,"repeatPeriodMs",void 0);var Rt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class Pt{constructor(){this.type=lt.rolled,this.faceMask=0}}function xt(e){switch(e){case"none":return;case"simple":return{name:"Simple Flashes",order:0};case"rainbow":return{name:"Colorful Rainbow",order:1};case"keyframed":return{name:"Colored Design",order:3};case"gradientPattern":return{name:"Mixed Design",order:4};case"gradient":return{name:"Simple Gradient",order:2};case"noise":return{name:"Noise",order:5};case"normals":return{name:"Normals",order:6};case"sequence":return{name:"Sequence",order:7};case"cycle":case"name":throw new Error(`getAnimationTypeDisplayName: unsupported animation type: ${e}`);default:(0,a.assertNever)(e,`Unknown animation type: ${e}`)}}function jt(e){switch(e){case"none":return;case"playAnimation":return{name:"Trigger Pattern",order:0};case"playAudioClip":return{name:"Play Audio Clip",order:1};case"makeWebRequest":return{name:"Make Web Request",order:2};case"speakText":return{name:"Speak Text",order:3};default:(0,a.assertNever)(e,`Unknown action type: ${e}`)}}function Ft(e){switch(e){case"none":return;case"helloGoodbye":return{name:"Pixel wakes up / sleeps",order:0};case"handling":return{name:"Pixel is picked up",order:1};case"rolling":return{name:"Pixel is rolling",order:2};case"faceCompare":return{name:"Pixel roll is...",order:3};case"crooked":return{name:"Pixel is crooked",order:4};case"connection":return{name:"Bluetooth Event...",order:5};case"battery":return{name:"Battery Event...",order:6};case"idle":return{name:"Pixel is idle for...",order:7};case"rolled":return{name:"Pixel roll is one of...",order:8};default:(0,a.assertNever)(e,`Unknown condition type: ${e}`)}}Rt([(0,a.serializable)(1,{padding:3})],Pt.prototype,"type",void 0),Rt([(0,a.serializable)(4)],Pt.prototype,"faceMask",void 0);class Et{get animationBits(){return this._animationBits}get animations(){return this._animationBits.animations}get conditions(){return this._conditions}get actions(){return this._actions}get rules(){return this._rules}get brightness(){return this._brightness}set brightness(e){this._brightness=e}get profile(){return this._profile}set profile(e){this._profile=e}constructor(e){this._conditions=[],this._actions=[],this._rules=[],this._profile=new Ye,this._brightness=255,this._animationBits=null!=e?e:new K}computeDataSetByteSize(){return this._animationBits.computeDataSize()+m(2*this.animations.length)+(0,a.byteSizeOf)(this.animations)+m(2*this._conditions.length)+(0,a.byteSizeOf)(this._conditions)+m(2*this._actions.length)+(0,a.byteSizeOf)(this._actions)+(0,a.byteSizeOf)(this._rules)+(this._profile?(0,a.byteSizeOf)(this._profile):0)+1}toSingleAnimationByteArray(){(0,a.assert)(1===this.animations.length,"Need exactly one animation"),(0,a.assert)(this._animationBits.palette.length<128,"Palette has more than 127 colors: "+this._animationBits.palette.length);const e=this._animationBits.computeDataSize()+(0,a.byteSizeOf)(this.animations[0]),[t,i]=this._animationBits.serialize(new DataView(new ArrayBuffer(e)));return(0,a.serialize)(this.animations[0],{dataView:t,byteOffset:i}),new Uint8Array(t.buffer)}toAnimationsByteArray(){(0,a.assert)(this.animations.length>0,"No animations"),(0,a.assert)(this._animationBits.palette.length<128,"Palette has more than 127 colors: "+this._animationBits.palette.length);const e=this._animationBits.computeDataSize()+m(2*this.animations.length)+(0,a.byteSizeOf)(this.animations);let[t,i]=this._animationBits.serialize(new DataView(new ArrayBuffer(e))),n=0;return this.animations.forEach(((e,r)=>{t.setUint16(i+2*r,n,!0),n+=(0,a.byteSizeOf)(e)})),i+=m(2*this.animations.length),[t,i]=(0,a.serialize)(this.animations,{dataView:t,byteOffset:i}),new Uint8Array(t.buffer)}toByteArray(){const e=this.computeDataSetByteSize(),[t]=this.serialize(new DataView(new ArrayBuffer(e)));return new Uint8Array(t.buffer)}serialize(e,t=0){(0,a.assert)(this._animationBits.palette.length<128,"Palette has more than 127 colors: "+this._animationBits.palette.length),[e,t]=this._animationBits.serialize(e);let i=0;this.animations.forEach(((n,r)=>{e.setUint16(t+2*r,i,!0),i+=(0,a.byteSizeOf)(n)})),t+=m(2*this.animations.length),[e,t]=(0,a.serialize)(this.animations,{dataView:e,byteOffset:t});let n=0;this._conditions.forEach(((i,r)=>{e.setUint16(t+2*r,n,!0),n+=(0,a.byteSizeOf)(i)})),t+=m(2*this._conditions.length),[e,t]=(0,a.serialize)(this._conditions,{dataView:e,byteOffset:t});let r=0;return this._actions.forEach(((i,n)=>{e.setUint16(t+2*n,r,!0),r+=(0,a.byteSizeOf)(i)})),t+=m(2*this._actions.length),[e,t]=(0,a.serialize)(this._actions,{dataView:e,byteOffset:t}),[e,t]=(0,a.serialize)(this._rules,{dataView:e,byteOffset:t}),this._profile&&([e,t]=(0,a.serialize)(this._profile,{dataView:e,byteOffset:t})),[e,t]}static computeHash(e){return(0,a.bernsteinHash)(e)}}},1371:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AssertionError:()=>n,DecodeUtf8Error:()=>c,SequentialPromiseQueue:()=>j,SerializationError:()=>v,assert:()=>r,assertNever:()=>o,bernsteinHash:()=>a,bitIndexToFlag:()=>D,bitsToFlags:()=>E,bitsToIndices:()=>F,byteSizeOf:()=>T,byteSizeOfProp:()=>k,byteSizeOfPropWithPadding:()=>O,combineFlags:()=>S,createTypedEventEmitter:()=>l,decodeUtf8:()=>d,delay:()=>f,deserialize:()=>x,encodeUtf8:()=>u,enumFlag:()=>h,enumValue:()=>p,getSerializableProperties:()=>C,getValueKeyName:()=>z,keysToValues:()=>M,range:()=>V,safeAssign:()=>g,serializable:()=>w,serialize:()=>P,valuesToKeys:()=>G});class n extends Error{constructor(e){super(e),this.name="AssertionError"}}function r(e,t){if(!e)throw new n(null!=t?t:`Assertion failed with value ${e}`)}function o(e,t){r(!1,null!=t?t:"assertNever() called")}function a(e){let t=5381;for(let i=0;i<e.length;++i)t=33*t^e[i];return t}var s=i(2699);function l(){return new s.EventEmitter}class c extends Error{constructor(e,t){super(e),this.name="DecodeUtf8Error",this.decodedString=t}}function d(e){let t=0,i="";for(;t<e.length;){let n=e[t++];if(!n)break;if(n>127)if(n>191&&n<224){if(t>=e.length)throw new c("Incomplete 2-bytes sequence",i);n=(31&n)<<6|63&e[t++]}else if(n>223&&n<240){if(t+1>=e.length)throw new c("Incomplete 3-bytes sequence",i);n=(15&n)<<12|(63&e[t++])<<6|63&e[t++]}else{if(!(n>239&&n<248))throw new c(`Unknown multibyte start 0x${n.toString(16)} at index ${t-1}`,i);if(t+2>=e.length)throw new c("Incomplete 4-bytes sequence",i);n=(7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++]}if(n<=65535)i+=String.fromCharCode(n);else{if(!(n<=1114111))throw new c(`Code point 0x${n.toString(16)} exceeds UTF-16 reach`,i);n-=65536,i+=String.fromCharCode(n>>10|55296),i+=String.fromCharCode(1023&n|56320)}}return i}function u(e){return new Uint8Array(function(e){const t=[];for(let i=0;i<e.length;i++){const n=e.codePointAt(i);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<65536?t.push(224|n>>12,128|n>>6&63,128|63&n):(i++,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(e))}async function f(e,t){return new Promise(((i,n)=>{if(null==t?void 0:t.aborted)n(new Error(`Call to delay(${e}) aborted on start`));else{const r=()=>{clearTimeout(o),n(new Error(`Call to delay(${e}) aborted before timeout`))};null==t||t.addEventListener("abort",r);const o=setTimeout((()=>{null==t||t.removeEventListener("abort",r),i()}),e)}}))}let m=0;function p(e){return void 0!==e&&(m=e),m++}let b=0;function h(e){void 0!==e&&(b=e);const t=1<<b;return b+=1,t}function g(e,t){return Object.assign(e,function(e){for(const t of Object.keys(e))void 0===e[t]&&delete e[t];return e}(t))}i(9605);const y=Symbol.for("PixelsAnimationSerializable");class v extends Error{constructor(e){super(e),this.name="SerializationError"}}function w(e,t){return function(i,n){const r=Reflect.getMetadata(y,i),o={propertyKey:n,size:e,options:t};r?r.push(o):Reflect.defineMetadata(y,[o],i)}}function C(e){return Reflect.getMetadata(y,e)}function k(e,t){var i,n,r,o;const a=null===(i=C(e))||void 0===i?void 0:i.find((e=>e.propertyKey===t));return(null===(n=null==a?void 0:a.options)||void 0===n?void 0:n.nullTerminated)||(null===(r=null==a?void 0:a.options)||void 0===r?void 0:r.terminator)?"dynamic":null!==(o=null==a?void 0:a.size)&&void 0!==o?o:0}function O(e,t){var i,n,r,o,a;const s=null===(i=C(e))||void 0===i?void 0:i.find((e=>e.propertyKey===t));return(null===(n=null==s?void 0:s.options)||void 0===n?void 0:n.nullTerminated)||(null===(r=null==s?void 0:s.options)||void 0===r?void 0:r.terminator)?"dynamic":s?s.size+(null!==(a=null===(o=s.options)||void 0===o?void 0:o.padding)&&void 0!==a?a:0):0}function T(e){var t,i;return Array.isArray(e)?e.reduce(((e,t)=>e+T(t)),0):null!==(i=null===(t=C(e))||void 0===t?void 0:t.reduce(((e,t)=>{var i,n,r,o;if((null===(i=t.options)||void 0===i?void 0:i.nullTerminated)||(null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.terminator))throw new v("Dynamic size");return e+t.size+(null!==(o=null===(r=t.options)||void 0===r?void 0:r.padding)&&void 0!==o?o:0)}),0))&&void 0!==i?i:0}function _(e,t){const i=C(e);if(!(null==i?void 0:i.length))throw new v("Object has no serializable property");for(const n of i){const i=e[n.propertyKey],r=i instanceof ArrayBuffer||i&&i.buffer instanceof ArrayBuffer;if("number"!=typeof i&&"bigint"!=typeof i&&"boolean"!=typeof i&&"string"!=typeof i&&!r)throw new v(Array.isArray(i)?"Invalid property type, got an array, use an 'ArrayBuffer' instead":`Invalid property type, got ${typeof i} for ${n.propertyKey} but expected number or bigint`);if(!t(n,i))break}}function A(e,t){const i=Number(e);let n,r;switch(t){case"int8":n=-128,r=127;break;case"uint8":n=0,r=255;break;case"int16":n=-32768,r=32767;break;case"uint16":n=0,r=65535;break;case"int32":n=-2147483648,r=2147483647;break;case"uint32":n=0,r=4294967295}if(n&&r){if(i<n)throw new v(`Value ${i} too small to fit in a ${t}`);if(i>r)throw new v(`Value ${i} too big to fit in a ${t}`)}return i}function R(e,t,i=0){if(Array.isArray(e)){const n={dataView:t,byteOffset:i};for(const t of e){const[e,i]=P(t,n);n.dataView=e,n.byteOffset=i}return[n.dataView,n.byteOffset]}return _(e,((e,n)=>{var r,o,a,s,l,c,d,f,m,p;let b;if("string"==typeof n?b=u(n).buffer:n instanceof ArrayBuffer?b=n:n.buffer&&n.buffer instanceof ArrayBuffer&&(b=n.buffer),b){const d=b.byteLength+("string"==typeof n?1:0);if(!(null===(r=e.options)||void 0===r?void 0:r.nullTerminated)&&!(null===(o=e.options)||void 0===o?void 0:o.terminator)&&e.size<d)throw new v(`Serialized value for \`${e.propertyKey}\` takes ${d} bytes but prop size is ${e.size}`);const u=new Uint8Array(b),f=(null===(a=e.options)||void 0===a?void 0:a.nullTerminated)||(null===(s=e.options)||void 0===s?void 0:s.terminator)?u.byteLength:Math.min(u.byteLength,e.size);for(let e=0;e<f;++e)t.setUint8(i,u[e]),++i;if(!(null===(l=e.options)||void 0===l?void 0:l.nullTerminated)&&!(null===(c=e.options)||void 0===c?void 0:c.terminator))for(let n=f;n<e.size;++n)t.setUint8(i,0),++i}else{const r="float"===(null===(d=e.options)||void 0===d?void 0:d.numberFormat),o="signed"===(null===(f=e.options)||void 0===f?void 0:f.numberFormat);!function(e,t,i,n,r,o){switch(n){case 1:r?e.setInt8(t,A(i,"int8")):e.setUint8(t,A(i,"uint8"));break;case 2:r?e.setInt16(t,A(i,"int16"),!0):e.setUint16(t,A(i,"uint16"),!0);break;case 4:o?e.setFloat32(t,A(i,"float32"),!0):r?e.setInt32(t,A(i,"int32"),!0):e.setInt32(t,A(i,"uint32"),!0);break;case 8:if(!o)throw new v("BigInt not supported");e.setFloat64(t,A(i,"float64"),!0);break;default:throw new v(`Invalid property size, got ${n} but expected 1, 2, 4, or 8`)}}(t,i,n,e.size,o,r),i+=e.size+(null!==(p=null===(m=e.options)||void 0===m?void 0:m.padding)&&void 0!==p?p:0)}return!0})),[t,i]}function P(e,t){var i;if(null==t?void 0:t.dataView)return R(e,t.dataView,null!==(i=t.byteOffset)&&void 0!==i?i:0);{const t=T(e),[i,n]=R(e,new DataView(new ArrayBuffer(t)));return r(n===i.buffer.byteLength,`Incorrect offset after serialization, got ${n} but expected ${i.buffer.byteLength}`),[i,n]}}function x(e,t,i){return function(e,t,i){function n(e,t,i,n){if("boolean"!=typeof n||"number"!=typeof i&&"bigint"!=typeof i){if(typeof i!=typeof n)throw new v(`Type mismatch, deserialized a ${typeof i} but but expected a ${typeof n}`)}else i=Boolean(i);e[t.propertyKey]=i}let r=0;return _(e,((o,a)=>{var s,l,u,f,m,p,b,h,g,y,w;if((null==i?void 0:i.allowSkipLastProps)&&r===t.byteLength)return!1;if(!(null===(s=o.options)||void 0===s?void 0:s.nullTerminated)&&!(null===(l=o.options)||void 0===l?void 0:l.terminator)&&r+o.size>t.byteLength)throw new v(`Not enough bytes for deserializing \`${o.propertyKey}\` of size ${o.size}`);if(Array.isArray(e))throw new v("Array type not supported for deserialization");if("string"==typeof a){const i=t.byteOffset+r;if(!(null===(u=o.options)||void 0===u?void 0:u.nullTerminated)&&!(null===(f=o.options)||void 0===f?void 0:f.terminator)&&i+o.size>t.buffer.byteLength)throw new v(`Unexpected property size, got ${o.size} but there are only ${t.buffer.byteLength-i} left`);const s=t.buffer.slice(i,(null===(m=o.options)||void 0===m?void 0:m.nullTerminated)?function(e,t){for(let i=t;i<e.byteLength;++i)if(!e.getUint8(i))return i;throw new v("Data is not null terminated")}(t,r)-1:(null===(p=o.options)||void 0===p?void 0:p.terminator)?t.byteOffset+t.byteLength:i+o.size);try{n(e,o,d(new Uint8Array(s)),a)}catch(t){if(!(t instanceof c))throw new v(null!==(b=null==t?void 0:t.message)&&void 0!==b?b:String(t));n(e,o,t.decodedString,a),console.warn(`Error decoding string for \`${o.propertyKey}\`: ${t}`)}r+=s.byteLength}else{const i="float"===(null===(h=o.options)||void 0===h?void 0:h.numberFormat),s="signed"===(null===(g=o.options)||void 0===g?void 0:g.numberFormat),l=function(e,t,i,n,r){switch(i){case 1:return n?e.getInt8(t):e.getUint8(t);case 2:return n?e.getInt16(t,!0):e.getUint16(t,!0);case 4:return r?e.getFloat32(t,!0):n?e.getInt32(t,!0):e.getUint32(t,!0);case 8:if(r)return e.getFloat64(t,!0);throw new v("BigInt not supported");default:throw new v(`Invalid property size, got ${i} but expected 1, 2, 4, or 8`)}}(t,r,o.size,s,i);n(e,o,l,a),r+=o.size}return r+=null!==(w=null===(y=o.options)||void 0===y?void 0:y.padding)&&void 0!==w?w:0,!0})),r}(e,t,i)}class j{constructor(){this._queue=[]}run(e){return new Promise(((t,i)=>{var n,r;this._queue.push((async()=>{var n,r;try{await e(),t()}catch(e){i(e)}this._queue.shift(),null===(r=(n=this._queue)[0])||void 0===r||r.call(n)})),1===this._queue.length&&(null===(r=(n=this._queue)[0])||void 0===r||r.call(n))}))}}function F(e){const t=[];if((e=Math.floor(null!=e?e:0))>0){let i=e.toString(2),n=0;for(;i.length;)"1"===i.at(-1)&&t.push(n),i=i.substring(0,i.length-1),++n}return t}function E(e){return F(e).map(D)}function S(e){return e.reduce(((e,t)=>(r(t<2147483648,`combineFlags: Flag value greater or equal to 2^31, can't combine using OR operator, got ${t}`),e|t)),0)}function D(e){return r(e<53,`bitIndexToFlag: Bit index greater than maximum precision of 64 bits floating-point numbers (52 bits mantissa), got ${e}`),Math.pow(2,e)}function M(e,t,i){return e.map((e=>{const n=t[e];if(void 0!==n)return n;if(i)return i(e);throw new Error(`keysToValues: Missing key ${e}`)}))}function G(e,t,i){const n=[];for(const r of e){const e=z(r,t);if(void 0!==e)n.push(e);else{if(!i)throw new Error(`valuesToKeys: Missing key for value ${r}`);n.push(i(r))}}return n}function z(e,t){for(const[i,n]of Object.entries(t))if(n===e)return i}function V(e,t,i){let n=e;void 0===t&&(t=e,n=0),i||(i=1);let r=(t-n)/i;r<0&&(r=-r,i=-i);const o=Array(Math.floor(r));let a=n,s=0;for(;s<r;)o[s]=a,a+=i,s+=1;return o}},9605:(e,t,i)=>{var n;!function(e){!function(t){var n="object"==typeof globalThis?globalThis:"object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),r=o(e);function o(e,t){return function(i,n){Object.defineProperty(e,i,{configurable:!0,writable:!0,value:n}),t&&t(i,n)}}void 0!==n.Reflect&&(r=o(n.Reflect,r)),function(e,t){var i=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!a&&!s,c={create:a?function(){return B(Object.create(null))}:s?function(){return B({__proto__:null})}:function(){return B({})},has:l?function(e,t){return i.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return i.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},d=Object.getPrototypeOf(Function),u="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},t=[],i=function(){function e(e,t,i){this._index=0,this._keys=e,this._values=t,this._selector=i}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var i=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var i=this._find(e,!0);return this._values[i]=t,this},t.prototype.delete=function(t){var i=this._find(t,!1);if(i>=0){for(var n=this._keys.length,r=i+1;r<n;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,D(t,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new i(this._keys,this._values,n)},t.prototype.values=function(){return new i(this._keys,this._values,r)},t.prototype.entries=function(){return new i(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){if(!D(this._cacheKey,e)){this._cacheIndex=-1;for(var i=0;i<this._keys.length;i++)if(D(this._keys[i],e)){this._cacheIndex=i;break}}return this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function r(e,t){return t}function a(e,t){return[e,t]}}(),f="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}(),m="function"==typeof WeakMap?WeakMap:function(){var e=16,t=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var e;do{e="@@WeakMap@@"+s()}while(c.has(t,e));return t[e]=!0,e}function o(e,t){if(!i.call(e,n)){if(!t)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function a(e,t){for(var i=0;i<t;++i)e[i]=255*Math.random()|0;return e}function s(){var t=function(e){if("function"==typeof Uint8Array){var t=new Uint8Array(e);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):a(t,e),t}return a(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<e;++n){var r=t[n];4!==n&&6!==n&&8!==n||(i+="-"),r<16&&(i+="0"),i+=r.toString(16).toLowerCase()}return i}}(),p=n?Symbol.for("@reflect-metadata:registry"):void 0,b=function(){var e;return!_(p)&&R(t.Reflect)&&Object.isExtensible(t.Reflect)&&(e=t.Reflect[p]),_(e)&&(e=function(){var e,i,n,r;_(p)||void 0===t.Reflect||p in t.Reflect||"function"!=typeof t.Reflect.defineMetadata||(e=function(e){var t=e.defineMetadata,i=e.hasOwnMetadata,n=e.getOwnMetadata,r=e.getOwnMetadataKeys,o=e.deleteMetadata,a=new m;return{isProviderFor:function(e,t){var i=a.get(e);return!(_(i)||!i.has(t))||!!r(e,t).length&&(_(i)&&(i=new f,a.set(e,i)),i.add(t),!0)},OrdinaryDefineOwnMetadata:t,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:n,OrdinaryOwnMetadataKeys:r,OrdinaryDeleteMetadata:o}}(t.Reflect));var o=new m,a={registerProvider:s,getProvider:c,setProvider:b};return a;function s(t){if(!Object.isExtensible(a))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case e===t:break;case _(i):i=t;break;case i===t:break;case _(n):n=t;break;case n===t:break;default:void 0===r&&(r=new f),r.add(t)}}function l(t,o){if(!_(i)){if(i.isProviderFor(t,o))return i;if(!_(n)){if(n.isProviderFor(t,o))return i;if(!_(r))for(var a=G(r);;){var s=V(a);if(!s)return;var l=z(s);if(l.isProviderFor(t,o))return W(a),l}}}if(!_(e)&&e.isProviderFor(t,o))return e}function c(e,t){var i,n=o.get(e);return _(n)||(i=n.get(t)),_(i)?(_(i=l(e,t))||(_(n)&&(n=new u,o.set(e,n)),n.set(t,i)),i):i}function d(e){if(_(e))throw new TypeError;return i===e||n===e||!_(r)&&r.has(e)}function b(e,t,i){if(!d(i))throw new Error("Metadata provider not registered.");var n=c(e,t);if(n!==i){if(!_(n))return!1;var r=o.get(e);_(r)&&(r=new u,o.set(e,r)),r.set(t,i)}return!0}}()),!_(p)&&R(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,p,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}(),h=function(e){var t=new m,i={isProviderFor:function(e,i){var n=t.get(e);return!_(n)&&n.has(i)},OrdinaryDefineOwnMetadata:function(e,t,i,r){n(i,r,!0).set(e,t)},OrdinaryHasOwnMetadata:function(e,t,i){var r=n(t,i,!1);return!_(r)&&x(r.has(e))},OrdinaryGetOwnMetadata:function(e,t,i){var r=n(t,i,!1);if(!_(r))return r.get(e)},OrdinaryOwnMetadataKeys:function(e,t){var i=[],r=n(e,t,!1);if(_(r))return i;for(var o=G(r.keys()),a=0;;){var s=V(o);if(!s)return i.length=a,i;var l=z(s);try{i[a]=l}catch(e){try{W(o)}finally{throw e}}a++}},OrdinaryDeleteMetadata:function(e,i,r){var o=n(i,r,!1);if(_(o))return!1;if(!o.delete(e))return!1;if(0===o.size){var a=t.get(i);_(a)||(a.delete(r),0===a.size&&t.delete(a))}return!0}};return b.registerProvider(i),i;function n(n,r,o){var a=t.get(n),s=!1;if(_(a)){if(!o)return;a=new u,t.set(n,a),s=!0}var l=a.get(r);if(_(l)){if(!o)return;if(l=new u,a.set(r,l),!e.setProvider(n,r,i))throw a.delete(r),s&&t.delete(n),new Error("Wrong provider for target.")}return l}}(b);function g(e,t,i){if(y(e,t,i))return!0;var n=I(t);return!A(n)&&g(e,n,i)}function y(e,t,i){var n=U(t,i,!1);return!_(n)&&x(n.OrdinaryHasOwnMetadata(e,t,i))}function v(e,t,i){if(y(e,t,i))return w(e,t,i);var n=I(t);return A(n)?void 0:v(e,n,i)}function w(e,t,i){var n=U(t,i,!1);if(!_(n))return n.OrdinaryGetOwnMetadata(e,t,i)}function C(e,t,i,n){U(i,n,!0).OrdinaryDefineOwnMetadata(e,t,i,n)}function k(e,t){var i=O(e,t),n=I(e);if(null===n)return i;var r=k(n,t);if(r.length<=0)return i;if(i.length<=0)return r;for(var o=new f,a=[],s=0,l=i;s<l.length;s++){var c=l[s];o.has(c)||(o.add(c),a.push(c))}for(var d=0,u=r;d<u.length;d++)c=u[d],o.has(c)||(o.add(c),a.push(c));return a}function O(e,t){var i=U(e,t,!1);return i?i.OrdinaryOwnMetadataKeys(e,t):[]}function T(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function _(e){return void 0===e}function A(e){return null===e}function R(e){return"object"==typeof e?null!==e:"function"==typeof e}function P(e,t){switch(T(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var i=3===t?"string":5===t?"number":"default",n=M(e,r);if(void 0!==n){var o=n.call(e,i);if(R(o))throw new TypeError;return o}return function(e,t){if("string"===t){var i=e.toString;if(E(i)&&!R(r=i.call(e)))return r;if(E(n=e.valueOf)&&!R(r=n.call(e)))return r}else{var n;if(E(n=e.valueOf)&&!R(r=n.call(e)))return r;var r,o=e.toString;if(E(o)&&!R(r=o.call(e)))return r}throw new TypeError}(e,"default"===i?"number":i)}function x(e){return!!e}function j(e){var t=P(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function F(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function E(e){return"function"==typeof e}function S(e){return"function"==typeof e}function D(e,t){return e===t||e!=e&&t!=t}function M(e,t){var i=e[t];if(null!=i){if(!E(i))throw new TypeError;return i}}function G(e){var t=M(e,o);if(!E(t))throw new TypeError;var i=t.call(e);if(!R(i))throw new TypeError;return i}function z(e){return e.value}function V(e){var t=e.next();return!t.done&&t}function W(e){var t=e.return;t&&t.call(e)}function I(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===d)return t;if(t!==d)return t;var i=e.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return t;var r=n.constructor;return"function"!=typeof r||r===e?t:r}function U(e,t,i){var n=b.getProvider(e,t);if(!_(n))return n;if(i){if(b.setProvider(e,t,h))return h;throw new Error("Illegal state.")}}function B(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,i,n){if(_(i)){if(!F(e))throw new TypeError;if(!S(t))throw new TypeError;return function(e,t){for(var i=e.length-1;i>=0;--i){var n=(0,e[i])(t);if(!_(n)&&!A(n)){if(!S(n))throw new TypeError;t=n}}return t}(e,t)}if(!F(e))throw new TypeError;if(!R(t))throw new TypeError;if(!R(n)&&!_(n)&&!A(n))throw new TypeError;return A(n)&&(n=void 0),function(e,t,i,n){for(var r=e.length-1;r>=0;--r){var o=(0,e[r])(t,i,n);if(!_(o)&&!A(o)){if(!R(o))throw new TypeError;n=o}}return n}(e,t,i=j(i),n)})),e("metadata",(function(e,t){return function(i,n){if(!R(i))throw new TypeError;if(!_(n)&&!function(e){switch(T(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;C(e,t,i,n)}})),e("defineMetadata",(function(e,t,i,n){if(!R(i))throw new TypeError;return _(n)||(n=j(n)),C(e,t,i,n)})),e("hasMetadata",(function(e,t,i){if(!R(t))throw new TypeError;return _(i)||(i=j(i)),g(e,t,i)})),e("hasOwnMetadata",(function(e,t,i){if(!R(t))throw new TypeError;return _(i)||(i=j(i)),y(e,t,i)})),e("getMetadata",(function(e,t,i){if(!R(t))throw new TypeError;return _(i)||(i=j(i)),v(e,t,i)})),e("getOwnMetadata",(function(e,t,i){if(!R(t))throw new TypeError;return _(i)||(i=j(i)),w(e,t,i)})),e("getMetadataKeys",(function(e,t){if(!R(e))throw new TypeError;return _(t)||(t=j(t)),k(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!R(e))throw new TypeError;return _(t)||(t=j(t)),O(e,t)})),e("deleteMetadata",(function(e,t,i){if(!R(t))throw new TypeError;if(_(i)||(i=j(i)),!R(t))throw new TypeError;_(i)||(i=j(i));var n=U(t,i,!1);return!_(n)&&n.OrdinaryDeleteMetadata(e,t,i)}))}(r,n),void 0===n.Reflect&&(n.Reflect=e)}()}(n||(n={}))}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(3368)})()));